"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[822],{67905:function(e,t,r){r.d(t,{AM:function(){return useGoogleOAuthRedirect},DS:function(){return oV},Kb:function(){return oA},UR:function(){return oN},er:function(){return SignUpFormMask},gx:function(){return H},qj:function(){return oM},v_:function(){return GoogleSocialStartFlowButton}});var n,o,a,i,s,l,c,u,d,p,m,h,g,f,v,y,_,S,E,b,w,C,k,A,M,F,T,P,O,I,x,R,L,V,N,U,B,D,G,j,q,$,H,W,z,K,Z,X,Y,J,Q,ee,et,er,en,eo,ea,ei,es,el,ec,eu,ed,ep,em=r(67294),eh=r(38263),eg=r(92365),ef=r(41295),ev=r(91614),ey=r(36444),e_=r(39985),eS=r(70913),eE=r(99132),eb=r(66750),ew=r(37579),eC=r(65753),ek=r(76396),eA=r(68343),eM=r(27999),eF=r(99918),eT=r(89827),eP=r(61274),eO=r(37942),eI=r(16493),ex=r(28687),eR=r(2098),eL=r(85199),eV=r(51320),eN=r(20667),eU=r(11957),eB=r(89152),eD=r(8101),eG=r(45921),ej=r(4914),e$=r(21166),eH=r(2837),eW=r(24758),ez=r(66869),eK=r(16305),eZ=r(71980),eX=r(64782),eY=r(73935),eJ=r(58875),eQ=r(17563),e0=r(26961),e1=r(44725),e2=r(12799),e3=r(64593),e5=r(34155),extendStatics$1=function(e,t){return(extendStatics$1=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function __extends$1(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics$1(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign$2=function(){return(__assign$2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)0>t.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function __decorate(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,n){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(n.next(e))}catch(e){a(e)}}function rejected(e){try{step(n.throw(e))}catch(e){a(e)}}function step(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})}function __generator(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function __read$2(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function __spreadArray(e,t,r){if(r||2==arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,eh.dX,eh.Fn,eh.Fk,eh.iR,eh.dX,eh.YQ,eh.uJ,eh.ze,eh.pL,eh.xP;var WrapperGDSText=function(e){var t=e.children,r=__rest(e,["children"]);return em.createElement("span",{className:"wrapped-gds-text"},em.createElement(eg.x,__assign$2({},r),t))};(n=L||(L={})).Active="Active",n.Disabled="Disabled",n.Loading="Loading",(o=V||(V={})).Green="Green",o.Blue="Blue",o.GhostGrey="GhostGrey",o.GoogleBlue="GoogleBlue",o.FacebookBlue="FacebookBlue",o.AccessibleGreen="AccessibleGreen",o.AccessibleGhostGrey="AccessibleGhostGrey",o.WhiteHighContrastBorder="WhiteHighContrastBorder",o.GDSGreen24="GDSGreen24";var cn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return!!e}).join(" ")||void 0},e4={unstyled:"base-module_unstyled__NoUtL",basic:"base-module_basic__zzy-b",compact:"base-module_compact__6Yys7",text:"base-module_text__avuxQ",textWithArrow:"base-module_textWithArrow__G5bFo",leftIconWrapper:"base-module_leftIconWrapper__3IAPE",rightIconWrapper:"base-module_rightIconWrapper__QVgPg",colorGreen:"base-module_colorGreen__CFLLw",statusDisabled:"base-module_statusDisabled__q9MKn",colorAccessibleGreen:"base-module_colorAccessibleGreen__JE5ks",colorGreen24:"base-module_colorGreen24__mg5-X",colorBlue:"base-module_colorBlue__YL3Po",colorWhiteHighContrastBorder:"base-module_colorWhiteHighContrastBorder__AdRXO",colorGhostGrey:"base-module_colorGhostGrey__gtQvs",colorAccessibleGhostGrey:"base-module_colorAccessibleGhostGrey__hYhSk",colorGoogleBlue:"base-module_colorGoogleBlue__AQga5",colorFacebookBlue:"base-module_colorFacebookBlue__6OscK",statusLoading:"base-module_statusLoading__uTdmR"},UnstyledButton=function(e){var t=e.children,r=e.className,n=e.qa,o=e.type,a=__rest(e,["children","className","qa","type"]);return em.createElement("button",__assign$2({className:cn(e4.unstyled,r),"data-qa":n,type:void 0===o?"button":o},a),t)},e6=__assign$2(__assign$2(__assign$2({},{neutral0:"#FFFFFF",neutral1:"#F9FAFF",neutral10:"#F0F2FC",neutral20:"#E7E9F5",neutral30:"#C6CBDE",neutral40:"#9FA6BF",neutral50:"#6D758D",neutral60:"#4D536E",neutral70:"#333954",neutral80:"#1F243C",neutral90:"#0E101A",neutral100:"#000000",blue1:"#EDF5FF",blue10:"#DBEBFF",blue20:"#99C2FF",blue30:"#79A8F2",blue40:"#638EEB",blue50:"#4A6EE0",blue60:"#3659B5",red1:"#FDF0F3",red10:"#FFDBE3",red20:"#FF99AB",red30:"#F27388",red40:"#EE445F",red50:"#EA1537",red60:"#CE1331",green1:"#EBFFFA",green10:"#D7F7F0",green20:"#AAF2E1",green30:"#87E8D1",green40:"#41D9B5",green50:"#15C39A",green60:"#11A683",green70:"#0D8065",green80:"#0B6A54",yellow1:"#FFF8EC",yellow10:"#FFF1D4",yellow20:"#FFDF80",yellow30:"#FFC940",yellow40:"#FFB61A",yellow50:"#FFA600",yellow60:"#F29100",yellow70:"#BB6E00",yellow80:"#8C5404",cyan1:"#EDFEFF",cyan10:"#DBFCFF",cyan20:"#93EDF5",cyan30:"#75E1EB",cyan40:"#4DD0DB",cyan50:"#28BAC7",cyan60:"#09A4B3",sky70:"#10627B"}),{Blue0:"#E5EBFF",Blue10:"#D7E0FE",Blue20:"#B8C8FB",Blue30:"#8CA6F6",Blue40:"#5679E8",Blue60:"#2551DA",Blue80:"#02289E",Blue90:"#001862",Blue100:"#000A26",BlueGray0:"#F4F4F6",BlueGray5:"#E2E4E9",BlueGray10:"#CDD1DC",BlueGray20:"#C2C6D4",BlueGray30:"#ADB2C3",BlueGray35:"#99A0B3",BlueGray40:"#878DA2",BlueGray50:"#757C92",BlueGray60:"#646B81",BlueGray70:"#565B6C",BlueGray80:"#474B58",BlueGray90:"#27282E",BlueGray100:"#161719",Gold0:"#FFF4E0",Gold10:"#FFEAC2",Gold20:"#FFDD9D",Gold30:"#FFC444",Gold40:"#FFA600",Gold60:"#C98300",Gold80:"#935F00",Gold90:"#5C3C00",Gold100:"#261900",Green0:"#E0FFF8",Green10:"#BEFDEF",Green20:"#7CF4D8",Green30:"#18E7B7",Green40:"#10C097",Green60:"#0A9A78",Green80:"#05735A",Green90:"#024D3B",Green100:"#00261D",Green60_24:"#027E6F",Green90_24:"#014C43",Magenta0:"#FFE5F0",Magenta10:"#FEC8DD",Magenta20:"#FAACCB",Magenta30:"#F079A8",Magenta40:"#E14683",Magenta60:"#D21861",Magenta80:"#990C43",Magenta90:"#600428",Magenta100:"#26000F",NeutralGray0:"#F5F5F5",NeutralGray5:"#E6E6E6",NeutralGray10:"#D7D7D7",NeutralGray20:"#CECECE",NeutralGray30:"#BCBCBC",NeutralGray35:"#A9A9A9",NeutralGray40:"#979797",NeutralGray50:"#858585",NeutralGray60:"#727272",NeutralGray70:"#616161",NeutralGray80:"#4F4F4F",NeutralGray90:"#2B2B2B",NeutralGray100:"#191919",Purple0:"#F3E0FF",Purple10:"#E6CCFB",Purple20:"#DABAF2",Purple30:"#C194E2",Purple40:"#A469CF",Purple60:"#8943BC",Purple80:"#60258A",Purple90:"#3A1058",Purple100:"#180426",Red0:"#FFEBEE",Red10:"#FECDD5",Red20:"#FBABB8",Red30:"#F1768A",Red40:"#E2415B",Red60:"#D31332",Red80:"#990921",Red90:"#600312",Red100:"#260006",Teal0:"#E0FCFF",Teal10:"#B2F4FA",Teal20:"#7DE5EF",Teal30:"#2AC6D5",Teal40:"#1CA5B2",Teal60:"#11848F",Teal80:"#09646C",Teal90:"#034349",Teal100:"#002326",White:"#FFFFFF"}),{indigo1:"#E9E8FA",indigo50:"#6E66DE",indigo60:"#5B55B8",indigo80:"#252150"}),Loader$1=function(e){return em.createElement("svg",{"data-qa":"preloader",className:"loader-module_preloader__YrSu7",style:e.stylesOverrides,width:"24",height:"24",viewBox:"0 0 24 24"},em.createElement("g",{transform:"translate(3 3)",stroke:e.color?e6[e.color]:"currentColor",strokeWidth:"2",fill:"none",fillRule:"evenodd",strokeLinecap:"round"},em.createElement("circle",{opacity:".3",cx:"9",cy:"9",r:"9"}),em.createElement("path",{d:"M9 0a9 9 0 0 0-9 9"})))},FacebookIconBase=function(e,t){return em.createElement("svg",{width:e,height:t,viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",focusable:"false"},em.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"url(#paint0_linear)"}),em.createElement("path",{d:"M10.9791 10.4467L11.3345 8.18877H9.11141V6.72413C9.11141 6.10625 9.42138 5.50361 10.4171 5.50361H11.4284V3.58128C11.4284 3.58128 10.511 3.42871 9.6343 3.42871C7.80263 3.42871 6.60653 4.51039 6.60653 6.46782V8.18877H4.57129V10.4467H6.60653V15.9056C7.01512 15.9681 7.43314 16.0001 7.85897 16.0001C8.2848 16.0001 8.70282 15.9681 9.11141 15.9056V10.4467H10.9791Z",fill:"white"}),em.createElement("defs",null,em.createElement("linearGradient",{id:"paint0_linear",x1:"8",y1:"0",x2:"8",y2:"15.9525",gradientUnits:"userSpaceOnUse"},em.createElement("stop",{stopColor:"#18ACFE"}),em.createElement("stop",{offset:"1",stopColor:"#0163E0"}))))},GoogleIconBase=function(e,t){return em.createElement("svg",{width:e,height:t,viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",focusable:"false"},em.createElement("g",{clipPath:"url(#clip0)"},em.createElement("path",{d:"M16.0008 8.17753C16.0008 7.51976 15.9463 7.03976 15.8285 6.54199H8.16406V9.51085H12.6629C12.5722 10.2486 12.0824 11.3598 10.994 12.1064L10.9787 12.2058L13.4021 14.0456L13.5699 14.062C15.1119 12.6664 16.0008 10.6131 16.0008 8.17753Z",fill:"#4285F4"}),em.createElement("path",{d:"M8.1636 15.9999C10.3676 15.9999 12.218 15.2887 13.5695 14.0621L10.9935 12.1065C10.3042 12.5776 9.37899 12.9065 8.1636 12.9065C6.00489 12.9065 4.17272 11.5109 3.5196 9.58203L3.42386 9.59L0.904047 11.5011L0.871094 11.5909C2.21348 14.2042 4.97084 15.9999 8.1636 15.9999Z",fill:"#34A853"}),em.createElement("path",{d:"M3.52021 9.5824C3.34788 9.08463 3.24815 8.55126 3.24815 8.00017C3.24815 7.44903 3.34788 6.91572 3.51115 6.41795L3.50658 6.31193L0.95518 4.37012L0.871703 4.40903C0.31844 5.49349 0.000976562 6.71129 0.000976562 8.00017C0.000976562 9.28906 0.31844 10.5068 0.871703 11.5913L3.52021 9.5824Z",fill:"#FBBC05"}),em.createElement("path",{d:"M8.16364 3.09331C9.6965 3.09331 10.7305 3.7422 11.3201 4.28446L13.6239 2.08C12.209 0.791114 10.3677 0 8.16364 0C4.97087 0 2.21349 1.79554 0.871094 4.40885L3.51054 6.41777C4.17274 4.48888 6.00492 3.09331 8.16364 3.09331Z",fill:"#EB4335"})),em.createElement("defs",null,em.createElement("clipPath",{id:"clip0"},em.createElement("rect",{width:"16",height:"16",fill:"white"}))))},AppleIconBase=function(e,t){return em.createElement("svg",{width:e,height:t,viewBox:"0 0 14 15",fill:"none","aria-hidden":"true",focusable:"false"},em.createElement("path",{d:"M12.8926 5.06757C12.824 5.10896 11.1909 5.98231 11.1909 7.91872C11.2679 10.1271 13.2518 10.9015 13.2858 10.9015C13.2518 10.9429 12.9863 11.9565 12.1999 13.0191C11.5758 13.9343 10.883 14.8571 9.83114 14.8571C8.83056 14.8571 8.47137 14.2471 7.31685 14.2471C6.07699 14.2471 5.72618 14.8571 4.7769 14.8571C3.725 14.8571 2.98098 13.8849 2.32285 12.9782C1.46783 11.7916 0.741095 9.92931 0.715439 8.14122C0.698149 7.19371 0.886665 6.26231 1.36521 5.4712C2.04063 4.36674 3.24646 3.61701 4.56329 3.59229C5.57224 3.5595 6.4702 4.25979 7.08595 4.25979C7.67603 4.25979 8.77924 3.59229 10.0275 3.59229C10.5662 3.59282 12.003 3.74922 12.8926 5.06757ZM7.00061 3.40311C6.82102 2.53782 7.31685 1.67253 7.77866 1.12057C8.36875 0.453067 9.30073 0 10.1044 0C10.1557 0.865287 9.83058 1.71391 9.24942 2.33198C8.72793 2.99948 7.82997 3.50199 7.00061 3.40311Z",fill:"#0E101A"}))},e7=GoogleIconBase("16px","16px"),e9=AppleIconBase("16px","16px"),e8=FacebookIconBase("16px","16px"),te=AppleIconBase("40px","48px"),tt=FacebookIconBase("40px","48px"),tr=GoogleIconBase("40px","48px"),tn=em.createElement("svg",{width:"16",height:"16",viewBox:"0 0 56 56",fill:"none","aria-hidden":"true",focusable:"false"},em.createElement("rect",{x:".54",y:".087",width:"55.581",height:"55.581",rx:"13.164",fill:"#4C7AF1"}),em.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M43.392 23.148a10.96 10.96 0 10-21.404 3.897l-8.4 8.4c-.267.27-.383.655-.308 1.028l.754 3.771c.194.97.951 1.727 1.92 1.92l3.771.754h.229c.304.002.596-.117.811-.331l2.651-2.651c.212-.213.33-.5.332-.8v-2.64l2.708-.08c.292-.007.57-.126.777-.331l1.897-1.898a10.96 10.96 0 0014.228-11.062l.034.023zm-4.777 6.743a8.685 8.685 0 01-9.302 1.942 1.143 1.143 0 00-1.223.252L26 34.176l-3.384.091c-.63 0-1.142.512-1.142 1.143v3.28l-1.897 1.874-3.177-.64a.171.171 0 01-.126-.126l-.64-3.176 8.48-8.48c.318-.322.417-.801.25-1.223a8.674 8.674 0 1114.251 2.972zm-9.29-9.257a4.411 4.411 0 106.24 0 4.571 4.571 0 00-6.24 0zm4.628 4.628a2.126 2.126 0 110-3.017 2.137 2.137 0 010 3.017z",fill:"#fff"})),EyeIcon=function(e){return em.createElement("svg",{width:"16",height:"11",viewBox:"0 0 16 11",fill:"none","aria-hidden":"true"},em.createElement("path",{d:"M14.9421 5.61977L14.4918 5.4024V5.4024L14.9421 5.61977ZM1.05765 5.61977L1.50793 5.4024L1.50793 5.4024L1.05765 5.61977ZM14.9421 5.38039L15.3924 5.16301L15.3924 5.16301L14.9421 5.38039ZM1.05765 5.38039L0.607377 5.16301L0.607377 5.16301L1.05765 5.38039ZM14.4918 5.4024C11.8689 10.8355 4.1308 10.8355 1.50793 5.4024L0.607378 5.83715C3.59408 12.0239 12.4057 12.0239 15.3924 5.83715L14.4918 5.4024ZM14.4918 5.59776C14.462 5.53605 14.462 5.46411 14.4918 5.4024L15.3924 5.83715C15.4952 5.62419 15.4952 5.37596 15.3924 5.16301L14.4918 5.59776ZM1.50793 5.59776C4.1308 0.164679 11.8689 0.164678 14.4918 5.59776L15.3924 5.16301C12.4057 -1.02374 3.59408 -1.02374 0.607377 5.16301L1.50793 5.59776ZM0.607377 5.16301C0.504572 5.37597 0.504572 5.6242 0.607378 5.83715L1.50793 5.4024C1.53772 5.46411 1.53772 5.53605 1.50793 5.59776L0.607377 5.16301ZM9.99987 5.50008C9.99987 6.60465 9.10444 7.50008 7.99987 7.50008V8.50008C9.65672 8.50008 10.9999 7.15693 10.9999 5.50008H9.99987ZM7.99987 7.50008C6.8953 7.50008 5.99987 6.60465 5.99987 5.50008H4.99987C4.99987 7.15693 6.34302 8.50008 7.99987 8.50008V7.50008ZM5.99987 5.50008C5.99987 4.39551 6.8953 3.50008 7.99987 3.50008V2.50008C6.34302 2.50008 4.99987 3.84322 4.99987 5.50008H5.99987ZM7.99987 3.50008C9.10444 3.50008 9.99987 4.39551 9.99987 5.50008H10.9999C10.9999 3.84322 9.65672 2.50008 7.99987 2.50008V3.50008Z",fill:e.color?e6[e.color]:"currentColor"}))},EyeDisabledIcon=function(e){return em.createElement("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none","aria-hidden":"true"},em.createElement("path",{d:"M14.9421 7.6197L14.4918 7.40232V7.40232L14.9421 7.6197ZM1.05765 7.6197L1.50793 7.40232L1.50793 7.40232L1.05765 7.6197ZM14.9421 7.38031L15.3924 7.16294L15.3924 7.16293L14.9421 7.38031ZM1.05765 7.38031L0.607377 7.16293L0.607377 7.16294L1.05765 7.38031ZM10.9999 7.5C10.9999 7.22386 10.776 7 10.4999 7C10.2237 7 9.99987 7.22386 9.99987 7.5H10.9999ZM7.99987 9.5C7.72373 9.5 7.49987 9.72386 7.49987 10C7.49987 10.2761 7.72373 10.5 7.99987 10.5V9.5ZM1.14632 13.1464C0.951062 13.3417 0.951062 13.6583 1.14632 13.8536C1.34159 14.0488 1.65817 14.0488 1.85343 13.8536L1.14632 13.1464ZM14.8534 0.853553C15.0487 0.658291 15.0487 0.341709 14.8534 0.146447C14.6582 -0.0488155 14.3416 -0.0488155 14.1463 0.146447L14.8534 0.853553ZM11.0879 4.20226C11.3382 4.31901 11.6357 4.21079 11.7524 3.96055C11.8692 3.7103 11.761 3.41279 11.5107 3.29603L11.0879 4.20226ZM13.3114 4.45031C13.1009 4.2715 12.7854 4.29713 12.6066 4.50756C12.4278 4.71799 12.4534 5.03353 12.6638 5.21234L13.3114 4.45031ZM3.78294 11.331C4.0204 11.4719 4.32716 11.3937 4.46811 11.1562C4.60906 10.9187 4.53082 10.612 4.29335 10.471L3.78294 11.331ZM6.12685 11.2361C5.85976 11.166 5.58639 11.3257 5.51627 11.5928C5.44614 11.8599 5.60582 12.1332 5.87291 12.2033L6.12685 11.2361ZM5.5293 9.20225C5.68614 9.42953 5.99753 9.48663 6.22481 9.32978C6.45209 9.17294 6.50918 8.86155 6.35234 8.63427L5.5293 9.20225ZM9.09968 5.82922C9.33016 5.98132 9.6403 5.91778 9.7924 5.6873C9.9445 5.45682 9.88096 5.14668 9.65048 4.99458L9.09968 5.82922ZM14.4918 7.59768C14.462 7.53597 14.462 7.46404 14.4918 7.40232L15.3924 7.83707C15.4952 7.62411 15.4952 7.37589 15.3924 7.16294L14.4918 7.59768ZM0.607377 7.16294C0.504572 7.37589 0.504572 7.62412 0.607378 7.83707L1.50793 7.40232C1.53772 7.46403 1.53772 7.53597 1.50793 7.59768L0.607377 7.16294ZM9.99987 7.5C9.99987 8.60457 9.10444 9.5 7.99987 9.5V10.5C9.65672 10.5 10.9999 9.15686 10.9999 7.5H9.99987ZM5.99987 7.5C5.99987 6.39543 6.8953 5.5 7.99987 5.5V4.5C6.34302 4.5 4.99987 5.84315 4.99987 7.5H5.99987ZM1.85343 13.8536L14.8534 0.853553L14.1463 0.146447L1.14632 13.1464L1.85343 13.8536ZM1.50793 7.59768C3.35244 3.77692 7.73141 2.63626 11.0879 4.20226L11.5107 3.29603C7.70772 1.52172 2.71273 2.80184 0.607377 7.16293L1.50793 7.59768ZM12.6638 5.21234C13.3942 5.83295 14.0231 6.62685 14.4918 7.59768L15.3924 7.16293C14.8632 6.06675 14.1481 5.16133 13.3114 4.45031L12.6638 5.21234ZM4.29335 10.471C3.15305 9.79421 2.17002 8.7738 1.50793 7.40232L0.607378 7.83707C1.35622 9.38825 2.47624 10.5554 3.78294 11.331L4.29335 10.471ZM14.4918 7.40232C12.8631 10.7762 9.26241 12.0594 6.12685 11.2361L5.87291 12.2033C9.42276 13.1354 13.5347 11.6852 15.3924 7.83707L14.4918 7.40232ZM6.35234 8.63427C6.13001 8.31211 5.99987 7.92201 5.99987 7.5H4.99987C4.99987 8.13132 5.19543 8.71846 5.5293 9.20225L6.35234 8.63427ZM7.99987 5.5C8.40703 5.5 8.78437 5.62114 9.09968 5.82922L9.65048 4.99458C9.17675 4.68196 8.6088 4.5 7.99987 4.5V5.5Z",fill:e.color?e6[e.color]:"currentColor"}))},WarningIcon$1=function(e){var t=e.title,r=e.color,n=e.tabIndex;return em.createElement("svg",{"aria-hidden":"true",fill:"none",height:"12",tabIndex:n,viewBox:"0 0 14 12",width:"14"},t&&em.createElement("title",null,t),em.createElement("path",{d:"M5.89506 1.01786C6.38615 0.160714 7.61385 0.160714 8.10494 1.01786L13.0772 9.69643C13.5682 10.5536 12.9544 11.625 11.9722 11.625H2.02778C1.04561 11.625 0.431754 10.5536 0.922838 9.69643L5.89506 1.01786Z",fill:r?e6[r]:"currentColor"}),em.createElement("path",{d:"M7 3.8125V6.9375",stroke:"white",strokeLinecap:"round"}),em.createElement("circle",{cx:"7",cy:"9.28125",r:"0.78125",fill:"white"}))},CloseIcon=function(e){return em.createElement("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none"},em.createElement("path",{d:"M1 1L6.5 6.5M12 12L6.5 6.5M6.5 6.5L12 1M6.5 6.5L1 12",stroke:e.color?e6[e.color]:"currentColor",strokeLinecap:"round"}))},ConfirmIcon=function(){return em.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},em.createElement("circle",{cx:"10",cy:"10",r:"10",fill:"#15C39A"}),em.createElement("path",{d:"M5 11L7.5 13.5L15 6",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}))};(a=N||(N={})).right="right",a.up="up",a.left="left",a.down="down";var ArrowIcon=function(e){var t,r=e.color,n=e.direction,o=void 0===n?N.right:n;return em.createElement("svg",{className:((t={})[N.right]=void 0,t[N.up]="arrow-module_up__cPCur",t[N.down]="arrow-module_down__XT4P4",t[N.left]="arrow-module_left__lSSUl",t)[o],width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},em.createElement("path",{d:"M1 0.5L6.5 6L1 11.5",stroke:r?e6[r]:"currentColor",strokeLinecap:"round"}))},ButtonContent=function(e){var t=e.text,r=e.icon,n=e.status,o=e.showArrow;return em.createElement(em.Fragment,null,n===L.Loading?em.createElement(Loader$1,null):em.createElement(em.Fragment,null,r&&em.createElement("span",{className:e4.leftIconWrapper},r),em.createElement("span",{className:cn(e4.text,o&&e4.textWithArrow)},t),o&&em.createElement("span",{className:e4.rightIconWrapper},em.createElement(ArrowIcon,null))))},to=((U={})[V.Green]=e4.colorGreen,U[V.Blue]=e4.colorBlue,U[V.GhostGrey]=e4.colorGhostGrey,U[V.GoogleBlue]=e4.colorGoogleBlue,U[V.FacebookBlue]=e4.colorFacebookBlue,U[V.GDSGreen24]=e4.colorGreen24,U[V.AccessibleGreen]=e4.colorAccessibleGreen,U[V.AccessibleGhostGrey]=e4.colorAccessibleGhostGrey,U[V.WhiteHighContrastBorder]=e4.colorWhiteHighContrastBorder,U),ta=((B={})[L.Loading]=e4.statusLoading,B[L.Disabled]=e4.statusDisabled,B),ButtonBase=function(e){var t=e.text,r=e.icon,n=e.showArrow,o=void 0!==n&&n,a=e.status,i=void 0===a?L.Active:a,s=e.compact,l=e.type,c=e.color,u=void 0===c?V.GDSGreen24:c,d=e.qa,p=e.onClick,m=e.onMouseEnter,h=e.onMouseLeave,g=e.href,f=cn(e4.basic,s&&e4.compact,ta[i],to[u],e.className);return g?em.createElement("a",{"data-qa":d,className:f,onClick:p,onMouseEnter:m,onMouseLeave:h,href:g},em.createElement(ButtonContent,{text:t,icon:r,status:i,showArrow:o})):em.createElement("button",{type:void 0===l?"button":l,"data-qa":d,className:f,disabled:i!==L.Active,onClick:p,onMouseEnter:m,onMouseLeave:h},em.createElement(ButtonContent,{text:t,icon:r,status:i,showArrow:o}))},PrimaryButton=function(e){e.color;var t=__rest(e,["color"]),r=e.color===V.Green?V.AccessibleGreen:e.color;return em.createElement(ButtonBase,__assign$2({color:r},t))},SecondaryButton=function(e){return em.createElement(ButtonBase,__assign$2({color:V.AccessibleGhostGrey},e))},SubmitAuthButton=function(e){var t=e.status,r=void 0===t?L.Active:t,n=__rest(e,["status"]),o=__read$2(em.useState(L.Loading),2),a=o[0],i=o[1];return em.useEffect(function(){i(r)},[r]),em.createElement(ButtonBase,__assign$2({type:"submit",status:a,color:V.GDSGreen24},n))};!function(e){(e.FormRenderErrorCode||(e.FormRenderErrorCode={})).UserIsAnonymous="FORM_RENDER_USER_IS_ANONYMOUS",(t=n=e.ApiErrorCode||(e.ApiErrorCode={})).SocialEmailVerification="SOCIAL_VERIFICATION",t.SocialEmailVerificationCode="SOCIAL_VERIFICATION_CODE",t.Failure="FAILURE",t.RateLimited="RATE_LIMITED",t.SignUpEmailVerification="EMAIL_VERIFICATION",t.EmailVerificationCode="EMAIL_VERIFICATION_CODE",t.RequiredFields="REQUIRED_FIELDS",t.UseFacebook="USE_FB_LOGIN",t.UseGoogle="USE_GOOGLE_LOGIN",t.UseApple="USE_APPLE_LOGIN",t.UseSocial="USE_SOCIAL_LOGIN",t.UseEmail="USE_EMAIL_LOGIN",t.UseSso="USE_SSO_LOGIN",t.UseStrongPassword="USE_STRONG_PASSWORD",t.Mfa="SHOW_MFA",t.SocialMfaVerification="SOCIAL_MFA_VERIFICATION",t.ShowCaptcha="SHOW_CAPTCHA",t.PasswordReused="PASSWORD_REUSED",t.SocialNoEmail="EMAIL_EMPTY",t.AlreadyConfirmed="ALREADY_CONFIRMED",t.InternalRuntimeError="INTERNAL_RUNTIME_ERROR",t.InvalidOAuthCode="INVALID_OAUTH_CODE",t.ExplicitSignUpRequired="EXPLICIT_SIGNUP_REQUIRED",t.AccountExistsWithDifferentLogin="ACCOUNT_EXISTS_WITH_DIFFERENT_LOGIN",t.Unknown="API_UNKNOWN",t.InvalidClient="INVALID_CLIENT",t.CannotUpdateDatabase="CANNOT_UPDATE_DATABASE",t.InvalidClientType="INVALID_CLIENT_TYPE",t.InvalidOrigin="INVALID_ORIGIN",t.InvalidRedirectUri="INVALID_REDIRECT_URI",t.InvalidScope="INVALID_SCOPE",t.NotImplemented="NOT_IMPLEMENTED",t.OAuthNotEnabled="OAUTH_NOT_ENABLED",t.FailedTokenGeneration="UNABLE_TO_GENERATE_TOKEN",t.UserNotAuthorized="USER_NOT_AUTHORIZED",t.InvalidGrantType="INVALID_GRANT_TYPE",t.MissingParameter="MISSING_PARAMETER_ERROR",t.ValidationError="VALIDATION_ERROR",(r=o=e.UiErrorCode||(e.UiErrorCode={})).AcceptTermsOfService="UI_ACCEPT_TERMS_OF_SERVICE",r.Unknown="UI_UNKNOWN",r.NotImplemented="UI_NOT_IMPLEMENTED",r.MissingClientId="UI_MISSING_CLIENT_ID",r.MissingCodeChallenge="UI_MISSING_CODE_CHALLENGE",r.MissingRedirectUri="UI_MISSING_REDIRECT_URI",r.MissingScopes="UI_MISSING_SCOPES",r.InvalidScopes="UI_INVALID_SCOPES",r.InvalidResponseMode="UI_INVALID_RESPONSE_MODE",r.InvalidRedirectUri="UI_INVALID_REDIRECT_URI",r.StateMismatch="UI_STATE_MISMATCH",r.PostMessageOpenerDNE="UI_POST_MESSAGE_OPENER_DNE";var t,r,n,o,a=[n.UseFacebook,n.UseGoogle,n.UseApple,n.UseEmail,n.UseSso,n.UseStrongPassword,n.Mfa,n.ShowCaptcha,n.SocialNoEmail,n.PasswordReused],i=new Set(Object.keys(e.ApiErrorCode).map(function(t){return e.ApiErrorCode[t]})),s=new Set(Object.keys(e.UiErrorCode).map(function(t){return e.UiErrorCode[t]}));function errCodeEqualsTo(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.some(function(t){return t.toLowerCase()===(null==e?void 0:e.toLowerCase())})}function isHTTPError(e){return e&&"HTTPError"===e.name}function isAuthCommonError(e){return e&&null!=e.errCode}function isAuthErrorCode(e){return!!e&&(i.has(e)||s.has(e))}function isRequestError(e){return e&&null!=e.details}e.HTTPError=eH.Bb,e.RequestError=eH.Lu,e.tryGetErrorFromHTTPError=function(e){var t;try{var r=JSON.parse(null!==(t=e.body)&&void 0!==t?t:"");return r.error||r.message?r:void 0}catch(e){return}},e.errCodeEqualsTo=errCodeEqualsTo,e.matchErrCode=function(e,t){var r,n=Object.keys(t).find(function(t){return errCodeEqualsTo(e,t)});return n?null===(r=t[n])||void 0===r?void 0:r.call(t):t.default?t.default():void 0},e.isHTTPError=isHTTPError,e.isAuthLegacyApiError=function(e){return e&&"AuthApiError"===e.name},e.isAuthCommonError=isAuthCommonError,e.isAuthErrorCode=isAuthErrorCode,e.isRequestError=isRequestError,e.PasswordErrorReason=ez.gx.PasswordValidationReason,e.isChangePasswordHTTPError=function(e){return e&&"string"==typeof e.error&&errCodeEqualsTo(e.error,n.PasswordReused,n.UseStrongPassword)};var l=function(e){function AuthTimeoutError(){return null!==e&&e.apply(this,arguments)||this}return __extends$1(AuthTimeoutError,e),AuthTimeoutError}(Error);e.AuthTimeoutError=l,e.resolveOrTimeout=function(e,t,r){return void 0===t&&(t="event"),void 0===r&&(r=15e3),__awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,Promise.race([e,new Promise(function(e,n){return window.setTimeout(function(){return n(new l("Timed out waiting for `".concat(t,"`")))},r)})])]})})};var c=function(t){function AuthCommonError(e,r,n){var o=this;return r=r||String(e)||"Error",(o=t.call(this,r)||this).errCode=e,o.message=r,o.nestedError=n,o}return __extends$1(AuthCommonError,t),AuthCommonError.create=function(e){return isHTTPError(e)?AuthCommonError.createFromHTTPError(e):isAuthCommonError(e)?e:isRequestError(e)?new AuthCommonError(n.Unknown,e.details,e):AuthCommonError.createFromError(o.Unknown,e)},AuthCommonError.createFromError=function(e,t){return isAuthErrorCode(e)?new AuthCommonError(e,null==t?void 0:t.message,t):new AuthCommonError(n.Unknown,null==t?void 0:t.message,t)},AuthCommonError.createFromHTTPError=function(t){var r,o=e.tryGetErrorFromHTTPError(t);if(o){var a=n.Unknown;if("string"==typeof o.error&&i.has(o.error.toUpperCase()))a=o.error.toUpperCase();else if("string"==typeof o.message){var s=o.message.replace(/\s/g,"_").toUpperCase();i.has(s)&&(a=s)}var l=(null===(r=t.request)||void 0===r?void 0:r.url)||"<no-url>",c=o.error||o.message||"<no-message>";return new e.AuthCommonError(a,"api error: ".concat(l," ").concat(c),o)}return AuthCommonError.createFromError(n.Unknown,t)},Object.defineProperty(AuthCommonError.prototype,"isRecoverable",{get:function(){var e=this;return a.some(function(t){return t===e.errCode})},enumerable:!1,configurable:!0}),AuthCommonError}(Error);e.AuthCommonError=c}(D||(D={})),(i=G||(G={})).SecureSignIn="SecureSignIn",i.SignInInit="SignInInit",i.SignInWithPassword="SignInWithPassword",i.NewAccount="NewAccount",i.NewAccountMask="NewAccountMask",i.SignUpEmailPermissionPopup="SignUpEmailPermissionPopup",i.SignInEmailPermissionPopup="SignInEmailPermissionPopup",i.ExplicitTermsOfServicePopup="ExplicitTermsOfServicePopup",i.MFA="MFA",i.Captcha="Captcha",i.SignUpEmailVerification="SignUpEmailVerification",i.ResetPassword="ResetPassword",i.ResetPasswordEmailSent="ResetPasswordEmailSent",i.VerifyResetKey="VerifyResetKey",i.SetNewPassword="SetNewPassword",i.SetNewPasswordUpdated="SetNewPasswordUpdated",i.ForgotEmail="ForgotEmail",i.SupportRequest="SupportRequest",i.SupportRequestSent="SupportRequestSent",i.GoogleOneTapSignUp="GoogleOneTapSignUp",i.OAuthConsent="OAuthConsent",i.SignUpStart="SignUpStart",i.ChooseAccount="ChooseAccount",i.RemoveAccount="RemoveAccount",i.RemoveAccountPopup="RemoveAccountPopup",i.SocialAccountLinking="SocialAccountLinking",i.MfaSocialAccountLinking="MfaSocialAccountLinking",i.WelcomeBack="WelcomeBack",i.ContinueSSO="ContinueSSO",(s=q||(q={})).ToSignIn="ToSignIn",s.ToSignUp="ToSignUp",s.ToResetPassword="ToResetPassword",s.ToForgotEmail="ToForgotEmail",s.ToMFA="ToMFA",s.ToSupportRequest="ToSupportRequest",s.ToContinueSSO="ToContinueSSO";var ti=((j={})[q.ToSignIn]=G.SignInInit,j[q.ToForgotEmail]=G.ForgotEmail,j[q.ToSignUp]=G.NewAccount,j[q.ToResetPassword]=G.ResetPassword,j[q.ToMFA]=G.MFA,j[q.ToSupportRequest]=G.SupportRequest,j[q.ToContinueSSO]=G.ContinueSSO,j);(l=$||($={})).ResetPasswordSubmit="ResetPasswordSubmit",l.SetNewPasswordSubmit="SetNewPasswordSubmit",l.VerifyPasswordResetKeySubmit="VerifyPasswordResetKeySubmit",l.SignUpEmailSubmit="SignUpEmailSubmit",l.SignUpSocialFlowStart="SignUpSocialFlowStart",l.SignInCheckEmailSubmit="SignInCheckEmailSubmit",l.SignInEmailFlowSubmit="SignInEmailFlowSubmit",l.SignInSocialFlowStart="SignInSocialFlowStart",l.SocialFlowContinue="SocialFlowContinue",l.SSOFlowContinue="SSOFlowContinue",l.CaptchaSubmit="CaptchaSubmit",l.MfaSubmit="MfaSubmit",l.SignUpEmailVerificationSubmit="SignUpEmailVerificationSubmit",l.SupportRequestSubmit="SupportRequestSubmit";var createTrigger=function(e,t){return{key:e,data:t}};!function(e){var t,r,n,o,a,i,s,l,c,u,d,p;function isAuthEmailContext(e){return e&&e.hasOwnProperty("email")}(t=e.SupplementaryFlowLinkAlignment||(e.SupplementaryFlowLinkAlignment={})).INLINE="inline",t.STACKED="stacked",(e.SignupEmailVerificationType||(e.SignupEmailVerificationType={})).Code="code",(r=e.AcrValues||(e.AcrValues={})).Google="idp:google",r.Email="idp:email",e.SignupSigninEmail={LoginHint:"loginHint",LoginHintType:"loginHintType"},e.isAuthEmailContext=isAuthEmailContext,e.isAuthSSOContext=function(e){return e&&isAuthEmailContext(e)&&!!e.isSSO},e.isAuthSocialContext=function(e){return e&&e.hasOwnProperty("socialType")},(a=o=(n=e.Social||(e.Social={})).Type||(n.Type={})).Google="Google",a.Facebook="Facebook",a.Apple="Apple",n.AllTypes=Object.values(o),(i=n.OAuthTokenType||(n.OAuthTokenType={})).Code="code",i.Token="token",i.IDToken="id_token",(l=(s=e.Props||(e.Props={})).LastNameType||(s.LastNameType={})).OPTIONAL="optional",l.REQUIRED="required",(c=s.CustomizationTypes||(s.CustomizationTypes={})).DEFAULT="default",c.EDU="edu",(u=s.SupplementaryFlowType||(s.SupplementaryFlowType={})).Link="Link",u.BuiltIn="BuiltIn",(d=e.Tracking||(e.Tracking={})).FormType=G,(p=d.ToSLinkType||(d.ToSLinkType={})).BusinessAgreement="businessAgreement",p.TermsOfService="terms",p.PrivacyPolicy="privacyPolicy",p.CAPrivacyPolicy="CAPrivacyNotice",e.Error=D,e.LoginType=ez.Bz,e.MfaSettings=ez.b,e.OAuth=ez.fy,e.Api=ez.gx,e.AjaxFetch=eW.p,e.TokenApi=eZ.W,e.PartnerAppApi=eK.B,e.User=ez.n5}(H||(H={}));var ts=((W={})[H.Social.Type.Google]={qa:"btnGoogleAuth",icon:e7},W[H.Social.Type.Facebook]={qa:"btnFacebookAuth",icon:e8},W[H.Social.Type.Apple]={qa:"btnAppleAuth",icon:e9},W),SocialAuthButton=function(e){var t=e.authSocialType,r=e.text,n=e.isPrimaryColor,o=__rest(e,["authSocialType","text","isPrimaryColor"]),a=ts[t],i=a.qa,s=a.icon;return t===H.Social.Type.Google&&n?em.createElement(GooglePrimaryColorAuthButton,__assign$2({qa:i,text:r},o)):em.createElement(ButtonBase,__assign$2({qa:i,color:V.WhiteHighContrastBorder,icon:s,text:r},o))},GooglePrimaryColorAuthButton=function(e){var t=e.className,r=__rest(e,["className"]);return em.createElement(ButtonBase,__assign$2({className:cn("social-module_googlePrimaryColorButton__mb7Q-",t),color:V.GoogleBlue,icon:em.createElement("span",{className:"social-module_googlePrimaryColorIconWrapper__p6PZQ"},e7)},r))},tl={SIGNUP:"Sign up with ",SOCIAL_FIRST_SIGNUP:"Continue with ",SIGNIN:"Sign in with ",CONTINUE:"Continue with"},SSOAuthButton=function(e){var t=e.copyType,r=__rest(e,["copyType"]),n="".concat(tl[t]," SSO");return em.createElement(ButtonBase,__assign$2({qa:"btnSSO",color:V.WhiteHighContrastBorder,icon:tn,text:n},r))},tc="fs-exclude",Link$1=function(e){var t=e.children,r=e.onClick,n=e.color,o=e.className,a=e.qa,i=__rest(e,["children","onClick","color","className","qa"]),s=__assign$2({},n?{color:e6[n]}:{}),l="_blank"===e.target?"noopener noreferrer":void 0;return em.createElement("a",__assign$2({style:s,className:eX("link-module_link__1eBZH",o),onClick:r,"data-qa":a,rel:l},i),t)};!function(){function AccountService(e){this.api=e}AccountService.prototype.getAccounts=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.api.getAuthenticationOptions()];case 1:return[2,e.sent().accounts];case 2:throw e.sent();case 3:return[2]}})})},AccountService.prototype.removeAccount=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.api.removeAccounts([e])];case 1:return t.sent(),[3,3];case 2:throw t.sent();case 3:return[2]}})})}}();var ErrorAlert=function(e){return em.createElement("div",{className:"alert-module_alertContainer__YGHx4","data-qa":e.qa,"aria-live":"polite"},e.children)},SuccessAlert=function(e){return em.createElement("div",{className:"alert-module_successContainer__jqXbl"},em.createElement("div",{className:"alert-module_successIconContainer__-KBXv"},em.createElement(ConfirmIcon,null)),e.children)};eh.z7,ef.I.Text.Base.Subdued;var tu=[];Object.freeze(tu);var td={};Object.freeze(td);var tp={};function getGlobal$1(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:tp}function getNextId(){return++tx.mobxGuid}function fail(e){throw invariant(!1,e),"X"}function invariant(e,t){if(!e)throw Error("[mobx] "+(t||"An invariant failed, however the error is obfuscated because this is an production build."))}function once(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var noop$2=function(){};function isObject(e){return null!==e&&"object"==typeof e}function isPlainObject(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function addHiddenProp(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function addHiddenFinalProp(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function createInstanceofPredicate(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(e){return isObject(e)&&!0===e[r]}}function isES6Map(e){return void 0!==getGlobal$1().Map&&e instanceof getGlobal$1().Map}function isES6Set(e){return e instanceof Set}function iteratorToArray(e){for(var t=[];;){var r=e.next();if(r.done)break;t.push(r.value)}return t}function primitiveSymbol(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function toPrimitive(e){return null===e?null:"object"==typeof e?""+e:e}function forOf(e,t){for(var r=e.next();!r.done;)t(r.value),r=e.next()}function iteratorSymbol(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function makeIterable(e){return e[iteratorSymbol()]=getSelf,e}function toStringTagSymbol(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function getSelf(){return this}var tm=function(){function Atom(e){void 0===e&&(e="Atom@"+getNextId()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=z.NOT_TRACKING}return Atom.prototype.onBecomeUnobserved=function(){},Atom.prototype.onBecomeObserved=function(){},Atom.prototype.reportObserved=function(){return reportObserved(this)},Atom.prototype.reportChanged=function(){startBatch(),function(e){if(e.lowestObserverState!==z.STALE){e.lowestObserverState=z.STALE;for(var t=e.observers,r=t.length;r--;){var n=t[r];n.dependenciesState===z.UP_TO_DATE&&(n.isTracing!==K.NONE&&logTraceInfo(n,e),n.onBecomeStale()),n.dependenciesState=z.STALE}}}(this),endBatch()},Atom.prototype.toString=function(){return this.name},Atom}(),th=createInstanceofPredicate("Atom",tm);function createAtom(e,t,r){void 0===t&&(t=noop$2),void 0===r&&(r=noop$2);var n=new tm(e);return interceptHook("onBecomeObserved",n,t,void 0),onBecomeUnobserved(n,r),n}var tg={structural:function(e,t){return deepEqual(e,t)},default:function(e,t){return"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)||e===t}},extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign$1=function(){return(__assign$1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __read$1(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$1(arguments[t]));return e}var tf={},tv={};function initializeInstance(e){if(!0!==e.__mobxDidRunLazyInitializers){var t=e.__mobxDecorators;if(t)for(var r in addHiddenProp(e,"__mobxDidRunLazyInitializers",!0),t){var n=t[r];n.propertyCreator(e,n.prop,n.descriptor,n.decoratorTarget,n.decoratorArguments)}}}function createPropDecorator(e,t){return function(){var r,n,decorator=function(r,o,a,i){if(!0===i)return t(r,o,a,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var s,l=r.__mobxDecorators;addHiddenProp(r,"__mobxDecorators",__assign$1({},l))}return r.__mobxDecorators[o]={prop:o,propertyCreator:t,descriptor:a,decoratorTarget:r,decoratorArguments:n},(s=e?tf:tv)[o]||(s[o]={configurable:!0,enumerable:e,get:function(){return initializeInstance(this),this[o]},set:function(e){initializeInstance(this),this[o]=e}})};return(r=arguments,(2===r.length||3===r.length)&&"string"==typeof r[1]||4===r.length&&!0===r[3])?(n=tu,decorator.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),decorator)}}function deepEnhancer(e,t,r){return isObservable(e)?e:Array.isArray(e)?observable.array(e,{name:r}):isPlainObject(e)?observable.object(e,void 0,{name:r}):isES6Map(e)?observable.map(e,{name:r}):isES6Set(e)?observable.set(e,{name:r}):e}function referenceEnhancer(e){return e}function createDecoratorForEnhancer(e){invariant(e);var t=createPropDecorator(!0,function(t,r,n,o,a){var i=n?n.initializer?n.initializer.call(t):n.value:void 0;!function(e,t,r,n){var o,a,i,s,l=asObservableObject(e);if(hasInterceptors(l)){var c=interceptChange(l,{object:e,name:t,type:"add",newValue:r});if(!c)return;r=c.newValue}r=(l.values[t]=new tF(r,n,l.name+"."+t,!1)).value,Object.defineProperty(e,t,tX[t]||(tX[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(e){this.$mobx.write(this,t,e)}})),l.keys&&l.keys.push(t),o=r,a=hasListeners(l),i=isSpyEnabled(),s=a||i?{type:"add",object:e,name:t,newValue:o}:null,i&&spyReportStart(__assign$1(__assign$1({},s),{name:l.name,key:t})),a&&notifyListeners(l,s),i&&spyReportEnd()}(t,r,i,e)}),r=(void 0!==e5&&e5.env,t);return r.enhancer=e,r}var ty={deep:!0,name:void 0,defaultDecorator:void 0};function asCreateObservableOptions(e){return null==e?ty:"string"==typeof e?{name:e,deep:!0}:e}function getEnhancerFromOptions(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?referenceEnhancer:deepEnhancer}Object.freeze(ty);var t_=createDecoratorForEnhancer(deepEnhancer),tS=createDecoratorForEnhancer(function(e,t,r){return null==e||isObservableObject(e)||isObservableArray(e)||tH(e)||tK(e)?e:Array.isArray(e)?observable.array(e,{name:r,deep:!1}):isPlainObject(e)?observable.object(e,void 0,{name:r,deep:!1}):isES6Map(e)?observable.map(e,{name:r,deep:!1}):isES6Set(e)?observable.set(e,{name:r,deep:!1}):fail(!1)}),tE=createDecoratorForEnhancer(referenceEnhancer),tb={box:function(e,t){arguments.length>2&&incorrectlyUsedAsDecorator("box");var r=asCreateObservableOptions(t);return new tF(e,getEnhancerFromOptions(r),r.name,!0,r.equals)},shallowBox:function(e,t){return arguments.length>2&&incorrectlyUsedAsDecorator("shallowBox"),observable.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&incorrectlyUsedAsDecorator("array");var r=asCreateObservableOptions(t);return new tD(e,getEnhancerFromOptions(r),r.name)},shallowArray:function(e,t){return arguments.length>2&&incorrectlyUsedAsDecorator("shallowArray"),observable.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&incorrectlyUsedAsDecorator("map");var r=asCreateObservableOptions(t);return new t$(e,getEnhancerFromOptions(r),r.name)},shallowMap:function(e,t){return arguments.length>2&&incorrectlyUsedAsDecorator("shallowMap"),observable.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&incorrectlyUsedAsDecorator("set");var r=asCreateObservableOptions(t);return new tz(e,getEnhancerFromOptions(r),r.name)},object:function(e,t,r){return"string"==typeof arguments[1]&&incorrectlyUsedAsDecorator("object"),function(e,t,r,n){var o,a=(n=asCreateObservableOptions(n)).defaultDecorator||(!1===n.deep?tE:t_);initializeInstance(e),asObservableObject(e,n.name,a.enhancer),startBatch();try{for(var i=Object.getOwnPropertyNames(t),s=0,l=i.length;s<l;s++){var o=i[s],c=Object.getOwnPropertyDescriptor(t,o),u=(r&&o in r?r[o]:c.get?tw:a)(e,o,c,!0);u&&Object.defineProperty(e,o,u)}}finally{endBatch()}return e}({},e,t,asCreateObservableOptions(r))},shallowObject:function(e,t){return"string"==typeof arguments[1]&&incorrectlyUsedAsDecorator("shallowObject"),observable.object(e,{},{name:t,deep:!1})},ref:tE,shallow:tS,deep:t_,struct:createDecoratorForEnhancer(function(e,t,r){return deepEqual(e,t)?t:e})},observable=function(e,t,r){if("string"==typeof arguments[1])return t_.apply(null,arguments);if(isObservable(e))return e;var n=isPlainObject(e)?observable.object(e,t,r):Array.isArray(e)?observable.array(e,t):isES6Map(e)?observable.map(e,t):isES6Set(e)?observable.set(e,t):e;if(n!==e)return n;fail(!1)};function incorrectlyUsedAsDecorator(e){fail("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(tb).forEach(function(e){return observable[e]=tb[e]});var tw=createPropDecorator(!1,function(e,t,r,n,o){var a,i,s=r.get,l=r.set,c=o[0]||{};a=__assign$1({get:s,set:l},c),i=asObservableObject(e),a.name=i.name+"."+t,a.context=e,i.values[t]=new tT(a),Object.defineProperty(e,t,tY[t]||(tY[t]={configurable:tx.computedConfigurable,enumerable:!1,get:function(){return getAdministrationForComputedPropOwner(this).read(this,t)},set:function(e){getAdministrationForComputedPropOwner(this).write(this,t,e)}}))}),tC=tw({equals:tg.structural}),computed=function(e,t,r){if("string"==typeof t||null!==e&&"object"==typeof e&&1==arguments.length)return tw.apply(null,arguments);var n="object"==typeof t?t:{};return n.get=e,n.set="function"==typeof t?t:n.set,n.name=n.name||e.name||"",new tT(n)};computed.struct=tC,(c=z||(z={}))[c.NOT_TRACKING=-1]="NOT_TRACKING",c[c.UP_TO_DATE=0]="UP_TO_DATE",c[c.POSSIBLY_STALE=1]="POSSIBLY_STALE",c[c.STALE=2]="STALE",(u=K||(K={}))[u.NONE=0]="NONE",u[u.LOG=1]="LOG",u[u.BREAK=2]="BREAK";var CaughtException=function(e){this.cause=e};function isCaughtException(e){return e instanceof CaughtException}function shouldCompute(e){switch(e.dependenciesState){case z.UP_TO_DATE:return!1;case z.NOT_TRACKING:case z.STALE:return!0;case z.POSSIBLY_STALE:for(var t=allowStateReadsStart(!0),r=untrackedStart(),n=e.observing,o=n.length,a=0;a<o;a++){var i=n[a];if(tP(i)){if(tx.disableErrorBoundaries)i.get();else try{i.get()}catch(e){return untrackedEnd(r),allowStateReadsEnd(t),!0}if(e.dependenciesState===z.STALE)return untrackedEnd(r),allowStateReadsEnd(t),!0}}return changeDependenciesStateTo0(e),untrackedEnd(r),allowStateReadsEnd(t),!1}}function checkIfStateModificationsAreAllowed(e){var t=e.observers.length>0;tx.computationDepth>0&&t&&fail(!1),!tx.allowStateChanges&&(t||"strict"===tx.enforceActions)&&fail(!1)}function trackDerivedFunction(e,t,r){var n,o=allowStateReadsStart(!0);changeDependenciesStateTo0(e),e.newObserving=Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++tx.runId;var a=tx.trackingDerivation;if(tx.trackingDerivation=e,!0===tx.disableErrorBoundaries)n=t.call(r);else try{n=t.call(r)}catch(e){n=new CaughtException(e)}return tx.trackingDerivation=a,function(e){for(var t=e.observing,r=e.observing=e.newObserving,n=z.UP_TO_DATE,o=0,a=e.unboundDepsCount,i=0;i<a;i++){var s=r[i];0===s.diffValue&&(s.diffValue=1,o!==i&&(r[o]=s),o++),s.dependenciesState>n&&(n=s.dependenciesState)}for(r.length=o,e.newObserving=null,a=t.length;a--;){var s=t[a];0===s.diffValue&&removeObserver(s,e),s.diffValue=0}for(;o--;){var s=r[o];1===s.diffValue&&(s.diffValue=0,function(e,t){var r=e.observers.length;r&&(e.observersIndexes[t.__mapid]=r),e.observers[r]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}(s,e))}n!==z.UP_TO_DATE&&(e.dependenciesState=n,e.onBecomeStale())}(e),e.observing.length,allowStateReadsEnd(o),n}function clearObserving(e){var t=e.observing;e.observing=[];for(var r=t.length;r--;)removeObserver(t[r],e);e.dependenciesState=z.NOT_TRACKING}function untracked(e){var t=untrackedStart(),r=e();return untrackedEnd(t),r}function untrackedStart(){var e=tx.trackingDerivation;return tx.trackingDerivation=null,e}function untrackedEnd(e){tx.trackingDerivation=e}function allowStateReadsStart(e){var t=tx.allowStateReads;return tx.allowStateReads=e,t}function allowStateReadsEnd(e){tx.allowStateReads=e}function changeDependenciesStateTo0(e){if(e.dependenciesState!==z.UP_TO_DATE){e.dependenciesState=z.UP_TO_DATE;for(var t=e.observing,r=t.length;r--;)t[r].lowestObserverState=z.UP_TO_DATE}}var tk=0,tA=1,tM=Object.getOwnPropertyDescriptor(function(){},"name");function createAction(e,t){var res=function(){return function(e,t,r,n){var o=function(e,t,r){var n=isSpyEnabled()&&!!e,o=0;if(n){o=Date.now();var a=r&&r.length||0,i=Array(a);if(a>0)for(var s=0;s<a;s++)i[s]=r[s];spyReportStart({type:"action",name:e,object:t,arguments:i})}var l=untrackedStart();startBatch();var c={prevDerivation:l,prevAllowStateChanges:allowStateChangesStart(!0),prevAllowStateReads:allowStateReadsStart(!0),notifySpy:n,startTime:o,actionId:tA++,parentActionId:tk};return tk=c.actionId,c}(e,r,n);try{return t.apply(r,n)}catch(e){throw o.error=e,e}finally{tk!==o.actionId&&fail("invalid action stack. did you forget to finish an action?"),tk=o.parentActionId,void 0!==o.error&&(tx.suppressReactionErrors=!0),allowStateChangesEnd(o.prevAllowStateChanges),allowStateReadsEnd(o.prevAllowStateReads),endBatch(),untrackedEnd(o.prevDerivation),o.notifySpy&&spyReportEnd({time:Date.now()-o.startTime}),tx.suppressReactionErrors=!1}}(e,t,this,arguments)};return res.isMobxAction=!0,res}function allowStateChangesStart(e){var t=tx.allowStateChanges;return tx.allowStateChanges=e,t}function allowStateChangesEnd(e){tx.allowStateChanges=e}tM&&tM.configurable;var tF=function(e){function ObservableValue(t,r,n,o,a){void 0===n&&(n="ObservableValue@"+getNextId()),void 0===o&&(o=!0),void 0===a&&(a=tg.default);var i=e.call(this,n)||this;return i.enhancer=r,i.name=n,i.equals=a,i.hasUnreportedChange=!1,i.value=r(t,void 0,n),o&&isSpyEnabled()&&spyReport({type:"create",name:i.name,newValue:""+i.value}),i}return __extends(ObservableValue,e),ObservableValue.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},ObservableValue.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==tx.UNCHANGED){var r=isSpyEnabled();r&&spyReportStart({type:"update",name:this.name,newValue:e,oldValue:t}),this.setNewValue(e),r&&spyReportEnd()}},ObservableValue.prototype.prepareNewValue=function(e){if(checkIfStateModificationsAreAllowed(this),hasInterceptors(this)){var t=interceptChange(this,{object:this,type:"update",newValue:e});if(!t)return tx.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?tx.UNCHANGED:e},ObservableValue.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:"update",object:this,newValue:e,oldValue:t})},ObservableValue.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},ObservableValue.prototype.intercept=function(e){return registerInterceptor(this,e)},ObservableValue.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),registerListener(this,e)},ObservableValue.prototype.toJSON=function(){return this.get()},ObservableValue.prototype.toString=function(){return this.name+"["+this.value+"]"},ObservableValue.prototype.valueOf=function(){return toPrimitive(this.get())},ObservableValue}(tm);tF.prototype[primitiveSymbol()]=tF.prototype.valueOf,createInstanceofPredicate("ObservableValue",tF);var tT=function(){function ComputedValue(e){this.dependenciesState=z.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=z.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+getNextId(),this.value=new CaughtException(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=K.NONE,invariant(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+getNextId(),e.set&&(this.setter=createAction(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?tg.structural:tg.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return ComputedValue.prototype.onBecomeStale=function(){(function(e){if(e.lowestObserverState===z.UP_TO_DATE){e.lowestObserverState=z.POSSIBLY_STALE;for(var t=e.observers,r=t.length;r--;){var n=t[r];n.dependenciesState===z.UP_TO_DATE&&(n.dependenciesState=z.POSSIBLY_STALE,n.isTracing!==K.NONE&&logTraceInfo(n,e),n.onBecomeStale())}}})(this)},ComputedValue.prototype.onBecomeUnobserved=function(){},ComputedValue.prototype.onBecomeObserved=function(){},ComputedValue.prototype.get=function(){this.isComputing&&fail("Cycle detected in computation "+this.name+": "+this.derivation),0!==tx.inBatch||0!==this.observers.length||this.keepAlive?(reportObserved(this),shouldCompute(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState!==z.STALE){e.lowestObserverState=z.STALE;for(var t=e.observers,r=t.length;r--;){var n=t[r];n.dependenciesState===z.POSSIBLY_STALE?n.dependenciesState=z.STALE:n.dependenciesState===z.UP_TO_DATE&&(e.lowestObserverState=z.UP_TO_DATE)}}}(this)):shouldCompute(this)&&(this.warnAboutUntrackedRead(),startBatch(),this.value=this.computeValue(!1),endBatch());var e=this.value;if(isCaughtException(e))throw e.cause;return e},ComputedValue.prototype.peek=function(){var e=this.computeValue(!1);if(isCaughtException(e))throw e.cause;return e},ComputedValue.prototype.set=function(e){if(this.setter){invariant(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else invariant(!1,!1)},ComputedValue.prototype.trackAndCompute=function(){isSpyEnabled()&&spyReport({object:this.scope,type:"compute",name:this.name});var e=this.value,t=this.dependenciesState===z.NOT_TRACKING,r=this.computeValue(!0),n=t||isCaughtException(e)||isCaughtException(r)||!this.equals(e,r);return n&&(this.value=r),n},ComputedValue.prototype.computeValue=function(e){var t;if(this.isComputing=!0,tx.computationDepth++,e)t=trackDerivedFunction(this,this.derivation,this.scope);else if(!0===tx.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new CaughtException(e)}return tx.computationDepth--,this.isComputing=!1,t},ComputedValue.prototype.suspend=function(){this.keepAlive||(clearObserving(this),this.value=void 0)},ComputedValue.prototype.observe=function(e,t){var r=this,n=!0,o=void 0;return function(e,t){void 0===t&&(t=td);var r,n=t&&t.name||e.name||"Autorun@"+getNextId();if(t.scheduler||t.delay){var o=createSchedulerFromOptions(t),a=!1;r=new tR(n,function(){a||(a=!0,o(function(){a=!1,r.isDisposed||r.track(reactionRunner)}))},t.onError,t.requiresObservable)}else r=new tR(n,function(){this.track(reactionRunner)},t.onError,t.requiresObservable);function reactionRunner(){e(r)}return r.schedule(),r.getDisposer()}(function(){var a=r.get();if(!n||t){var i=untrackedStart();e({type:"update",object:r,newValue:a,oldValue:o}),untrackedEnd(i)}n=!1,o=a})},ComputedValue.prototype.warnAboutUntrackedRead=function(){},ComputedValue.prototype.toJSON=function(){return this.get()},ComputedValue.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},ComputedValue.prototype.valueOf=function(){return toPrimitive(this.get())},ComputedValue}();tT.prototype[primitiveSymbol()]=tT.prototype.valueOf;var tP=createInstanceofPredicate("ComputedValue",tT),MobXGlobals=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},tO=!0,tI=!1,tx=((d=getGlobal$1()).__mobxInstanceCount>0&&!d.__mobxGlobals&&(tO=!1),d.__mobxGlobals&&d.__mobxGlobals.version!==new MobXGlobals().version&&(tO=!1),tO)?d.__mobxGlobals?(d.__mobxInstanceCount+=1,d.__mobxGlobals.UNCHANGED||(d.__mobxGlobals.UNCHANGED={}),d.__mobxGlobals):(d.__mobxInstanceCount=1,d.__mobxGlobals=new MobXGlobals):(setTimeout(function(){tI||fail("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new MobXGlobals);function removeObserver(e,t){if(1===e.observers.length)e.observers.length=0,queueForUnobservation(e);else{var r=e.observers,n=e.observersIndexes,o=r.pop();if(o!==t){var a=n[t.__mapid]||0;a?n[o.__mapid]=a:delete n[o.__mapid],r[a]=o}delete n[t.__mapid]}}function queueForUnobservation(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,tx.pendingUnobservations.push(e))}function startBatch(){tx.inBatch++}function endBatch(){if(0==--tx.inBatch){runReactions();for(var e=tx.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,0===r.observers.length&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof tT&&r.suspend())}tx.pendingUnobservations=[]}}function reportObserved(e){var t=tx.trackingDerivation;return null!==t?(t.runId===e.lastAccessedBy||(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.length&&tx.inBatch>0&&queueForUnobservation(e),!1)}function logTraceInfo(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===K.BREAK){var r=[];(function printDepTree(e,t,r){if(t.length>=1e3){t.push("(and many more)");return}t.push(""+Array(r).join("	")+e.name),e.dependencies&&e.dependencies.forEach(function(e){return printDepTree(e,t,r+1)})})(nodeToDependencyTree(getAtom(e,void 0)),r,1),Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof tT?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+r.join("\n")+"\n*/\n    ")()}}var tR=function(){function Reaction(e,t,r,n){void 0===e&&(e="Reaction@"+getNextId()),void 0===n&&(n=!1),this.name=e,this.onInvalidate=t,this.errorHandler=r,this.requiresObservable=n,this.observing=[],this.newObserving=[],this.dependenciesState=z.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+getNextId(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=K.NONE}return Reaction.prototype.onBecomeStale=function(){this.schedule()},Reaction.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,tx.pendingReactions.push(this),runReactions())},Reaction.prototype.isScheduled=function(){return this._isScheduled},Reaction.prototype.runReaction=function(){if(!this.isDisposed){if(startBatch(),this._isScheduled=!1,shouldCompute(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&isSpyEnabled()&&spyReport({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}endBatch()}},Reaction.prototype.track=function(e){startBatch();var t,r=isSpyEnabled();r&&(t=Date.now(),spyReportStart({name:this.name,type:"reaction"})),this._isRunning=!0;var n=trackDerivedFunction(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&clearObserving(this),isCaughtException(n)&&this.reportExceptionInDerivation(n.cause),r&&spyReportEnd({time:Date.now()-t}),endBatch()},Reaction.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler){this.errorHandler(e,this);return}if(tx.disableErrorBoundaries)throw e;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";tx.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,e),isSpyEnabled()&&spyReport({type:"error",name:this.name,message:r,error:""+e}),tx.globalReactionErrorHandlers.forEach(function(r){return r(e,t)})},Reaction.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(startBatch(),clearObserving(this),endBatch()))},Reaction.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},Reaction.prototype.toString=function(){return"Reaction["+this.name+"]"},Reaction.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=!1;"boolean"==typeof e[e.length-1]&&(r=e.pop());var n=function(e){switch(e.length){case 0:return tx.trackingDerivation;case 1:return getAtom(e[0]);case 2:return getAtom(e[0],e[1])}}(e);if(!n)return fail(!1);n.isTracing===K.NONE&&console.log("[mobx.trace] '"+n.name+"' tracing enabled"),n.isTracing=r?K.BREAK:K.LOG}(this,e)},Reaction}(),reactionScheduler=function(e){return e()};function runReactions(){tx.inBatch>0||tx.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){tx.isRunningReactions=!0;for(var e=tx.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,o=r.length;n<o;n++)r[n].runReaction()}tx.isRunningReactions=!1}var tL=createInstanceofPredicate("Reaction",tR);function isSpyEnabled(){return!!tx.spyListeners.length}function spyReport(e){if(tx.spyListeners.length)for(var t=tx.spyListeners,r=0,n=t.length;r<n;r++)t[r](e)}function spyReportStart(e){spyReport(__assign$1(__assign$1({},e),{spyReportStart:!0}))}var tV={spyReportEnd:!0};function spyReportEnd(e){e?spyReport(__assign$1(__assign$1({},e),{spyReportEnd:!0})):spyReport(tV)}function spy(e){return tx.spyListeners.push(e),once(function(){tx.spyListeners=tx.spyListeners.filter(function(t){return t!==e})})}function dontReassignFields(){fail(!1)}function namedActionDecorator(e){return function(t,r,n){if(n){if(n.value)return{value:createAction(e,n.value),enumerable:!1,configurable:!0,writable:!0};var o=n.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return createAction(e,o.call(this))}}}return(function(t,r,n){Object.defineProperty(t,r,{configurable:!0,enumerable:!1,get:function(){},set:function(t){addHiddenProp(this,r,action(e,t))}})}).apply(this,arguments)}}var action=function(e,t,r,n){return 1==arguments.length&&"function"==typeof e?createAction(e.name||"<unnamed action>",e):2==arguments.length&&"function"==typeof t?createAction(e,t):1==arguments.length&&"string"==typeof e?namedActionDecorator(e):!0!==n?namedActionDecorator(t).apply(null,arguments):void(e[t]=createAction(e.name||t,r.value))};function defineBoundAction(e,t,r){addHiddenProp(e,t,createAction(t,r.bind(e)))}action.bound=function(e,t,r,n){return!0===n?(defineBoundAction(e,t,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return defineBoundAction(this,t,r.value||r.initializer.call(this)),this[t]},set:dontReassignFields}:{enumerable:!1,configurable:!0,set:function(e){defineBoundAction(this,t,e)},get:function(){}}};var run=function(e){return e()};function createSchedulerFromOptions(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:run}function reaction(e,t,r){void 0===r&&(r=td),"boolean"==typeof r&&(r={fireImmediately:r});var n,o,a=r.name||"Reaction@"+getNextId(),i=action(a,r.onError?(n=r.onError,function(){try{return t.apply(this,arguments)}catch(e){n.call(this,e)}}):t),s=!r.scheduler&&!r.delay,l=createSchedulerFromOptions(r),c=!0,u=!1,d=r.compareStructural?tg.structural:r.equals||tg.default,p=new tR(a,function(){c||s?reactionRunner():u||(u=!0,l(reactionRunner))},r.onError,r.requiresObservable);function reactionRunner(){if(u=!1,!p.isDisposed){var t=!1;p.track(function(){var r=e(p);t=c||!d(o,r),o=r}),c&&r.fireImmediately&&i(o,p),c||!0!==t||i(o,p),c&&(c=!1)}}return p.schedule(),p.getDisposer()}function onBecomeUnobserved(e,t,r){return interceptHook("onBecomeUnobserved",e,t,r)}function interceptHook(e,t,r,n){var o="function"==typeof n?getAtom(t,r):getAtom(t),a="function"==typeof n?n:r,i=o[e];return"function"!=typeof i?fail(!1):(o[e]=function(){i.call(this),a.call(this)},function(){o[e]=i})}function nodeToDependencyTree(e){var t,r,n={name:e.name};return e.observing&&e.observing.length>0&&(n.dependencies=(t=e.observing,r=[],t.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r).map(nodeToDependencyTree)),n}function isObservable(e){return 1!=arguments.length&&fail(!1),function(e,t){if(null==e)return!1;if(void 0!==t){if(isObservableObject(e)){var r=e.$mobx;return r.values&&!!r.values[t]}return!1}return isObservableObject(e)||!!e.$mobx||th(e)||tL(e)||tP(e)}(e)}function transaction(e,t){void 0===t&&(t=void 0),startBatch();try{return e.apply(t)}finally{endBatch()}}function hasInterceptors(e){return void 0!==e.interceptors&&e.interceptors.length>0}function registerInterceptor(e,t){var r=e.interceptors||(e.interceptors=[]);return r.push(t),once(function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)})}function interceptChange(e,t){var r=untrackedStart();try{var n=e.interceptors;if(n)for(var o=0,a=n.length;o<a&&(t=n[o](t),invariant(!t||t.type,"Intercept handlers should return nothing or a change object"),t);o++);return t}finally{untrackedEnd(r)}}function hasListeners(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function registerListener(e,t){var r=e.changeListeners||(e.changeListeners=[]);return r.push(t),once(function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)})}function notifyListeners(e,t){var r=untrackedStart(),n=e.changeListeners;if(n){n=n.slice();for(var o=0,a=n.length;o<a;o++)n[o](t);untrackedEnd(r)}}var tN=(p=!1,Object.defineProperty(m={},"0",{set:function(){p=!0}}),Object.create(m)["0"]=1,!1===p),tU=0,StubArray=function(){};h=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(StubArray.prototype,h):void 0!==StubArray.prototype.__proto__?StubArray.prototype.__proto__=h:StubArray.prototype=h,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(e){Object.defineProperty(StubArray.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})});var tB=function(){function ObservableArrayAdministration(e,t,r,n){this.array=r,this.owned=n,this.values=[],this.lastKnownLength=0,this.atom=new tm(e||"ObservableArray@"+getNextId()),this.enhancer=function(r,n){return t(r,n,e+"[..]")}}return ObservableArrayAdministration.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},ObservableArrayAdministration.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},ObservableArrayAdministration.prototype.intercept=function(e){return registerInterceptor(this,e)},ObservableArrayAdministration.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),registerListener(this,e)},ObservableArrayAdministration.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},ObservableArrayAdministration.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t){if(e>t){for(var r=Array(e-t),n=0;n<e-t;n++)r[n]=void 0;this.spliceWithArray(t,0,r)}else this.spliceWithArray(e,t-e)}},ObservableArrayAdministration.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>tU&&reserveArrayBuffer(e+t+1)},ObservableArrayAdministration.prototype.spliceWithArray=function(e,t,r){var n=this;checkIfStateModificationsAreAllowed(this.atom);var o=this.values.length;if(void 0===e?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=1==arguments.length?o-e:null==t?0:Math.max(0,Math.min(t,o-e)),void 0===r&&(r=tu),hasInterceptors(this)){var a=interceptChange(this,{object:this.array,type:"splice",index:e,removedCount:t,added:r});if(!a)return tu;t=a.removedCount,r=a.added}var i=(r=0===r.length?r:r.map(function(e){return n.enhancer(e,void 0)})).length-t;this.updateArrayLength(o,i);var s=this.spliceItemsIntoValues(e,t,r);return(0!==t||0!==r.length)&&this.notifyArraySplice(e,r,s),this.dehanceValues(s)},ObservableArrayAdministration.prototype.spliceItemsIntoValues=function(e,t,r){if(r.length<1e4)return(n=this.values).splice.apply(n,__spread([e,t],r));var n,o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(r,this.values.slice(e+t)),o},ObservableArrayAdministration.prototype.notifyArrayChildUpdate=function(e,t,r){var n=!this.owned&&isSpyEnabled(),o=hasListeners(this),a=o||n?{object:this.array,type:"update",index:e,newValue:t,oldValue:r}:null;n&&spyReportStart(__assign$1(__assign$1({},a),{name:this.atom.name})),this.atom.reportChanged(),o&&notifyListeners(this,a),n&&spyReportEnd()},ObservableArrayAdministration.prototype.notifyArraySplice=function(e,t,r){var n=!this.owned&&isSpyEnabled(),o=hasListeners(this),a=o||n?{object:this.array,type:"splice",index:e,removed:r,added:t,removedCount:r.length,addedCount:t.length}:null;n&&spyReportStart(__assign$1(__assign$1({},a),{name:this.atom.name})),this.atom.reportChanged(),o&&notifyListeners(this,a),n&&spyReportEnd()},ObservableArrayAdministration}(),tD=function(e){function ObservableArray(t,r,n,o){void 0===n&&(n="ObservableArray@"+getNextId()),void 0===o&&(o=!1);var a=e.call(this)||this,i=new tB(n,r,a,o);if(addHiddenFinalProp(a,"$mobx",i),t&&t.length){var s=allowStateChangesStart(!0);a.spliceWithArray(0,0,t),allowStateChangesEnd(s)}return tN&&Object.defineProperty(i.array,"0",tG),a}return __extends(ObservableArray,e),ObservableArray.prototype.intercept=function(e){return this.$mobx.intercept(e)},ObservableArray.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},ObservableArray.prototype.clear=function(){return this.splice(0)},ObservableArray.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map(function(e){return isObservableArray(e)?e.peek():e}))},ObservableArray.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},ObservableArray.prototype.toJS=function(){return this.slice()},ObservableArray.prototype.toJSON=function(){return this.toJS()},ObservableArray.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},ObservableArray.prototype.find=function(e,t,r){void 0===r&&(r=0);var n=this.findIndex.apply(this,arguments);return -1===n?void 0:this.get(n)},ObservableArray.prototype.findIndex=function(e,t,r){void 0===r&&(r=0);for(var n=this.peek(),o=n.length,a=r;a<o;a++)if(e.call(t,n[a],a,this))return a;return -1},ObservableArray.prototype.splice=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,r)},ObservableArray.prototype.spliceWithArray=function(e,t,r){return this.$mobx.spliceWithArray(e,t,r)},ObservableArray.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.$mobx;return r.spliceWithArray(r.values.length,0,e),r.values.length},ObservableArray.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},ObservableArray.prototype.shift=function(){return this.splice(0,1)[0]},ObservableArray.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.$mobx;return r.spliceWithArray(0,0,e),r.values.length},ObservableArray.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},ObservableArray.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},ObservableArray.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},ObservableArray.prototype.move=function(e,t){function checkIndex(e){if(e<0)throw Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=this.$mobx.values.length;if(e>=t)throw Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}if(checkIndex.call(this,e),checkIndex.call(this,t),e!==t){var r,n=this.$mobx.values;r=e<t?__spread(n.slice(0,e),n.slice(e+1,t+1),[n[e]],n.slice(t+1)):__spread(n.slice(0,t),[n[e]],n.slice(t,e),n.slice(e+1)),this.replace(r)}},ObservableArray.prototype.get=function(e){var t=this.$mobx;if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},ObservableArray.prototype.set=function(e,t){var r=this.$mobx,n=r.values;if(e<n.length){checkIfStateModificationsAreAllowed(r.atom);var o=n[e];if(hasInterceptors(r)){var a=interceptChange(r,{type:"update",object:this,index:e,newValue:t});if(!a)return;t=a.newValue}(t=r.enhancer(t,o))!==o&&(n[e]=t,r.notifyArrayChildUpdate(e,t,o))}else if(e===n.length)r.spliceWithArray(e,0,[t]);else throw Error("[mobx.array] Index out of bounds, "+e+" is larger than "+n.length)},ObservableArray}(StubArray);addHiddenFinalProp(tD.prototype,iteratorSymbol(),function(){this.$mobx.atom.reportObserved();var e=this,t=0;return makeIterable({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})}),Object.defineProperty(tD.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),addHiddenProp(tD.prototype,toStringTagSymbol(),"Array"),["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(e){var t=Array.prototype[e];invariant("function"==typeof t,"Base function not defined on Array prototype: '"+e+"'"),addHiddenProp(tD.prototype,e,function(){return t.apply(this.peek(),arguments)})}),["every","filter","forEach","map","some"].forEach(function(e){invariant("function"==typeof Array.prototype[e],"Base function not defined on Array prototype: '"+e+"'"),addHiddenProp(tD.prototype,e,function(t,r){var n=this,o=this.$mobx;return o.atom.reportObserved(),o.dehanceValues(o.values)[e](function(e,o){return t.call(r,e,o,n)},r)})}),["reduce","reduceRight"].forEach(function(e){addHiddenProp(tD.prototype,e,function(){var t=this,r=this.$mobx;r.atom.reportObserved();var n=arguments[0];return arguments[0]=function(e,o,a){return n(e,o=r.dehanceValue(o),a,t)},r.values[e].apply(r.values,arguments)})}),function(e,t){for(var r=0;r<t.length;r++)addHiddenProp(e,t[r],e[t[r]])}(tD.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var tG=createArrayEntryDescriptor(0);function createArrayEntryDescriptor(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function reserveArrayBuffer(e){for(var t,r=tU;r<e;r++)t=r,Object.defineProperty(tD.prototype,""+t,createArrayEntryDescriptor(t));tU=e}reserveArrayBuffer(1e3);var tj=createInstanceofPredicate("ObservableArrayAdministration",tB);function isObservableArray(e){return isObject(e)&&tj(e.$mobx)}var tq={},t$=function(){function ObservableMap(e,t,r){if(void 0===t&&(t=deepEnhancer),void 0===r&&(r="ObservableMap@"+getNextId()),this.enhancer=t,this.name=r,this.$mobx=tq,this._keysAtom=createAtom(this.name+".keys()"),"function"!=typeof Map)throw Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return ObservableMap.prototype._has=function(e){return this._data.has(e)},ObservableMap.prototype.has=function(e){var t=this;if(!tx.trackingDerivation)return this._has(e);var r=this._hasMap.get(e);if(!r){var n=r=new tF(this._has(e),referenceEnhancer,this.name+"."+stringifyKey(e)+"?",!1);this._hasMap.set(e,n),onBecomeUnobserved(n,function(){return t._hasMap.delete(e)})}return r.get()},ObservableMap.prototype.set=function(e,t){var r=this._has(e);if(hasInterceptors(this)){var n=interceptChange(this,{type:r?"update":"add",object:this,newValue:t,name:e});if(!n)return this;t=n.newValue}return r?this._updateValue(e,t):this._addValue(e,t),this},ObservableMap.prototype.delete=function(e){var t=this;if(checkIfStateModificationsAreAllowed(this._keysAtom),hasInterceptors(this)){var r=interceptChange(this,{type:"delete",object:this,name:e});if(!r)return!1}if(this._has(e)){var n=isSpyEnabled(),o=hasListeners(this),r=o||n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return n&&spyReportStart(__assign$1(__assign$1({},r),{name:this.name,key:e})),transaction(function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)}),o&&notifyListeners(this,r),n&&spyReportEnd(),!0}return!1},ObservableMap.prototype._updateHasMapEntry=function(e,t){var r=this._hasMap.get(e);r&&r.setNewValue(t)},ObservableMap.prototype._updateValue=function(e,t){var r=this._data.get(e);if((t=r.prepareNewValue(t))!==tx.UNCHANGED){var n=isSpyEnabled(),o=hasListeners(this),a=o||n?{type:"update",object:this,oldValue:r.value,name:e,newValue:t}:null;n&&spyReportStart(__assign$1(__assign$1({},a),{name:this.name,key:e})),r.setNewValue(t),o&&notifyListeners(this,a),n&&spyReportEnd()}},ObservableMap.prototype._addValue=function(e,t){var r=this;checkIfStateModificationsAreAllowed(this._keysAtom),transaction(function(){var n=new tF(t,r.enhancer,r.name+"."+stringifyKey(e),!1);r._data.set(e,n),t=n.value,r._updateHasMapEntry(e,!0),r._keysAtom.reportChanged()});var n=isSpyEnabled(),o=hasListeners(this),a=o||n?{type:"add",object:this,name:e,newValue:t}:null;n&&spyReportStart(__assign$1(__assign$1({},a),{name:this.name,key:e})),o&&notifyListeners(this,a),n&&spyReportEnd()},ObservableMap.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},ObservableMap.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},ObservableMap.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},ObservableMap.prototype.values=function(){var e=this,t=this.keys();return makeIterable({next:function(){var r=t.next(),n=r.done,o=r.value;return{done:n,value:n?void 0:e.get(o)}}})},ObservableMap.prototype.entries=function(){var e=this,t=this.keys();return makeIterable({next:function(){var r=t.next(),n=r.done,o=r.value;return{done:n,value:n?void 0:[o,e.get(o)]}}})},ObservableMap.prototype.forEach=function(e,t){var r=this;this._keysAtom.reportObserved(),this._data.forEach(function(n,o){return e.call(t,r.get(o),o,r)})},ObservableMap.prototype.merge=function(e){var t=this;return tH(e)&&(e=e.toJS()),transaction(function(){var r=allowStateChangesStart(!0);try{isPlainObject(e)?Object.keys(e).forEach(function(r){return t.set(r,e[r])}):Array.isArray(e)?e.forEach(function(e){var r=__read$1(e,2),n=r[0],o=r[1];return t.set(n,o)}):isES6Map(e)?e.constructor!==Map?fail("Cannot initialize from classes that inherit from Map: "+e.constructor.name):e.forEach(function(e,r){return t.set(r,e)}):null!=e&&fail("Cannot initialize map from "+e)}finally{allowStateChangesEnd(r)}}),this},ObservableMap.prototype.clear=function(){var e=this;transaction(function(){untracked(function(){e._data.forEach(function(t,r){return e.delete(r)})})})},ObservableMap.prototype.replace=function(e){var t=this;return transaction(function(){var r=function(e){if(isES6Map(e)||tH(e))return e;if(Array.isArray(e))return new Map(e);if(!isPlainObject(e))return fail("Cannot convert to map from '"+e+"'");var t=new Map;for(var r in e)t.set(r,e[r]);return t}(e),n=new Map,o=!1;if(forOf(t._data.keys(),function(e){if(!r.has(e)){if(t.delete(e))o=!0;else{var a=t._data.get(e);n.set(e,a)}}}),forOf(r.entries(),function(e){var r=__read$1(e,2),a=r[0],i=r[1],s=t._data.has(a);if(t.set(a,i),t._data.has(a)){var l=t._data.get(a);n.set(a,l),s||(o=!0)}}),!o){if(t._data.size!==n.size)t._keysAtom.reportChanged();else for(var a=t._data.keys(),i=n.keys(),s=a.next(),l=i.next();!s.done;){if(s.value!==l.value){t._keysAtom.reportChanged();break}s=a.next(),l=i.next()}}t._data=n}),this},Object.defineProperty(ObservableMap.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),ObservableMap.prototype.toPOJO=function(){var e=this,t={};return this.forEach(function(r,n){return t["symbol"==typeof n?n:stringifyKey(n)]=e.get(n)}),t},ObservableMap.prototype.toJS=function(){return new Map(this)},ObservableMap.prototype.toJSON=function(){return this.toPOJO()},ObservableMap.prototype.toString=function(){var e=this;return this.name+"[{ "+iteratorToArray(this.keys()).map(function(t){return stringifyKey(t)+": "+e.get(t)}).join(", ")+" }]"},ObservableMap.prototype.observe=function(e,t){return registerListener(this,e)},ObservableMap.prototype.intercept=function(e){return registerInterceptor(this,e)},ObservableMap}();function stringifyKey(e){return e&&e.toString?e.toString():new String(e).toString()}addHiddenFinalProp(t$.prototype,iteratorSymbol(),function(){return this.entries()}),addHiddenFinalProp(t$.prototype,toStringTagSymbol(),"Map");var tH=createInstanceofPredicate("ObservableMap",t$),tW={},tz=function(){function ObservableSet(e,t,r){if(void 0===t&&(t=deepEnhancer),void 0===r&&(r="ObservableSet@"+getNextId()),this.name=r,this.$mobx=tW,this._data=new Set,this._atom=createAtom(this.name),"function"!=typeof Set)throw Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,n){return t(e,n,r)},e&&this.replace(e)}return ObservableSet.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},ObservableSet.prototype.clear=function(){var e=this;transaction(function(){untracked(function(){e._data.forEach(function(t){e.delete(t)})})})},ObservableSet.prototype.forEach=function(e,t){var r=this;this._atom.reportObserved(),this._data.forEach(function(n){e.call(t,n,n,r)})},Object.defineProperty(ObservableSet.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),ObservableSet.prototype.add=function(e){var t=this;if(checkIfStateModificationsAreAllowed(this._atom),hasInterceptors(this)){var r=interceptChange(this,{type:"add",object:this,newValue:e});if(!r)return this}if(!this.has(e)){transaction(function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()});var n=isSpyEnabled(),o=hasListeners(this),r=o||n?{type:"add",object:this,newValue:e}:null;o&&notifyListeners(this,r)}return this},ObservableSet.prototype.delete=function(e){var t=this;if(hasInterceptors(this)){var r=interceptChange(this,{type:"delete",object:this,oldValue:e});if(!r)return!1}if(this.has(e)){var n=isSpyEnabled(),o=hasListeners(this),r=o||n?{type:"delete",object:this,oldValue:e}:null;return transaction(function(){t._atom.reportChanged(),t._data.delete(e)}),o&&notifyListeners(this,r),!0}return!1},ObservableSet.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},ObservableSet.prototype.entries=function(){var e=0,t=iteratorToArray(this.keys()),r=iteratorToArray(this.values());return makeIterable({next:function(){var n=e;return e+=1,n<r.length?{value:[t[n],r[n]],done:!1}:{done:!0}}})},ObservableSet.prototype.keys=function(){return this.values()},ObservableSet.prototype.values=function(){this._atom.reportObserved();var e,t=this,r=0;return void 0!==this._data.values?e=iteratorToArray(this._data.values()):(e=[],this._data.forEach(function(t){return e.push(t)})),makeIterable({next:function(){return r<e.length?{value:t.dehanceValue(e[r++]),done:!1}:{done:!0}}})},ObservableSet.prototype.replace=function(e){var t=this;return tK(e)&&(e=e.toJS()),transaction(function(){var r=allowStateChangesStart(!0);try{Array.isArray(e)?(t.clear(),e.forEach(function(e){return t.add(e)})):isES6Set(e)?(t.clear(),e.forEach(function(e){return t.add(e)})):null!=e&&fail("Cannot initialize set from "+e)}finally{allowStateChangesEnd(r)}}),this},ObservableSet.prototype.observe=function(e,t){return registerListener(this,e)},ObservableSet.prototype.intercept=function(e){return registerInterceptor(this,e)},ObservableSet.prototype.toJS=function(){return new Set(this)},ObservableSet.prototype.toString=function(){return this.name+"[ "+iteratorToArray(this.keys()).join(", ")+" ]"},ObservableSet}();addHiddenFinalProp(tz.prototype,iteratorSymbol(),function(){return this.values()}),addHiddenFinalProp(tz.prototype,toStringTagSymbol(),"Set");var tK=createInstanceofPredicate("ObservableSet",tz),tZ=function(){function ObservableObjectAdministration(e,t,r){this.target=e,this.name=t,this.defaultEnhancer=r,this.values={}}return ObservableObjectAdministration.prototype.read=function(e,t){if(this.target===e||(this.illegalAccess(e,t),this.values[t]))return this.values[t].get()},ObservableObjectAdministration.prototype.write=function(e,t,r){var n=this.target;n!==e&&this.illegalAccess(e,t);var o=this.values[t];if(o instanceof tT){o.set(r);return}if(hasInterceptors(this)){var a=interceptChange(this,{type:"update",object:n,name:t,newValue:r});if(!a)return;r=a.newValue}if((r=o.prepareNewValue(r))!==tx.UNCHANGED){var i=hasListeners(this),s=isSpyEnabled(),a=i||s?{type:"update",object:n,oldValue:o.value,name:t,newValue:r}:null;s&&spyReportStart(__assign$1(__assign$1({},a),{name:this.name,key:t})),o.setNewValue(r),i&&notifyListeners(this,a),s&&spyReportEnd()}},ObservableObjectAdministration.prototype.remove=function(e){if(this.values[e]){var t=this.target;if(hasInterceptors(this)){var r=interceptChange(this,{object:t,name:e,type:"remove"});if(!r)return}try{startBatch();var n=hasListeners(this),o=isSpyEnabled(),a=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var r=n||o?{type:"remove",object:t,oldValue:a,name:e}:null;o&&spyReportStart(__assign$1(__assign$1({},r),{name:this.name,key:e})),n&&notifyListeners(this,r),o&&spyReportEnd()}finally{endBatch()}}},ObservableObjectAdministration.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},ObservableObjectAdministration.prototype.observe=function(e,t){return registerListener(this,e)},ObservableObjectAdministration.prototype.intercept=function(e){return registerInterceptor(this,e)},ObservableObjectAdministration.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new tD(Object.keys(this.values).filter(function(t){return e.values[t]instanceof tF}),referenceEnhancer,"keys("+this.name+")",!0)),this.keys.slice()},ObservableObjectAdministration}();function asObservableObject(e,t,r){void 0===t&&(t=""),void 0===r&&(r=deepEnhancer);var n=e.$mobx;return n||(isPlainObject(e)||(t=(e.constructor.name||"ObservableObject")+"@"+getNextId()),t||(t="ObservableObject@"+getNextId()),n=new tZ(e,t,r),addHiddenFinalProp(e,"$mobx",n)),n}var tX=Object.create(null),tY=Object.create(null);function getAdministrationForComputedPropOwner(e){return e.$mobx||(initializeInstance(e),e.$mobx)}var tJ=createInstanceofPredicate("ObservableObjectAdministration",tZ);function isObservableObject(e){return!!isObject(e)&&(initializeInstance(e),tJ(e.$mobx))}function getAtom(e,t){if("object"==typeof e&&null!==e){if(isObservableArray(e))return void 0!==t&&fail(!1),e.$mobx.atom;if(tK(e))return e.$mobx;if(tH(e)){if(void 0===t)return e._keysAtom;var r=e._data.get(t)||e._hasMap.get(t);return r||fail(!1),r}if(initializeInstance(e),t&&!e.$mobx&&e[t],isObservableObject(e)){if(!t)return fail(!1);var r=e.$mobx.values[t];return r||fail(!1),r}if(th(e)||tP(e)||tL(e))return e}else if("function"==typeof e&&tL(e.$mobx))return e.$mobx;return fail(!1)}var tQ=Object.prototype.toString;function deepEqual(e,t,r){return void 0===r&&(r=-1),function eq(e,t,r,n,o){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof t)return!1;e=unwrap(e),t=unwrap(t);var i=tQ.call(e);if(i!==tQ.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(+e!=+e)return+t!=+t;return 0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t)}var s="[object Array]"===i;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!("function"==typeof l&&l instanceof l&&"function"==typeof c&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(0===r)return!1;r<0&&(r=-1),o=o||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return o[u]===t;if(n.push(e),o.push(t),s){if((u=e.length)!==t.length)return!1;for(;u--;)if(!eq(e[u],t[u],r-1,n,o))return!1}else{var d,p,m=Object.keys(e),h=void 0;if(u=m.length,Object.keys(t).length!==u)return!1;for(;u--;)if(d=t,p=h=m[u],!(Object.prototype.hasOwnProperty.call(d,p)&&eq(e[h],t[h],r-1,n,o)))return!1}return n.pop(),o.pop(),!0}(e,t,r)}function unwrap(e){return isObservableArray(e)?e.peek():isES6Map(e)||tH(e)||isES6Set(e)||tK(e)?iteratorToArray(e.entries()):e}var t0="$mobx";if("object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:spy,extras:{getDebugName:function(e,t){return(void 0!==t?getAtom(e,t):isObservableObject(e)||tH(e)||tK(e)?function getAdministration(e,t){return(e||fail("Expecting some object"),void 0!==t)?getAdministration(getAtom(e,t)):th(e)||tP(e)||tL(e)||tH(e)||tK(e)?e:(initializeInstance(e),e.$mobx)?e.$mobx:void fail(!1)}(e):getAtom(e)).name}},$mobx:t0}),!em.useState)throw Error("mobx-react-lite requires React with Hooks support");if(!spy)throw Error("mobx-react-lite requires mobx at least version 4 to be available");var __read=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},t1=(g="observerBatching","function"==typeof Symbol?Symbol.for(g):"__$mobx-react "+g+"__");function printDebugValue(e){return nodeToDependencyTree(getAtom(e,void 0))}var t2=new Set;function ensureCleanupTimerRunning(){void 0===Z&&(Z=setTimeout(cleanUncommittedReactions,1e4))}function cleanUncommittedReactions(){Z=void 0;var e=Date.now();t2.forEach(function(t){var r=t.current;r&&e>=r.cleanAt&&(r.reaction.dispose(),t.current=null,t2.delete(t))}),t2.size>0&&ensureCleanupTimerRunning()}var t3=!1,t5=[],t4={};function observerComponentNameFor(e){return"observer"+e}function useObserver(e,t,r){void 0===t&&(t="observed"),void 0===r&&(r=t4);var n=(a=(r.useForceUpdate||function(){var e=__read((0,em.useState)(0),2)[1];return(0,em.useCallback)(function(){e(function(e){return e+1})},[])})(),function(){t3?t5.push(a):a()}),o=em.useRef(null);if(!o.current){var a,i=new tR(observerComponentNameFor(t),function(){s.mounted?n():(i.dispose(),o.current=null)}),s={cleanAt:Date.now()+1e4,reaction:i};o.current=s,t2.add(o),ensureCleanupTimerRunning()}var l=o.current.reaction;return em.useDebugValue(l,printDebugValue),em.useEffect(function(){return t2.delete(o),o.current?o.current.mounted=!0:(o.current={reaction:new tR(observerComponentNameFor(t),function(){n()}),cleanAt:1/0},n()),function(){o.current.reaction.dispose(),o.current=null}},[]),function(e){t3=!0,t5=[];try{var t=e();t3=!1;var r=t5.length>0?t5:void 0;return em.useLayoutEffect(function(){r&&r.forEach(function(e){return e()})},[r]),t}finally{t3=!1}}(function(){var t,r;if(l.track(function(){try{t=e()}catch(e){r=e}}),r)throw r;return t})}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t6={$$typeof:!0,render:!0,compare:!0,type:!0};function ObserverComponent(e){var t=e.children,r=e.render,n=t||r;return"function"!=typeof n?null:useObserver(n)}function ObserverPropsCheck(e,t,r,n,o){var a="function"==typeof e[t],i="function"==typeof e["children"===t?"render":"children"];return a&&i?Error("MobX Observer: Do not use children and render in the same time in`"+r):a||i?null:Error("Invalid prop `"+o+"` of type `"+typeof e[t]+"` supplied to `"+r+"`, expected `function`.")}ObserverComponent.propTypes={children:ObserverPropsCheck,render:ObserverPropsCheck},ObserverComponent.displayName="Observer",(f=eY.unstable_batchedUpdates)||(f=function(e){e()}),function(e){var t,r=e.enforceActions,n=e.computedRequiresReaction,o=e.computedConfigurable,a=e.disableErrorBoundaries,i=e.arrayBuffer,s=e.reactionScheduler,l=e.reactionRequiresObservable,c=e.observableRequiresReaction;if(!0===e.isolateGlobalState&&((tx.pendingReactions.length||tx.inBatch||tx.isRunningReactions)&&fail("isolateGlobalState should be called before MobX is running any reactions"),tI=!0,tO&&(0==--getGlobal$1().__mobxInstanceCount&&(getGlobal$1().__mobxGlobals=void 0),tx=new MobXGlobals)),void 0!==r){var u=void 0;switch(r){case!0:case"observed":u=!0;break;case!1:case"never":u=!1;break;case"strict":case"always":u="strict";break;default:fail("Invalid value for 'enforceActions': '"+r+"', expected 'never', 'always' or 'observed'")}tx.enforceActions=u,tx.allowStateChanges=!0!==u&&"strict"!==u}void 0!==n&&(tx.computedRequiresReaction=!!n),void 0!==l&&(tx.reactionRequiresObservable=!!l),void 0!==c&&(tx.observableRequiresReaction=!!c,tx.allowStateReads=!tx.observableRequiresReaction),void 0!==o&&(tx.computedConfigurable=!!o),void 0!==a&&(!0===a&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),tx.disableErrorBoundaries=!!a),"number"==typeof i&&reserveArrayBuffer(i),s&&(t=reactionScheduler,reactionScheduler=function(e){return s(function(){return t(e)})})}({reactionScheduler:f}),("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{})[t1]=!0;var t7=0,t9={};function newSymbol(e){return t9[e]||(t9[e]=function(e){if("function"==typeof Symbol)return Symbol(e);var t="__$mobx-react "+e+" ("+t7+")";return t7++,t}(e)),t9[e]}function shallowEqual(e,t){if(is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!Object.hasOwnProperty.call(t,r[o])||!is(e[r[o]],t[r[o]]))return!1;return!0}function is(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function setHiddenProp(e,t,r){Object.hasOwnProperty.call(e,t)?e[t]=r:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:r})}var t8=newSymbol("patchMixins"),re=newSymbol("patchedDefinition");function wrapper(e,t){for(var r,n=this,o=arguments.length,a=Array(o>2?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];t.locks++;try{return null!=e&&(r=e.apply(this,a)),r}finally{t.locks--,0===t.locks&&t.methods.forEach(function(e){e.apply(n,a)})}}function wrapFunction(e,t){return function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];wrapper.call.apply(wrapper,[this,e,t].concat(n))}}var rt=newSymbol("isUnmounted"),rr=newSymbol("skipRender"),rn=newSymbol("isForcingUpdate");function makeComponentReactive(e){var t=this;setHiddenProp(this,rr,!1),setHiddenProp(this,rn,!1);var r=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",n=e.bind(this),o=!1,a=new tR(r+".render()",function(){if(!o&&(o=!0,!0!==t[rt])){var e=!0;try{setHiddenProp(t,rn,!0),t[rr]||em.Component.prototype.forceUpdate.call(t),e=!1}finally{setHiddenProp(t,rn,!1),e&&a.dispose()}}});function reactiveRender(){o=!1;var e=void 0,t=void 0;if(a.track(function(){try{t=function(e,t){var r,n=allowStateChangesStart(e);try{r=t()}finally{allowStateChangesEnd(n)}return r}(!1,n)}catch(t){e=t}}),e)throw e;return t}return a.reactComponent=this,reactiveRender[t0]=a,this.render=reactiveRender,reactiveRender.call(this)}function observerSCU(e,t){return this.state!==t||!shallowEqual(this.props,e)}function makeObservableProp(e,t){var r=newSymbol("reactProp_"+t+"_valueHolder"),n=newSymbol("reactProp_"+t+"_atomHolder");function getAtom(){return this[n]||setHiddenProp(this,n,createAtom("reactive "+t)),this[n]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var e=!1;return allowStateReadsStart&&allowStateReadsEnd&&(e=allowStateReadsStart(!0)),getAtom.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(e),this[r]},set:function(e){this[rn]||shallowEqual(this[r],e)?setHiddenProp(this,r,e):(setHiddenProp(this,r,e),setHiddenProp(this,rr,!0),getAtom.call(this).reportChanged(),setHiddenProp(this,rr,!1))}})}var ro="function"==typeof Symbol&&Symbol.for,ra=ro?Symbol.for("react.forward_ref"):"function"==typeof em.forwardRef&&(0,em.forwardRef)(function(e){return null}).$$typeof,ri=ro?Symbol.for("react.memo"):"function"==typeof em.memo&&(0,em.memo)(function(e){return null}).$$typeof;function observer(e){if(!0===e.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),ri&&e.$$typeof===ri)throw Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(ra&&e.$$typeof===ra){var t,r,n,o,a=e.render;if("function"!=typeof a)throw Error("render property of ForwardRef was not a function");return(0,em.forwardRef)(function(){var e=arguments;return(0,em.createElement)(ObserverComponent,null,function(){return a.apply(void 0,e)})})}return"function"!=typeof e||e.prototype&&e.prototype.render||e.isReactClass||Object.prototype.isPrototypeOf.call(em.Component,e)?function(e){var t=e.prototype;if(t.componentWillReact)throw Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==em.PureComponent){if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==observerSCU)throw Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=observerSCU}makeObservableProp(t,"props"),makeObservableProp(t,"state");var r=t.render;return t.render=function(){return makeComponentReactive.call(this,r)},!function(e,t,r){var n,o,a=((o=(n=e[t8]=e[t8]||{})[t]=n[t]||{}).locks=o.locks||0,o.methods=o.methods||[],o);0>a.methods.indexOf(r)&&a.methods.push(r);var i=Object.getOwnPropertyDescriptor(e,t);if(!i||!i[re]){var s=e[t],l=function createDefinition(e,t,r,n,o){var a,i=wrapFunction(o,n);return(a={})[re]=!0,a.get=function(){return i},a.set=function(o){if(this===e)i=wrapFunction(o,n);else{var a=createDefinition(this,t,r,n,o);Object.defineProperty(this,t,a)}},a.configurable=!0,a.enumerable=r,a}(e,t,i?i.enumerable:void 0,a,s);Object.defineProperty(e,t,l)}}(t,"componentWillUnmount",function(){this.render[t0]&&this.render[t0].dispose(),this[rt]=!0}),e}(e):(r=__assign({forwardRef:!1},void 0),n=e.displayName||e.name,(o=function(t,r){return useObserver(function(){return e(t,r)},n)}).displayName=n,function(e,t){Object.keys(e).forEach(function(r){t6[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}(e,t=r.forwardRef?(0,em.memo)((0,em.forwardRef)(o)):(0,em.memo)(o)),t.displayName=n,t)}if(!em.Component)throw Error("mobx-react requires React to be available");if(!observable)throw Error("mobx-react requires mobx to be available");var rs={input:"base-module_input__cksud"},rl=(0,em.forwardRef)(function(e,t){var r=e.qa,n=e.className,o=e.onChange,a=e.onFocus,i=e.onBlur,s=e.required,l=__rest(e,["qa","className","onChange","onFocus","onBlur","required"]);return em.createElement("input",__assign$2({ref:t,"data-qa":r,className:eX(rs.input,n),onChange:o,onFocus:a,onBlur:i,"aria-required":s},l))});(v=X||(X={})).Required="Required",v.Invalid="Invalid",v.Warning="Warning",v.Suggestion="Suggestion",v.Valid="Valid";var rc={inputAndPlaceholderContainer:"default-module_inputAndPlaceholderContainer__C2hec",inputAndSuffixContainer:"default-module_inputAndSuffixContainer__Nyhe1",suffixContainer:"default-module_suffixContainer__7HRMw",input:"default-module_input__TIXuN",label:"default-module_label__disI8",minimized:"default-module_minimized__6VQYb",message:"default-module_message__p1zTj",errorIcon:"default-module_errorIcon__DtavN",error:"default-module_error__UNKr9"},ru=(0,em.forwardRef)(function(e,t){var r=e.className,n=e.onChange,o=e.onFocus,a=e.onBlur,i=e.label,s=e.suffix,l=e.validity,c=void 0===l?{status:X.Valid}:l,u=c.status,d=c.message,p=__rest(e,["className","onChange","onFocus","onBlur","label","suffix","validity"]),m=__read$2(em.useState(p.autoFocus),2),h=m[0],g=m[1],f=u===X.Invalid||u===X.Required,v=h||!!p.value,y="".concat(p.name,"__field_message"),_=!!d;return em.createElement("div",{className:eX(r,f&&rc.error)},em.createElement("div",{className:rc.inputAndPlaceholderContainer},em.createElement("label",{className:eX(rc.label,v&&rc.minimized),htmlFor:p.name},i),em.createElement("div",{className:rc.inputAndSuffixContainer},em.createElement(rl,__assign$2({ref:t,className:rc.input},p,{id:p.name,onChange:function(e){return null==n?void 0:n(e.target.value)},onFocus:function(e){g(!0),null==o||o(e)},onBlur:function(e){g(!1),null==a||a(e)},"aria-labelledby":_&&f?y:void 0,"aria-invalid":f})),!!s&&em.createElement("div",{className:rc.suffixContainer},s))),_&&em.createElement("div",{id:y,className:rc.message},f&&em.createElement("span",{className:rc.errorIcon},em.createElement(IconErrorSmall,{"aria-hidden":"true"})),d))});function IconErrorSmall(){var e="currentColor";return em.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:e},em.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM4.46967 4.46967C4.76256 4.17678 5.23744 4.17678 5.53033 4.46967L8 6.93934L10.4697 4.46967C10.7626 4.17678 11.2374 4.17678 11.5303 4.46967C11.8232 4.76256 11.8232 5.23744 11.5303 5.53033L9.06066 8L11.5303 10.4697C11.8232 10.7626 11.8232 11.2374 11.5303 11.5303C11.2374 11.8232 10.7626 11.8232 10.4697 11.5303L8 9.06066L5.53033 11.5303C5.23744 11.8232 4.76256 11.8232 4.46967 11.5303C4.17678 11.2374 4.17678 10.7626 4.46967 10.4697L6.93934 8L4.46967 5.53033C4.17678 5.23744 4.17678 4.76256 4.46967 4.46967Z",fill:e}))}var rd={emailDomain:"email-module_emailDomain__MKG0o",suggestion:"email-module_suggestion__P35RV",restrictedDomainInput:"email-module_restrictedDomainInput__OPpbk",restrictedDomainDropdownContainer:"email-module_restrictedDomainDropdownContainer__A9YL7",restrictedDomainDropdown:"email-module_restrictedDomainDropdown__ew0iv",restrictedDomainDropdownOption:"email-module_restrictedDomainDropdownOption__OUjAG"},rp=observer(function(e){var t,r=e.model,n=e.disabled,o=e.autoComplete,a=__rest(e,["model","disabled","autoComplete"]);return em.createElement(ru,__assign$2({required:!0,ref:r.inputRef,autoComplete:o?"email":void 0,spellCheck:!1,name:"email",label:null!==(t=r.inputLabel)&&void 0!==t?t:"Email",type:r.isRestrictedDomain?"text":"email",validity:r.validity,value:r.inputValue,onChange:r.onChange,onBlur:r.onBlur,disabled:n||r.isDisabled,suffix:r.isRestrictedDomain?em.createElement(RestrictedDomain,{domains:r.restrictedDomains,selectedDomain:r.selectedDomain,onSelectDomain:r.onSelectDomain,qa:"restrictedEmailDomain"}):null},a))}),RestrictedDomain=function(e){var t=e.domains,r=e.selectedDomain,n=e.onSelectDomain,o=e.qa,a=__rest(e,["domains","selectedDomain","onSelectDomain","qa"]);return 1===t.length?em.createElement("input",{disabled:!0,value:"@".concat(r),className:rd.restrictedDomainInput,"data-qa":"".concat(o,"-input"),"aria-label":"".concat(o)}):em.createElement("div",{className:rd.restrictedDomainDropdownContainer},em.createElement("select",__assign$2({className:rd.restrictedDomainDropdown,"data-qa":"".concat(o,"-dropdown"),"aria-label":"".concat(o," dropdown"),onChange:function(e){return n(e.target.value)}},a),t.map(function(e){return em.createElement("option",{value:e,key:e,className:rd.restrictedDomainDropdownOption},"@",e)})))},rm={required:{status:X.Required,message:"Required"},invalid:{status:X.Invalid,message:"Invalid email address"},misspelled:function(e,t){return{status:X.Suggestion,message:em.createElement(em.Fragment,null,em.createElement("span",{className:eX(rd.emailDomain,tc,t&&rd.suggestion),onClick:t},e)," ","might be misspelled")}},valid:{status:X.Valid}},rh=function(){function FifoCache(e){this.map=new Map,this.capacity=e}return FifoCache.prototype.get=function(e){return this.map.get(e)},FifoCache.prototype.has=function(e){return this.map.has(e)},FifoCache.prototype.set=function(e,t){if(this.map.set(e,t),this.map.size>this.capacity){var r=this.map.keys().next().value;this.map.delete(r)}return this},FifoCache.prototype.delete=function(e){return this.map.delete(e)},FifoCache.prototype.clear=function(){return this.map.clear()},FifoCache}(),rg=function(){function EmailModel(e,t,r,n,o,a){void 0===t&&(t=""),void 0===r&&(r=void 0),void 0===o&&(o=!1),void 0===a&&(a=void 0),this.api=e,this.customEmailValidation=n,this.restrictedDomains=a,this.verifyEmailCache=new rh(5),this.inputValue="",this.validity=rm.valid,this.inputRef=(0,em.createRef)(),this.inputValue=t,this.isDisabled=o,this.inputLabel=r,this.isRestrictedDomain=!!a&&a.length>0,this.selectedDomain=this.isRestrictedDomain?a[0]:void 0}return EmailModel.prototype.validateValue=function(e){return(e=e.trim()).length<1?rm.required:EmailModel.emailRegex.test(e)?rm.valid:rm.invalid},EmailModel.prototype.checkDomainSpelling=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a=this;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.verifyEmail(e)];case 1:return t=(o=i.sent()).isValid,r=o.hint,this.value===e&&(r?(n=__read$2(r.split("@"),2)[1],this.validity=rm.misspelled("@".concat(n),function(){a.onChange(r,!0)})):t?this.validity=rm.valid:(n=__read$2(e.split("@"),2)[1],this.validity=rm.misspelled("@".concat(n)))),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}})})},EmailModel.prototype.checkCustomEmailValidation=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,3,,4]),!this.customEmailValidation)return[3,2];return[4,this.customEmailValidation(e)];case 1:t=r.sent(),this.value===e&&(this.validity=t),r.label=2;case 2:return[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}})})},EmailModel.prototype.verifyEmail=function(e){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(n){switch(n.label){case 0:if(r=this.verifyEmailCache.get(e))return[3,2];return[4,this.api.verifyEmail(e)];case 1:r=n.sent(),n.label=2;case 2:return t=r,this.verifyEmailCache.set(e,t),[2,t]}})})},EmailModel.prototype.setValue=function(e){this.inputValue=e},Object.defineProperty(EmailModel.prototype,"value",{get:function(){return this.isRestrictedDomain?this.inputValue+"@".concat(this.selectedDomain):this.inputValue},enumerable:!1,configurable:!0}),Object.defineProperty(EmailModel.prototype,"isValid",{get:function(){return this.validity.status===X.Valid||this.validity.status===X.Suggestion},enumerable:!1,configurable:!0}),EmailModel.prototype.validate=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(this.validity=this.validateValue(this.value),!this.isValid)return[3,2];return[4,this.checkCustomEmailValidation(this.value)];case 1:e.sent(),e.label=2;case 2:return[2,[this.isValid,this.validity.status]]}})})},EmailModel.prototype.onChange=function(e,t){void 0===t&&(t=!1),this.setValue(e),(!this.isValid||t)&&this.validate()},EmailModel.prototype.onBlur=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if(!this.value)return[3,2];return[4,this.validate()];case 1:e=__read$2.apply(void 0,[t.sent(),1])[0],!this.isDisabled&&e&&this.checkDomainSpelling(this.value),t.label=2;case 2:return[2]}})})},EmailModel.prototype.focus=function(){this.inputRef.current&&this.inputRef.current.focus()},EmailModel.prototype.onSelectDomain=function(e){this.selectedDomain=e},EmailModel.emailRegex=/^[^@\s]+@[^@\s]+\.[^@\s]+$/iu,__decorate([observable,__metadata("design:type",Object)],EmailModel.prototype,"inputValue",void 0),__decorate([observable,__metadata("design:type",Object)],EmailModel.prototype,"isDisabled",void 0),__decorate([observable.ref,__metadata("design:type",Object)],EmailModel.prototype,"validity",void 0),__decorate([observable,__metadata("design:type",Object)],EmailModel.prototype,"selectedDomain",void 0),__decorate([observable,__metadata("design:type",Boolean)],EmailModel.prototype,"isRestrictedDomain",void 0),__decorate([observable,__metadata("design:type",Object)],EmailModel.prototype,"inputRef",void 0),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],EmailModel.prototype,"checkDomainSpelling",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],EmailModel.prototype,"checkCustomEmailValidation",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],EmailModel.prototype,"setValue",null),__decorate([computed,__metadata("design:type",String),__metadata("design:paramtypes",[])],EmailModel.prototype,"value",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],EmailModel.prototype,"isValid",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],EmailModel.prototype,"validate",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String,Object]),__metadata("design:returntype",void 0)],EmailModel.prototype,"onChange",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],EmailModel.prototype,"onBlur",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],EmailModel.prototype,"focus",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],EmailModel.prototype,"onSelectDomain",null),EmailModel}(),rf=!(eJ.canUseDOM&&eJ.canUseViewport&&eJ.canUseEventListeners)||navigator.userAgent.toLowerCase().includes("node.js")||navigator.userAgent.includes("jsdom"),generateRandomString=function(e){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";if(!rf&&(window.crypto||window.msCrypto)){var r=(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(e)).map(function(e){return t.charCodeAt(e%t.length)});return String.fromCharCode.apply(null,Array.from(r))}for(var n="",o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},digestMessage=function(e){return __awaiter(void 0,void 0,void 0,function(){var t,r,n;return __generator(this,function(o){switch(o.label){case 0:if(!(!rf&&(window.crypto||window.msCrypto)))return[3,2];return t=window.crypto||window.msCrypto,r=new TextEncoder().encode(e),[4,t.subtle.digest("SHA-256",r)];case 1:return n=o.sent(),[2,btoa(new Uint8Array(n).reduce(function(e,t){return e+String.fromCharCode(t)},"")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")];case 2:throw Error("Unable to hash string")}})})},rv={Empty:"empty",Value:"value",Error:"error",Loading:"loading"},ry=function(){function PayloadBase(){}return PayloadBase.prototype.isEmpty=function(){return this.state===rv.Empty},PayloadBase.prototype.isLoading=function(){return this.state===rv.Loading},PayloadBase.prototype.isError=function(){return this.state===rv.Error},PayloadBase.prototype.isValue=function(){return this.state===rv.Value},PayloadBase}(),r_=function(e){function PayloadEmpty(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=rv.Empty,t}return __extends$1(PayloadEmpty,e),PayloadEmpty.prototype.getOr=function(e){return e},PayloadEmpty}(ry),rS=function(e){function PayloadLoading(t){var r=e.call(this)||this;return r.state=rv.Loading,r.meta=t,r}return __extends$1(PayloadLoading,e),PayloadLoading.prototype.getOr=function(e){return e},PayloadLoading}(ry),rE=function(e){function PayloadError(t){var r=e.call(this)||this;return r.state=rv.Error,r.error=t,r.nonce=generateRandomString(10),r}return __extends$1(PayloadError,e),PayloadError.prototype.getOr=function(e){return e},PayloadError.prototype.getErrorMessage=function(){return this.error.message.toString()},PayloadError}(ry),rb={Empty:r_,Loading:rS,Value:function(e){function PayloadValue(t){var r=e.call(this)||this;return r.state=rv.Value,r.value=t,r}return __extends$1(PayloadValue,e),PayloadValue.prototype.getOr=function(e){return void 0===this.value?e:this.value},PayloadValue}(ry),Error:rE},rw=function(){function ResetPasswordModel(e,t){this.api=e,this.payload=new rb.Empty,this.emailModel=new rg(this.api,t)}return ResetPasswordModel.prototype.getData=function(){return{email:this.emailModel.value}},ResetPasswordModel.prototype.validate=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.emailModel.validate()];case 1:return[2,[(e=__read$2.apply(void 0,[t.sent(),2]))[0],{email:e[1]}]]}})})},ResetPasswordModel.prototype.setPayload=function(e){this.payload=e},__decorate([observable.ref,__metadata("design:type",Object)],ResetPasswordModel.prototype,"payload",void 0),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ResetPasswordModel.prototype,"validate",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],ResetPasswordModel.prototype,"setPayload",null),ResetPasswordModel}(),rC="signin/signup",rk=function(){function CaptchaEnterprise(e,t,r){void 0===r&&(r=rC);var n=this;this.key=e,this.logger=t,this.defaultAction=r,this.tokenMap=new Map,this.tokenReqMap=new Map,this.tokenRefreshTimers=new Map,this.initTimeStart=0,this.execute=function(e){return void 0===e&&(e=n.defaultAction),__awaiter(n,void 0,void 0,function(){var t,r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:if(this.logger.info("[Execute Captcha] Execute Captcha attempt",{action:e}),!this.isEnabled)return[2];this.isGrecaptchaLoaded()||this.logger.error("[Execute Captcha] Captcha was not loaded at time of executeCaptcha",{action:e}),t=Date.now(),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this.waitUntilCaptchaReady(15e3)];case 2:return r=i.sent(),[4,this.getToken(e)];case 3:return n=i.sent(),this.deleteToken(e),this.logger.info("[Execute Captcha] Token Exists after execute = [".concat(!!n,"], waitUntilCaptchaReady_time_ms = [").concat(r,"]"),{action:e,waitUntilCaptchaReadyTimeMs:r}),[2,n];case 4:return o=i.sent(),a=Date.now()-t,this.logger.error("\n          [Execute Captcha] ".concat(o.message,"; Time from start of execute to error was ").concat(a,"\n        "),o,{action:e,timeUntilError:a}),[3,5];case 5:return[2]}})})},this.waitUntilCaptchaReady=function(e){var t=Date.now();return new Promise(function(r,o){var check=function(){var a=Date.now()-t;if(a>e)return o(Error("Max wait time of ".concat(e,"ms reached while waiting for grecaptcha initialize")));try{if(n.isGrecaptchaLoaded())return r(a)}catch(e){}finally{window.setTimeout(check,100)}};check()})},this.onCaptchaLoad=function(e){return void 0===e&&(e="init"),n.logger.info("[On Captcha Load] Initial Captcha load time, ms",{loadTime:Date.now()-n.initTimeStart,callContext:e}),n.preloadDefaultToken()}}return CaptchaEnterprise.prototype.init=function(){return!!(this.isEnabled&&(this.initTimeStart=Date.now(),this.isGrecaptchaLoaded()))&&(this.onCaptchaLoad("init"),!0)},CaptchaEnterprise.prototype.cleanup=function(){this.isEnabled&&this.tokenRefreshTimers.forEach(function(e){return clearTimeout(e)})},CaptchaEnterprise.prototype.preloadDefaultToken=function(){var e=this,t=this.defaultAction;return this.preCacheToken(t).then(function(){e.logger.info("[Preload Token] RequestToken Captcha preload time, ms",{timeSinceReady:Date.now()-e.initTimeStart,action:t})}).catch(function(r){return e.logger.error("[Preload Token] captchaOnLoad failed to execute",r,{action:t})})},CaptchaEnterprise.prototype.deleteToken=function(e){this.tokenMap.has(e)&&this.tokenMap.delete(e)},CaptchaEnterprise.prototype.getToken=function(e){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(n){switch(n.label){case 0:if(r=(t=this.tokenMap.get(e))&&Date.now()-t.time>1e5,!(!t||r))return[3,2];return r&&this.logger.info("[Execute Captcha] Captcha getToken token is expired",{lifetimeMs:Date.now()-t.time,action:e}),[4,this.preCacheToken(e)];case 1:t=n.sent(),n.label=2;case 2:return[2,t.token]}})})},CaptchaEnterprise.prototype.preCacheToken=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return this.clearRefreshTimer(e),[4,this.requestToken(e)];case 1:return t=r.sent(),this.tokenMap.set(e,t),this.setRefreshTimer(e),[2,t]}})})},CaptchaEnterprise.prototype.requestToken=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n=this;return __generator(this,function(o){return!this.tokenReqMap.has(e)&&(t=Date.now(),r=new Promise(function(t,r){var o,a;if(!n.isGrecaptchaLoaded())return r(Error("grecaptcha is not yet loaded"));null===(a=null===(o=n.grecaptcha)||void 0===o?void 0:o.enterprise)||void 0===a||a.ready(function(){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.grecaptcha.enterprise.execute(this.key,{action:e})];case 1:return t({token:n.sent(),time:Date.now()}),[3,3];case 2:return r(n.sent()),[3,3];case 3:return[2]}})})})}),this.tokenReqMap.set(e,r),r.then(function(){n.tokenReqMap.delete(e)},function(r){n.logger.error("[Request Token] RequestToken Captcha execute fail time, ms",r,{timeSinceReady:Date.now()-t,action:e}),n.tokenReqMap.delete(e)})),[2,this.tokenReqMap.get(e)]})})},CaptchaEnterprise.prototype.isGrecaptchaLoaded=function(){var e,t;return!!(null===(t=null===(e=this.grecaptcha)||void 0===e?void 0:e.enterprise)||void 0===t?void 0:t.ready)},Object.defineProperty(CaptchaEnterprise.prototype,"grecaptcha",{get:function(){return window.grecaptcha},enumerable:!1,configurable:!0}),Object.defineProperty(CaptchaEnterprise.prototype,"isEnabled",{get:function(){return!rf},enumerable:!1,configurable:!0}),CaptchaEnterprise.prototype.clearRefreshTimer=function(e){this.isEnabled&&this.tokenRefreshTimers.has(e)&&(window.clearTimeout(this.tokenRefreshTimers.get(e)),this.tokenRefreshTimers.delete(e))},CaptchaEnterprise.prototype.setRefreshTimer=function(e){var t=this;this.isEnabled&&(this.clearRefreshTimer(e),this.tokenRefreshTimers.set(e,window.setTimeout(function(){return t.preCacheToken(e)},6e4)))},CaptchaEnterprise}(),rA=function(){function TermsOfServiceModel(e,t,r){this.isGDPR=e,this.isExplicitToSAgreement=t,this.hasBusinessToSAgreement=r,this.isHighlighted=!1,this.isMarketingEmailsAllowed=!1,this.isTermsOfServiceAccepted=!1,this.isMarketingEmailsAllowed=!e,this.isTermsOfServiceAccepted=!t}return TermsOfServiceModel.prototype.validate=function(){return[this.isTermsOfServiceAccepted,this.isTermsOfServiceAccepted?X.Valid:X.Required]},TermsOfServiceModel.prototype.getData=function(){return{isMarketingEmailsAllowed:this.isGDPR?this.isMarketingEmailsAllowed:null,isTermsOfServiceAccepted:this.isExplicitToSAgreement?this.isTermsOfServiceAccepted:null}},TermsOfServiceModel.prototype.setData=function(e){this.onMarketingEmailChange(null===e.isMarketingEmailsAllowed?!this.isGDPR:e.isMarketingEmailsAllowed),this.onTermsOfServiceChange(null===e.isTermsOfServiceAccepted?!this.isExplicitToSAgreement:e.isTermsOfServiceAccepted)},TermsOfServiceModel.prototype.onMarketingEmailChange=function(e){void 0===e&&(e=!1),this.isMarketingEmailsAllowed=e},TermsOfServiceModel.prototype.onTermsOfServiceChange=function(e){this.isTermsOfServiceAccepted=e},TermsOfServiceModel.prototype.onHighlightStart=function(){this.isHighlighted=!this.isTermsOfServiceAccepted},TermsOfServiceModel.prototype.onHighlightEnd=function(){this.isHighlighted=!1},__decorate([observable,__metadata("design:type",Object)],TermsOfServiceModel.prototype,"isHighlighted",void 0),__decorate([observable,__metadata("design:type",Object)],TermsOfServiceModel.prototype,"isMarketingEmailsAllowed",void 0),__decorate([observable,__metadata("design:type",Object)],TermsOfServiceModel.prototype,"isTermsOfServiceAccepted",void 0),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],TermsOfServiceModel.prototype,"setData",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],TermsOfServiceModel.prototype,"onMarketingEmailChange",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Boolean]),__metadata("design:returntype",void 0)],TermsOfServiceModel.prototype,"onTermsOfServiceChange",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],TermsOfServiceModel.prototype,"onHighlightStart",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],TermsOfServiceModel.prototype,"onHighlightEnd",null),TermsOfServiceModel}(),rM={passwordSuffixContainer:"password-module_passwordSuffixContainer__2XsKy",passwordIcon:"password-module_passwordIcon__Ew6Zc"},PasswordWarningIcon=function(e){var t=e.color;return em.createElement(ev.u,{placement:"top"},em.createElement(ev.aJ,{asChild:!0,ref:void 0},em.createElement("span",{className:rM.passwordIcon},em.createElement(WarningIcon$1,{color:t,tabIndex:0}))),em.createElement(ev._v,{root:null,ref:void 0},em.createElement(eg.x,{as:"span",variant:"text-xsmall"},"Your password appears in a list of passwords commonly used on other websites. To ensure your safety, please choose another password.")))},PasswordSuffix=function(e){return em.createElement("div",{className:rM.passwordSuffixContainer},(e.showWarning||e.showError)&&em.createElement(PasswordWarningIcon,{color:e.showWarning?"yellow60":"red50"}),em.createElement(UnstyledButton,{className:eX(rM.passwordIcon),onClick:e.onEyeIconClick,type:"button","aria-label":"".concat(e.isPasswordHidden?"Show":"Hide"," password")},e.isPasswordHidden?em.createElement(EyeIcon,{color:"neutral50"}):em.createElement(EyeDisabledIcon,{color:"neutral50"})),em.createElement(ey.u,{"aria-live":"polite"},e.isPasswordHidden?"Show password":"Hide password"))},rF=observer(function(e){var t=e.model,r=__rest(e,["model"]),n=__read$2((0,em.useState)(!0),2),o=n[0],a=n[1];return em.createElement(ru,__assign$2({ref:t.inputRef,required:!0,name:"password",type:o?"password":"text",label:"Password",suffix:em.createElement(PasswordSuffix,{showWarning:t.leakedStatus===X.Warning,showError:t.leakedStatus===X.Invalid,isPasswordHidden:o,onEyeIconClick:function(){return a(!o)}}),validity:t.validity,value:t.value,onChange:t.onChange,onBlur:t.onBlur},r))});function Link(e){var t=e.accessibilityLabel,r=e.children,n=e.openInNewWindow,o=e.target,a=e.variant,i=e.to,s=e.testId,l=e.qa,c=__rest(e,["accessibilityLabel","children","openInNewWindow","target","variant","to","testId","qa"]);return em.createElement(Link$1,__assign$2({"aria-label":t,color:"primary"===a?"blue50":void 0,href:i,target:n?"_blank":o,qa:s||l,"data-testid":s},c),r)}var rT={required:{status:X.Required,message:"Required"},minLengthError:{status:X.Invalid,message:"Your password must contain at least 8 characters"},maxLengthError:{status:X.Invalid,message:"Your password cannot be longer than 64 characters"},similarToEmailError:{status:X.Invalid,message:"This password is too similar to your email address. Please choose another password."},similarToNameError:{status:X.Invalid,message:"This password is too similar to the name below, please choose a stronger password. Try a mix of letters, numbers, and symbols."},leakedInvalid:{status:X.Invalid,message:em.createElement("div",null,"Your password appears in a"," ",em.createElement(Link,{to:"https://support.grammarly.com/hc/en-us/articles/115000090212-How-can-I-keep-my-Grammarly-account-secure",openInNewWindow:!0},"list of passwords commonly used")," ","on other websites. To ensure your safety, please choose another password.")},reused:{status:X.Invalid,message:"Choose a password you haven’t used before."},valid:{status:X.Valid},validEmpty:{status:X.Valid,message:"Use 8 characters or more"}};(y=Y||(Y={})).Basic="Basic",y.Strict="Strict",y.StrictPlusLeaked="StrictPlusLeaked";var rP=function(){function PasswordModel(e,t,r,n){void 0===t&&(t=Y.Basic),this.api=e,this.validationType=t,this.captchaEnterprise=r,this.emailModel=n,this.minLength=8,this.maxLength=64,this.remoteValidationCache=new rh(10),this.value="",this.inputRef=(0,em.createRef)(),this.validity=this.validationType===Y.Basic?rT.valid:rT.validEmpty}return PasswordModel.prototype.validateValue=function(e,t){return(e=e.trim().toLowerCase()).length<1?rT.required:this.validationType===Y.Basic?rT.valid:e.length<this.minLength?rT.minLengthError:e.length>this.maxLength?rT.maxLengthError:t&&t.toLowerCase().startsWith(e)?rT.similarToEmailError:this.validationType===Y.Strict?rT.valid:this.remoteValidationCache.get(e)?rT.leakedInvalid:rT.valid},PasswordModel.prototype.setValue=function(e){this.value=e},Object.defineProperty(PasswordModel.prototype,"isEmpty",{get:function(){return!this.value},enumerable:!1,configurable:!0}),Object.defineProperty(PasswordModel.prototype,"isValid",{get:function(){return this.validity.status===X.Valid},enumerable:!1,configurable:!0}),Object.defineProperty(PasswordModel.prototype,"isLeaked",{get:function(){return!!this.leakedStatus&&this.leakedStatus!==X.Valid},enumerable:!1,configurable:!0}),PasswordModel.prototype.resetLeaked=function(e){var t=this.remoteValidationCache.get(e);t&&t.reason===H.Error.PasswordErrorReason.PasswordLeaked?this.leakedStatus=this.validationType===Y.Strict?X.Warning:X.Invalid:this.leakedStatus=X.Valid},PasswordModel.prototype.validate=function(){var e;return this.validity=this.validateValue(this.value,null===(e=this.emailModel)||void 0===e?void 0:e.value),[this.isValid,this.validity.status]},PasswordModel.prototype.remoteValidate=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:e=this.value,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.requestRemoteValidation(e)];case 2:return(t=r.sent())&&e===this.value&&this.setValidityFromServer(t),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}})})},PasswordModel.prototype.setValidityFromError=function(e){var t=e;!e.reason&&D.errCodeEqualsTo(e.error,D.ApiErrorCode.PasswordReused)&&(t={reason:D.PasswordErrorReason.PasswordReused,description:rT.reused.message}),this.setValidityFromServer(t)},PasswordModel.prototype.setValidityFromServer=function(e){var t=e.reason,r=e.description;t===D.PasswordErrorReason.PasswordLeaked?this.validationType===Y.StrictPlusLeaked?(this.leakedStatus=X.Invalid,this.validity=rT.leakedInvalid):this.validationType===Y.Strict&&(this.leakedStatus=X.Warning):t===D.PasswordErrorReason.ValidationPassed?(this.leakedStatus=X.Valid,this.validity=rT.valid):t===D.PasswordErrorReason.PasswordEqualsName?(this.leakedStatus=X.Valid,this.validity=rT.similarToNameError):(this.leakedStatus=X.Valid,this.validity={status:X.Invalid,message:r||""})},PasswordModel.prototype.onChange=function(e){this.setValue(e),this.isValid||this.validate(),this.isLeaked&&this.resetLeaked(e)},PasswordModel.prototype.onBlur=function(){this.value&&__read$2(this.validate(),1)[0]&&(this.validationType===Y.Strict||this.validationType===Y.StrictPlusLeaked)&&this.remoteValidate()},PasswordModel.prototype.focus=function(){this.inputRef.current&&this.inputRef.current.focus()},PasswordModel.prototype.requestRemoteValidation=function(e){var t;return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:if(this.remoteValidationCache.has(e))return[2,this.remoteValidationCache.get(e)];o.label=1;case 1:return o.trys.push([1,5,,6]),[4,null===(t=this.captchaEnterprise)||void 0===t?void 0:t.execute("password/validate")];case 2:if(!(r=o.sent()))return[3,4];return[4,this.api.validatePassword(e,r)];case 3:return n=o.sent(),this.remoteValidationCache.set(e,n),[2,n];case 4:return[3,6];case 5:return o.sent(),[3,6];case 6:return[2]}})})},__decorate([observable,__metadata("design:type",Object)],PasswordModel.prototype,"value",void 0),__decorate([observable.ref,__metadata("design:type",Object)],PasswordModel.prototype,"validity",void 0),__decorate([observable,__metadata("design:type",Object)],PasswordModel.prototype,"leakedStatus",void 0),__decorate([observable,__metadata("design:type",Object)],PasswordModel.prototype,"inputRef",void 0),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],PasswordModel.prototype,"setValue",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],PasswordModel.prototype,"isEmpty",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],PasswordModel.prototype,"isValid",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],PasswordModel.prototype,"isLeaked",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],PasswordModel.prototype,"resetLeaked",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Array)],PasswordModel.prototype,"validate",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],PasswordModel.prototype,"remoteValidate",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],PasswordModel.prototype,"setValidityFromError",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],PasswordModel.prototype,"setValidityFromServer",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],PasswordModel.prototype,"onChange",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],PasswordModel.prototype,"onBlur",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],PasswordModel.prototype,"focus",null),PasswordModel}(),rO=observer(function(e){var t=e.model,r=e.autoComplete,n=__rest(e,["model","autoComplete"]);return em.createElement(ru,__assign$2({required:!0,autoComplete:r?"name":void 0,spellCheck:!1,name:"name",label:"Name",validity:t.validity,value:t.value,onChange:t.onChange,onBlur:t.onBlur},n))}),rI={required:{status:X.Required,message:"Required"},invalid:{status:X.Invalid,message:"Symbols are not allowed"},valid:{status:X.Valid}},rx=function(){function NameModel(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=""),this.passwordModel=e,this.nameRegex=/[!$%^&*()_+|~={}\[\]:";<>?,.\/]/gu,this.value="",this.validity=rI.valid,this.value=r,this.required=t}return NameModel.prototype.validateValue=function(e){return(e=e.trim()).length<1&&this.required?rI.required:this.nameRegex.test(e)?rI.invalid:rI.valid},NameModel.prototype.setValue=function(e){this.value=e},Object.defineProperty(NameModel.prototype,"isValid",{get:function(){return this.validity.status===X.Valid},enumerable:!1,configurable:!0}),NameModel.prototype.validate=function(){return this.validity=this.validateValue(this.value),[this.isValid,this.validity.status]},NameModel.prototype.onChange=function(e){this.passwordModel.validity===rT.similarToNameError&&this.passwordModel.validate(),this.setValue(e),this.isValid||this.validate()},NameModel.prototype.onBlur=function(){this.value&&this.validate()},__decorate([observable,__metadata("design:type",Object)],NameModel.prototype,"value",void 0),__decorate([observable.ref,__metadata("design:type",Object)],NameModel.prototype,"validity",void 0),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],NameModel.prototype,"setValue",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],NameModel.prototype,"isValid",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Array)],NameModel.prototype,"validate",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],NameModel.prototype,"onChange",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],NameModel.prototype,"onBlur",null),NameModel}(),rR=function(){function SignUpEmailFlowStepModel(e,t,r,n,o,a,i,s,l){this.termsModel=r,this.payload=new rb.Empty,this.isEmailActivated=!1,this.emailModel=new rg(e,n,o,a,i,s),this.passwordModel=new rP(e,Y.Strict,t,this.emailModel),this.nameModel=new rx(this.passwordModel),this.nameModelLast=new rx(this.passwordModel,l===H.Props.LastNameType.REQUIRED),this.showLastName=l,this.reactionDisposers=this.setupReactions(r,this.emailModel),n&&this.validateInitialEmail()}return SignUpEmailFlowStepModel.prototype.validateInitialEmail=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.emailModel.onBlur()];case 1:return e.sent(),this.emailModel.isValid&&this.activate(),[2]}})})},SignUpEmailFlowStepModel.prototype.destruct=function(){this.reactionDisposers&&this.reactionDisposers.forEach(function(e){return e()})},Object.defineProperty(SignUpEmailFlowStepModel.prototype,"flowError",{get:function(){if(this.payload.isError())return this.payload.error},enumerable:!1,configurable:!0}),Object.defineProperty(SignUpEmailFlowStepModel.prototype,"isUseEmailFlowError",{get:function(){return!!this.flowError&&H.Error.errCodeEqualsTo(this.flowError.errCode,D.ApiErrorCode.UseEmail)},enumerable:!1,configurable:!0}),SignUpEmailFlowStepModel.prototype.setEmailVerificationExperiment=function(e){this.emailVerification=e},SignUpEmailFlowStepModel.prototype.getName=function(){var e=this.nameModel,t=this.nameModelLast,r=this.showLastName,n=e.value.trim(),o=t.value.trim();return r===H.Props.LastNameType.REQUIRED?"".concat(n," ").concat(o):r===H.Props.LastNameType.OPTIONAL&&o?"".concat(n," ").concat(o):n},SignUpEmailFlowStepModel.prototype.getFlowData=function(){return __assign$2(__assign$2({email:this.emailModel.value.trim(),password:this.passwordModel.value.trim(),name:this.getName()},this.termsModel.getData()),{emailVerification:this.emailVerification})},SignUpEmailFlowStepModel.prototype.setEmail=function(e){this.emailModel.onChange(e,!0),this.activate()},SignUpEmailFlowStepModel.prototype.setPayloadFromServer=function(e){if(e.isError()&&H.Error.errCodeEqualsTo(e.error.errCode,D.ApiErrorCode.UseStrongPassword)){var t=e.error.nestedError;this.passwordModel.setValidityFromError(t),this.setPayload(new rb.Empty)}else this.setPayload(e)},SignUpEmailFlowStepModel.prototype.setPayload=function(e){this.payload=e},SignUpEmailFlowStepModel.prototype.setFlowError=function(e){this.setPayload(new rb.Error(e))},SignUpEmailFlowStepModel.prototype.resetFlowError=function(){this.setPayload(new rb.Empty)},SignUpEmailFlowStepModel.prototype.activate=function(){this.isEmailActivated=!0},SignUpEmailFlowStepModel.prototype.getNameValidity=function(){var e,t=(e=__read$2(this.nameModelLast.validate(),2))[0],r=e[1];return[this.showLastName!==H.Props.LastNameType.REQUIRED||t,r]},SignUpEmailFlowStepModel.prototype.validateFlow=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i,s,l,c,u,d,p,m,h;return __generator(this,function(g){switch(g.label){case 0:return[4,this.emailModel.validate()];case 1:return e=(u=__read$2.apply(void 0,[g.sent(),2]))[0],t=u[1],r=(d=__read$2(this.passwordModel.validate(),2))[0],n=d[1],o=(p=__read$2(this.nameModel.validate(),2))[0],a=p[1],i=(m=__read$2(this.getNameValidity(),2))[0],s=m[1],l=(h=__read$2(this.termsModel.validate(),2))[0],c=h[1],l||this.setFlowError(H.Error.AuthCommonError.createFromError(H.Error.UiErrorCode.AcceptTermsOfService,Error("Terms of Service are not accepted"))),[2,[e&&r&&l&&o&&i,__assign$2({email:t,password:n,name:a,termsOfService:c},this.showLastName===H.Props.LastNameType.REQUIRED&&{lastName:s})]]}})})},SignUpEmailFlowStepModel.prototype.setupReactions=function(e,t){var r=this,n=[];return n.push(reaction(function(){return e.isTermsOfServiceAccepted},function(e){e&&r.flowError&&H.Error.errCodeEqualsTo(r.flowError.errCode,H.Error.UiErrorCode.AcceptTermsOfService)&&r.resetFlowError()})),n.push(reaction(function(){return t.value},function(){r.flowError&&H.Error.errCodeEqualsTo(r.flowError.errCode,H.Error.ApiErrorCode.UseEmail,H.Error.ApiErrorCode.UseGoogle,H.Error.ApiErrorCode.UseFacebook,H.Error.ApiErrorCode.UseApple,H.Error.ApiErrorCode.UseSocial)&&r.resetFlowError()})),n},__decorate([observable.ref,__metadata("design:type",Object)],SignUpEmailFlowStepModel.prototype,"payload",void 0),__decorate([observable,__metadata("design:type",Object)],SignUpEmailFlowStepModel.prototype,"isEmailActivated",void 0),__decorate([observable,__metadata("design:type",Object)],SignUpEmailFlowStepModel.prototype,"emailVerification",void 0),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SignUpEmailFlowStepModel.prototype,"validateInitialEmail",null),__decorate([computed,__metadata("design:type",Object),__metadata("design:paramtypes",[])],SignUpEmailFlowStepModel.prototype,"flowError",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],SignUpEmailFlowStepModel.prototype,"isUseEmailFlowError",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SignUpEmailFlowStepModel.prototype,"setEmailVerificationExperiment",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],SignUpEmailFlowStepModel.prototype,"setEmail",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SignUpEmailFlowStepModel.prototype,"setPayloadFromServer",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SignUpEmailFlowStepModel.prototype,"setPayload",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[H.Error.AuthCommonError]),__metadata("design:returntype",void 0)],SignUpEmailFlowStepModel.prototype,"setFlowError",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SignUpEmailFlowStepModel.prototype,"resetFlowError",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SignUpEmailFlowStepModel.prototype,"activate",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SignUpEmailFlowStepModel.prototype,"validateFlow",null),SignUpEmailFlowStepModel}(),rL=function(){function BaseSocialProvider(){}return BaseSocialProvider.prototype.getFromRequestData=function(e,t){return e(t.urlQueryHash||{})||e(t.urlHashHash||{})||e(t.serverDataHash||{})},BaseSocialProvider.prototype.getTokenFromHash=function(e){return e.access_token},BaseSocialProvider.prototype.getCodeFromHash=function(e){return e.code},BaseSocialProvider.prototype.getIdTokenFromHash=function(e){return e.id_token},BaseSocialProvider.prototype.getWrappedCode=function(e){return this.accessCode=this.getFromRequestData(this.getCodeFromHash,e),{code:this.accessCode||""}},BaseSocialProvider.prototype.getWrappedToken=function(e){return this.accessToken=this.getFromRequestData(this.getTokenFromHash,e),{access_token:this.accessToken||""}},BaseSocialProvider.prototype.getWrappedIdToken=function(e){return this.idToken=this.getFromRequestData(this.getIdTokenFromHash,e),{id_token:this.idToken||""}},BaseSocialProvider}(),buildQueryString=function(e){return Object.keys(e).filter(function(t){return null!=e[t]}).map(function(t){var r;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent((null!==(r=e[t])&&void 0!==r?r:"").toString()))}).join("&")},composeUrl=function(e,t){return e+(-1===e.indexOf("?")?"?":"&")+buildQueryString(t)};function getOrigin(){return window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function parseQuery(e){return void 0===e&&(e=""),eQ.Qc(e)}var rV=function(e){function AppleServerProvider(t){var r=e.call(this)||this;return r.config=t,r.type=H.Social.Type.Apple,r}return __extends$1(AppleServerProvider,e),AppleServerProvider.prototype.getName=function(e){var t=void 0,r=this.getFromRequestData(function(e){return e.user},e);if(r)try{var n=JSON.parse(r).name;if(n){var o=[n.firstName,n.lastName].join(" ").trim();o&&(t=o)}}catch(e){}return t},AppleServerProvider.prototype.getSignupConfig=function(e){return{apple_signup:__assign$2(__assign$2({},this.getWrappedCode(e)),{name:this.getName(e)})}},AppleServerProvider.prototype.getSigninConfig=function(e){return{apple_login:__assign$2(__assign$2({},this.getWrappedCode(e)),{name:this.getName(e)})}},AppleServerProvider.prototype.getDeleteConfig=function(e){return{apple_login:this.getWrappedCode(e)}},AppleServerProvider.prototype.getOAuthProviderUrl=function(e){var t=e.stateKey;return composeUrl("https://appleid.apple.com/auth/authorize",{client_id:this.config.clientId,redirect_uri:"".concat(getOrigin()).concat(this.config.returnRedirectUrl),response_type:"code",state:t,scope:AppleServerProvider.authScope,response_mode:"form_post"})},AppleServerProvider.authScope="email name",AppleServerProvider}(rL),rN=function(e){function GoogleServerProvider(t){var r=e.call(this)||this;return r.config=t,r.type=H.Social.Type.Google,r.unlinkTokenType=[H.Social.OAuthTokenType.Token,H.Social.OAuthTokenType.IDToken],r}return __extends$1(GoogleServerProvider,e),GoogleServerProvider.prototype.getSignupConfig=function(e){return{google_signup:this.getWrappedCode(e)}},GoogleServerProvider.prototype.getSigninConfig=function(e){return{google_login:this.getWrappedCode(e)}},GoogleServerProvider.prototype.getDeleteConfig=function(){return{google_login:{access_token:this.idToken||""}}},GoogleServerProvider.prototype.revokeAppAccess=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.accessToken)return[3,2];return[4,fetch("https://oauth2.googleapis.com/revoke?token=".concat(this.accessToken),{method:"POST"})];case 1:e.sent(),e.label=2;case 2:return[2,Promise.resolve()]}})})},GoogleServerProvider.prototype.getOAuthProviderUrl=function(e){var t=e.stateKey,r=e.desiredTokenType,n=e.loginHint,o=(Array.isArray(r)?r.join(" "):r)||H.Social.OAuthTokenType.Code;return composeUrl("https://accounts.google.com/o/oauth2/v2/auth",__assign$2({client_id:this.config.clientId,redirect_uri:"".concat(getOrigin()).concat(this.config.returnRedirectUrl),response_type:o,state:t,scope:GoogleServerProvider.authScope,prompt:"select_account",nonce:generateRandomString(30),disallow_webview:"true"},n?{login_hint:n}:{}))},GoogleServerProvider.authScope="email profile openid",GoogleServerProvider}(rL);(_=J||(J={})).reRequest="rerequest",_.reAuthenticate="reauthenticate";var rU=function(e){function FacebookServerProvider(t){var r=e.call(this)||this;return r.config=t,r.type=H.Social.Type.Facebook,r.unlinkTokenType=H.Social.OAuthTokenType.Token,r}return __extends$1(FacebookServerProvider,e),FacebookServerProvider.prototype.getSignupConfig=function(e){return{facebook_signup:this.getWrappedCode(e)}},FacebookServerProvider.prototype.getSigninConfig=function(e){return{facebook_login:this.getWrappedCode(e)}},FacebookServerProvider.prototype.getDeleteConfig=function(e){return{facebook_login:this.getWrappedToken(e)}},FacebookServerProvider.prototype.revokeAppAccess=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:if(!e)return[3,2];return[4,fetch("https://graph.facebook.com/".concat(FacebookServerProvider.sdkVersion,"/me/permissions?access_token=").concat(e),{method:"DELETE"})];case 1:t.sent(),t.label=2;case 2:return[2,Promise.resolve()]}})})},FacebookServerProvider.prototype.getOAuthProviderUrl=function(e){var t=e.desiredTokenType,r=e.stateKey,n=e.reRequestPermissions,o=(Array.isArray(t)?t.join(" "):t)||H.Social.OAuthTokenType.Code;return composeUrl("https://www.facebook.com/".concat(FacebookServerProvider.sdkVersion,"/dialog/oauth"),{client_id:this.config.clientId,redirect_uri:"".concat(getOrigin()).concat(this.config.returnRedirectUrl),response_type:o,state:r,scope:FacebookServerProvider.authScope,auth_type:n?J.reRequest:""})},FacebookServerProvider.authScope="email",FacebookServerProvider.sdkVersion="v9.0",FacebookServerProvider}(rL);(S=Q||(Q={})).funnelNavigateToAfterMobileSignin="funnelNavigateToAfterMobileSignin",S.businessMemberWelcomeWithExtensionFlow="businessMemberWelcomeWithExtensionFlow",S.desktopIntegrationDownload="desktop_integration_download",S.desktopIntegrationInstalled="desktop_integration_installed",S.newUserAchievement="newUserAchievement",S.grammarlyDiscountName="GrammarlyDiscountName",S.grammarlyDiscountValue="GrammarlyDiscountValue",S.grammarlyDiscountType="GrammarlyDiscountType";var setCookie=function(e,t,r,n){if(void 0!==t){if(n){var o,a=new Date;a.setTime(a.getTime()+1e3*n),o=a}document.cookie=e1.q(e,t.toString(),{expires:o,path:"/",domain:r})}},deleteCookie=function(e,t){document.cookie="".concat(e,"=;path=/;domain=").concat(t,";expires=Thu, 01 Jan 1970 00:00:01 GMT")},getCookie=function(e){if(!rf)return e1.Q(document.cookie)[e];var t=Error();e2.C8.Logging.getLogger("cookie.interception").warn("Cannot parse cookie from document at the server-side",{cookieName:e,stackTrace:t.stack})},rB=function(){function CookieStorage(e,t,r){void 0===r&&(r=1800);var n=this;this.cookieName=e,this.cookieDomain=t,this.cookieTime=r,this.data={},this.stateKeyProp="_stateKey",this.getStateKey=function(){var e=n.decompressCookieToObject();return e&&e[n.stateKeyProp]},this.appendData=function(e,t){n.data[e]=t},this.getData=function(e){return n.data[e]}}return CookieStorage.prototype.clearData=function(){this.data={}},CookieStorage.prototype.clearCookie=function(){deleteCookie(this.cookieName,this.cookieDomain)},CookieStorage.prototype.decompressCookieToObject=function(){var e=e0.decompressFromBase64(getCookie(this.cookieName)||"");return e?JSON.parse(e):{}},CookieStorage.prototype.save=function(e){this.appendData(this.stateKeyProp,e),setCookie(this.cookieName,e0.compressToBase64(JSON.stringify(this.data)),this.cookieDomain,this.cookieTime)},CookieStorage.prototype.restore=function(e){try{this.clearData();var t=this.decompressCookieToObject();t&&t[this.stateKeyProp]===e&&(this.data=t)}catch(e){this.clearData()}},CookieStorage.prototype.saveAndClearData=function(e){this.save(e),this.clearData()},CookieStorage.prototype.restoreAndClearCookie=function(e){this.restore(e),this.clearCookie()},CookieStorage.prototype.reset=function(){this.clearData(),this.clearCookie()},CookieStorage}(),rD="_socialService:data",rG=function(){function SocialService(e){var t=this;this.appendToState=function(e,r){t.storage.appendData(e,r)},this.getFromStateByKey=function(e){return t.storage.getData(e)},this.storage=new rB("authSocialState",e,1800)}return SocialService.get=function(e){var t=this.instances.get(e);if(t)return t;var r=new SocialService(e);return this.instances.set(e,r),r},Object.defineProperty(SocialService.prototype,"isContinueFlow",{get:function(){return!!this.continueFlowData},enumerable:!1,configurable:!0}),Object.defineProperty(SocialService.prototype,"flowData",{get:function(){return this.continueFlowData},enumerable:!1,configurable:!0}),SocialService.prototype.resetFlowData=function(){this.storage.reset(),this.continueFlowData=void 0},SocialService.prototype.saveState=function(e){var t=this.generateStateKey();return this.storage.appendData(rD,e),this.storage.saveAndClearData(t),t},SocialService.prototype.tryRestoreFlowState=function(e,t,r,n){this.storage.restoreAndClearCookie(e);var o={restoredData:this.storage.getData(rD)};if(e?o.restoredData&&H.isAuthSocialContext(o.restoredData.context)||(o.restoreError=Error("Restored context is empty, cannot continue previous flow")):o.restoreError=Error("Invalid StateKey"),o.requestData={urlQueryHash:t,urlHashHash:r,serverDataHash:n},this.continueFlowData=o,this.continueFlowData.restoreError)throw this.continueFlowData.restoreError},SocialService.prototype.generateStateKey=function(){return generateRandomString(30)},SocialService.validAuthSocialTypes=[H.Social.Type.Google,H.Social.Type.Facebook,H.Social.Type.Apple],SocialService.instances=new Map,SocialService}(),rj=function(){function SocialFlowStepModel(e,t,r,n){this.actionType=e,this.socialConfig=t,this.termsModel=n,this.payload=new rb.Empty,this.enabledProviders=this.createProviders(t,r),n&&(this.reactionDisposers=this.setupReactions(n))}return SocialFlowStepModel.prototype.destruct=function(){this.reactionDisposers&&this.reactionDisposers.forEach(function(e){return e()})},SocialFlowStepModel.prototype.getProviderByType=function(e){return this.enabledProviders.find(function(t){return t.type===e})},Object.defineProperty(SocialFlowStepModel.prototype,"isEnabled",{get:function(){return this.enabledProviders.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(SocialFlowStepModel.prototype,"flowError",{get:function(){if(this.payload.isError())return this.payload.error},enumerable:!1,configurable:!0}),Object.defineProperty(SocialFlowStepModel.prototype,"flowErrorAlert",{get:function(){if(this.flowError&&!this.flowErrorNotice)return this.flowError},enumerable:!1,configurable:!0}),Object.defineProperty(SocialFlowStepModel.prototype,"flowErrorNotice",{get:function(){if(this.flowError&&"SIGNIN"===this.actionType&&H.Error.errCodeEqualsTo(this.flowError.errCode,H.Error.ApiErrorCode.UseEmail))return this.flowError},enumerable:!1,configurable:!0}),Object.defineProperty(SocialFlowStepModel.prototype,"isLoading",{get:function(){return this.payload.isLoading()},enumerable:!1,configurable:!0}),SocialFlowStepModel.prototype.setPayloadFromServer=function(e,t){this.payload=e,this.activeProviderType=t},SocialFlowStepModel.prototype.setFlowError=function(e){this.payload=new rb.Error(e)},SocialFlowStepModel.prototype.resetFlowError=function(){this.payload=new rb.Empty},SocialFlowStepModel.prototype.validateFlow=function(){if(this.termsModel){var e,t,r=(e=__read$2(null===(t=this.termsModel)||void 0===t?void 0:t.validate(),2))[0],n=e[1];return r||this.setFlowError(H.Error.AuthCommonError.createFromError(H.Error.UiErrorCode.AcceptTermsOfService,Error("Terms of Service are not accepted"))),[r,{termsOfService:n}]}return[!0,{}]},SocialFlowStepModel.prototype.resetProviders=function(e){this.enabledProviders=this.createProviders(this.socialConfig,e)},SocialFlowStepModel.prototype.createProviders=function(e,t){return rG.validAuthSocialTypes.filter(function(e){return!t||!t.find(function(t){return t===e})}).map(function(t){switch(t){case H.Social.Type.Apple:return new rV(e.apple);case H.Social.Type.Facebook:return new rU(e.facebook);case H.Social.Type.Google:return new rN(e.google)}})},SocialFlowStepModel.prototype.setupReactions=function(e){var t=this;return[reaction(function(){return e.isTermsOfServiceAccepted},function(e){e&&t.resetFlowError()})]},__decorate([observable.ref,__metadata("design:type",Array)],SocialFlowStepModel.prototype,"enabledProviders",void 0),__decorate([observable.ref,__metadata("design:type",Object)],SocialFlowStepModel.prototype,"payload",void 0),__decorate([observable,__metadata("design:type",Object)],SocialFlowStepModel.prototype,"activeProviderType",void 0),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],SocialFlowStepModel.prototype,"isEnabled",null),__decorate([computed,__metadata("design:type",Object),__metadata("design:paramtypes",[])],SocialFlowStepModel.prototype,"flowError",null),__decorate([computed,__metadata("design:type",Object),__metadata("design:paramtypes",[])],SocialFlowStepModel.prototype,"flowErrorAlert",null),__decorate([computed,__metadata("design:type",Object),__metadata("design:paramtypes",[])],SocialFlowStepModel.prototype,"flowErrorNotice",null),__decorate([computed,__metadata("design:type",Object),__metadata("design:paramtypes",[])],SocialFlowStepModel.prototype,"isLoading",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,String]),__metadata("design:returntype",void 0)],SocialFlowStepModel.prototype,"setPayloadFromServer",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[H.Error.AuthCommonError]),__metadata("design:returntype",void 0)],SocialFlowStepModel.prototype,"setFlowError",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SocialFlowStepModel.prototype,"resetFlowError",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Array)],SocialFlowStepModel.prototype,"validateFlow",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Array]),__metadata("design:returntype",void 0)],SocialFlowStepModel.prototype,"resetProviders",null),SocialFlowStepModel}(),rq=function(){function SignUpStepModel(e,t,r){this.termsModel=new rA(r.isGDPR,r.isExplicitToSAgreement,r.hasBusinessToSAgreement),this.emailFlowModel=new rR(e,t,this.termsModel,r.initialEmail,r.signupEmailInputLabel,r.customEmailValidation,r.initialEmailDisabled,r.restrictedDomains,r.showLastName),this.socialFlowModel=new rj("SIGNUP",r.socialConfig,r.disabledSocialProviders,this.termsModel),this.reactionDisposers=this.setupReactions(this.emailFlowModel,this.socialFlowModel)}return SignUpStepModel.prototype.destruct=function(){this.reactionDisposers&&this.reactionDisposers.forEach(function(e){return e()}),this.emailFlowModel.destruct(),this.socialFlowModel.destruct()},Object.defineProperty(SignUpStepModel.prototype,"emailFlowSubmitButtonStatus",{get:function(){return this.socialFlowModel.payload.isLoading()||this.emailFlowModel.isUseEmailFlowError?L.Disabled:this.emailFlowModel.payload.isLoading()?L.Loading:L.Active},enumerable:!1,configurable:!0}),SignUpStepModel.prototype.setCaptchaToken=function(e){this.cachedCaptchaToken=e},SignUpStepModel.prototype.setEmailVerificationExperiment=function(e){this.emailFlowModel.setEmailVerificationExperiment(e)},SignUpStepModel.prototype.getEmailFlowData=function(){return __assign$2(__assign$2({},this.emailFlowModel.getFlowData()),{captchaToken:this.cachedCaptchaToken})},SignUpStepModel.prototype.getSocialFlowStartData=function(e,t){return __assign$2({provider:e,isReRequestPermissions:t},this.termsModel.getData())},SignUpStepModel.prototype.setTermsData=function(e){this.termsModel.setData(e)},SignUpStepModel.prototype.setPayload=function(e,t){H.isAuthEmailContext(t)?this.emailFlowModel.setPayloadFromServer(e):this.socialFlowModel.setPayloadFromServer(e,t.socialType)},SignUpStepModel.prototype.validateEmailFlow=function(){return this.socialFlowModel.resetFlowError(),this.emailFlowModel.validateFlow()},SignUpStepModel.prototype.validateSocialFlow=function(){return this.emailFlowModel.resetFlowError(),this.socialFlowModel.validateFlow()},SignUpStepModel.prototype.setupReactions=function(e,t){var r=[];return r.push(reaction(function(){return e.payload},function(e){!t.isEnabled&&e.isError()&&H.Error.errCodeEqualsTo(e.error.errCode,H.Error.ApiErrorCode.UseSocial,H.Error.ApiErrorCode.UseApple,H.Error.ApiErrorCode.UseFacebook,H.Error.ApiErrorCode.UseGoogle)&&t.resetProviders([])})),r},__decorate([computed,__metadata("design:type",String),__metadata("design:paramtypes",[])],SignUpStepModel.prototype,"emailFlowSubmitButtonStatus",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],SignUpStepModel.prototype,"setCaptchaToken",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SignUpStepModel.prototype,"setEmailVerificationExperiment",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SignUpStepModel.prototype,"setTermsData",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",void 0)],SignUpStepModel.prototype,"setPayload",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SignUpStepModel.prototype,"validateEmailFlow",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Array)],SignUpStepModel.prototype,"validateSocialFlow",null),SignUpStepModel}(),removeEmptyKeys=function(e){return void 0===e&&(e={}),Object.keys(e).reduce(function(t,r){return null!=e[r]&&(t[r]=e[r]),t},{})},r$=function(){function SignInEmailFlowStepModel(e,t,r,n,o,a){this.payload=new rb.Empty,this.isInitialStep=!0,this.isAccountExist=!0,this.emailModel=new rg(e,t,r,n,o,a),this.passwordModel=new rP(e,Y.Basic),this.reactionDisposers=[this.setupReactions(this.emailModel)],t&&this.validateInitialEmail()}return SignInEmailFlowStepModel.prototype.destruct=function(){this.reactionDisposers&&this.reactionDisposers.forEach(function(e){return e()})},SignInEmailFlowStepModel.prototype.validateInitialEmail=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.emailModel.onBlur()];case 1:return e.sent(),this.emailModel.isValid&&this.nextStep(),[2]}})})},Object.defineProperty(SignInEmailFlowStepModel.prototype,"flowError",{get:function(){if(this.payload.isError())return this.payload.error},enumerable:!1,configurable:!0}),Object.defineProperty(SignInEmailFlowStepModel.prototype,"hasEmailValue",{get:function(){return!!this.emailModel.value.trim()},enumerable:!1,configurable:!0}),SignInEmailFlowStepModel.prototype.getCheckEmailData=function(){return{email:this.emailModel.value.trim()}},SignInEmailFlowStepModel.prototype.getSubmitData=function(e){return{email:this.emailModel.value.trim(),password:this.passwordModel.value.trim(),captchaToken:e}},SignInEmailFlowStepModel.prototype.getFlowData=function(e){return this.isInitialStep?this.getCheckEmailData():this.getSubmitData(e)},SignInEmailFlowStepModel.prototype.setEmail=function(e){this.emailModel.onChange(e)},SignInEmailFlowStepModel.prototype.setPayloadFromServer=function(e){this.isInitialStep&&e.isValue()&&this.nextStep(),this.setPayload(e)},SignInEmailFlowStepModel.prototype.setPayload=function(e){this.payload=e},SignInEmailFlowStepModel.prototype.setFlowError=function(e){this.setPayload(new rb.Error(e))},SignInEmailFlowStepModel.prototype.resetFlowError=function(){this.setPayload(new rb.Empty)},SignInEmailFlowStepModel.prototype.resetStep=function(){this.isInitialStep=!0,this.isAccountExist=!0},SignInEmailFlowStepModel.prototype.nextStep=function(){this.isInitialStep=!1},SignInEmailFlowStepModel.prototype.validateFlow=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.emailModel.validate()];case 1:if(e=(n=__read$2.apply(void 0,[a.sent(),2]))[0],t=n[1],this.isInitialStep)return[2,[e,{email:t}]];return r=(o=__read$2(this.passwordModel.validate(),2))[0],[2,[e&&r,{email:t,password:o[1]}]]}})})},SignInEmailFlowStepModel.prototype.setupReactions=function(e){var t=this;return reaction(function(){return e.value},function(){t.flowError&&H.Error.errCodeEqualsTo(t.flowError.errCode,H.Error.ApiErrorCode.UseEmail,H.Error.ApiErrorCode.UseGoogle,H.Error.ApiErrorCode.UseFacebook,H.Error.ApiErrorCode.UseApple,H.Error.ApiErrorCode.UseSocial)&&t.resetFlowError(),t.resetStep()})},__decorate([observable.ref,__metadata("design:type",Object)],SignInEmailFlowStepModel.prototype,"payload",void 0),__decorate([observable,__metadata("design:type",Object)],SignInEmailFlowStepModel.prototype,"isInitialStep",void 0),__decorate([observable,__metadata("design:type",Object)],SignInEmailFlowStepModel.prototype,"isAccountExist",void 0),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SignInEmailFlowStepModel.prototype,"validateInitialEmail",null),__decorate([computed,__metadata("design:type",Object),__metadata("design:paramtypes",[])],SignInEmailFlowStepModel.prototype,"flowError",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],SignInEmailFlowStepModel.prototype,"hasEmailValue",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],SignInEmailFlowStepModel.prototype,"setEmail",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SignInEmailFlowStepModel.prototype,"setPayloadFromServer",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SignInEmailFlowStepModel.prototype,"setPayload",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[H.Error.AuthCommonError]),__metadata("design:returntype",void 0)],SignInEmailFlowStepModel.prototype,"setFlowError",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SignInEmailFlowStepModel.prototype,"resetFlowError",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SignInEmailFlowStepModel.prototype,"resetStep",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SignInEmailFlowStepModel.prototype,"nextStep",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SignInEmailFlowStepModel.prototype,"validateFlow",null),SignInEmailFlowStepModel}(),rH=function(){function SignInStepModel(e,t){this.emailFlowModel=new r$(e,t.initialEmail,t.signinEmailInputLabel,t.customEmailValidation,t.initialEmailDisabled,t.restrictedDomains),this.socialFlowModel=new rj("SIGNIN",t.socialConfig,t.disabledSocialProviders),this.secureLogin=t.secureLogin,this.reactionDisposers=this.setupReactions(this.emailFlowModel,this.socialFlowModel),this.showFacebookLoginDisabledModal=!1}return SignInStepModel.prototype.destruct=function(){this.emailFlowModel.destruct(),this.socialFlowModel.destruct(),this.reactionDisposers&&this.reactionDisposers.forEach(function(e){return e()})},SignInStepModel.prototype.setShowFacebookLoginDisabledModal=function(e){this.showFacebookLoginDisabledModal=e},Object.defineProperty(SignInStepModel.prototype,"emailFlowSubmitButtonStatus",{get:function(){return this.socialFlowModel.payload.isLoading()?L.Disabled:this.emailFlowModel.payload.isLoading()?L.Loading:L.Active},enumerable:!1,configurable:!0}),Object.defineProperty(SignInStepModel.prototype,"isEmailFlowInitialStep",{get:function(){return this.emailFlowModel.isInitialStep},enumerable:!1,configurable:!0}),SignInStepModel.prototype.getEmailFlowCheckEmailData=function(){return this.emailFlowModel.getCheckEmailData()},SignInStepModel.prototype.getEmailFlowSubmitData=function(){return __assign$2(__assign$2({},this.emailFlowModel.getSubmitData(this.cachedCaptchaToken)),{secureLogin:this.secureLogin})},SignInStepModel.prototype.getSocialFlowStartData=function(e,t){return{isReRequestPermissions:t,provider:e}},SignInStepModel.prototype.setPayload=function(e,t){var r=this;if(e.isError()&&H.Error.errCodeEqualsTo(e.error.errCode,H.Error.ApiErrorCode.UseEmail)){var n=e.error.nestedError;transaction(function(){var e;r.emailFlowModel.emailModel.onChange(null!==(e=null==n?void 0:n.email)&&void 0!==e?e:"")}),transaction(function(){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!(null==n?void 0:n.email))return[3,2];return[4,this.emailFlowModel.validateFlow()];case 1:__read$2.apply(void 0,[e.sent(),1])[0]&&this.emailFlowModel.nextStep(),e.label=2;case 2:return[2]}})})})}transaction(function(){H.isAuthEmailContext(t)?r.emailFlowModel.setPayloadFromServer(e):r.socialFlowModel.setPayloadFromServer(e,t.socialType)})},SignInStepModel.prototype.validateEmailFlow=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.socialFlowModel.resetFlowError(),[4,this.emailFlowModel.validateFlow()];case 1:return[2,e.sent()]}})})},SignInStepModel.prototype.validateSocialFlow=function(){return this.emailFlowModel.resetFlowError(),this.socialFlowModel.validateFlow()},SignInStepModel.prototype.setCaptchaToken=function(e){this.cachedCaptchaToken=e},SignInStepModel.prototype.setupReactions=function(e,t){var r=[];return r.push(reaction(function(){return e.emailModel.value},function(){t.flowError&&t.resetFlowError()})),r.push(reaction(function(){return e.payload},function(e){e.isError()&&H.Error.errCodeEqualsTo(e.error.errCode,H.Error.ApiErrorCode.UseSocial,H.Error.ApiErrorCode.UseApple,H.Error.ApiErrorCode.UseFacebook,H.Error.ApiErrorCode.UseGoogle)&&t.resetProviders([])})),r},__decorate([observable,__metadata("design:type",Boolean)],SignInStepModel.prototype,"showFacebookLoginDisabledModal",void 0),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Boolean]),__metadata("design:returntype",void 0)],SignInStepModel.prototype,"setShowFacebookLoginDisabledModal",null),__decorate([computed,__metadata("design:type",String),__metadata("design:paramtypes",[])],SignInStepModel.prototype,"emailFlowSubmitButtonStatus",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],SignInStepModel.prototype,"isEmailFlowInitialStep",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SignInStepModel.prototype,"validateEmailFlow",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Array)],SignInStepModel.prototype,"validateSocialFlow",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],SignInStepModel.prototype,"setCaptchaToken",null),SignInStepModel}(),rW={required:{status:X.Required,message:"Required"},invalid:{status:X.Invalid,message:"Invalid"},valid:{status:X.Valid}},rz=function(){function TextModel(e){void 0===e&&(e=""),this.value="",this.validity=rW.valid,this.value=e}return TextModel.prototype.validateValue=function(e){return(e=e.trim()).length<1?rW.required:rW.valid},Object.defineProperty(TextModel.prototype,"isValid",{get:function(){return this.validity.status===X.Valid},enumerable:!1,configurable:!0}),TextModel.prototype.validate=function(){return this.validity=this.validateValue(this.value),[this.isValid,this.validity.status]},TextModel.prototype.setValue=function(e){this.value=e,this.validity=rW.valid},TextModel.prototype.onBlur=function(){this.validate()},__decorate([observable,__metadata("design:type",Object)],TextModel.prototype,"value",void 0),__decorate([observable.ref,__metadata("design:type",Object)],TextModel.prototype,"validity",void 0),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],TextModel.prototype,"isValid",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Array)],TextModel.prototype,"validate",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],TextModel.prototype,"setValue",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],TextModel.prototype,"onBlur",null),TextModel}(),rK=function(){function SupportRequestStepModel(e){this.email=e,this.payload=new rb.Empty,this.textModel=new rz}return SupportRequestStepModel.prototype.getData=function(){return{email:this.email,comment:this.textModel.value.trim()}},SupportRequestStepModel.prototype.setPayload=function(e){this.payload=e},SupportRequestStepModel.prototype.validate=function(){return this.textModel.validate()},__decorate([observable.ref,__metadata("design:type",Object)],SupportRequestStepModel.prototype,"payload",void 0),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SupportRequestStepModel.prototype,"setPayload",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Array)],SupportRequestStepModel.prototype,"validate",null),SupportRequestStepModel}();(E=ee||(ee={})).Code="Code",E.OtherMethods="OtherMethods";var rZ=/^[0-9]{6}$/,rX=/^[A-Za-z0-9]{8}$/,rY=function(){function MfaStepModel(e,t){this.signInModel=e,this.onCallTrigger=t,this.currentView=ee.Code,this.intervalBetweenSMS=3e4,this.context={modes:[H.MfaSettings.Mode.phone]},this.disableResend=!1,this.isSaveBrowser=!0,this.code="",this.reactionDisposers=this.setupReactions()}return MfaStepModel.prototype.destruct=function(){this.clearTimer(),this.reactionDisposers&&this.reactionDisposers.forEach(function(e){return e()})},MfaStepModel.prototype.clearTimer=function(){this.timerId&&window.clearTimeout(this.timerId)},Object.defineProperty(MfaStepModel.prototype,"email",{get:function(){return this.signInModel.emailFlowModel.emailModel.value||"user"},enumerable:!1,configurable:!0}),Object.defineProperty(MfaStepModel.prototype,"enabledModes",{get:function(){return this.context.modes},enumerable:!1,configurable:!0}),Object.defineProperty(MfaStepModel.prototype,"isResendableCode",{get:function(){return this.currentMode===H.MfaSettings.Mode.phone||this.currentMode===H.MfaSettings.Mode.email},enumerable:!1,configurable:!0}),Object.defineProperty(MfaStepModel.prototype,"phoneNumber",{get:function(){return"(•••) •••-••".concat(this.context.lastChars||"••")},enumerable:!1,configurable:!0}),Object.defineProperty(MfaStepModel.prototype,"codeSubmitButtonStatus",{get:function(){return this.signInModel.emailFlowModel.payload.isLoading()?L.Loading:L.Active},enumerable:!1,configurable:!0}),Object.defineProperty(MfaStepModel.prototype,"disableSms",{get:function(){var e=this.signInModel.emailFlowModel.flowError;return!!e&&H.Error.errCodeEqualsTo(e.errCode,H.Error.ApiErrorCode.RateLimited)},enumerable:!1,configurable:!0}),Object.defineProperty(MfaStepModel.prototype,"mfaModesEnabled",{get:function(){return new Set(this.enabledModes)},enumerable:!1,configurable:!0}),MfaStepModel.prototype.setContext=function(e){this.context=e,this.currentMode||(this.currentMode=e.modes[0]||H.MfaSettings.Mode.phone)},MfaStepModel.prototype.setCode=function(e){this.code=e||""},MfaStepModel.prototype.setDisableResend=function(e){this.disableResend=e},MfaStepModel.prototype.setView=function(e){this.setCode(),this.resetErrorMessage(),this.currentView=e},MfaStepModel.prototype.setIsSaveBrowser=function(e){this.isSaveBrowser=e},MfaStepModel.prototype.switchMode=function(e){e===H.MfaSettings.Mode.phone&&this.requestCode(e),this.setView(ee.Code),this.currentMode=e},MfaStepModel.prototype.resendCode=function(e){!this.disableResend&&this.currentMode&&(this.requestCode(this.currentMode),this.startCountdown(e))},MfaStepModel.prototype.startCountdown=function(e){var t=this;this.setDisableResend(!0),(null==e?void 0:e.current)&&e.current.startAnimation(),this.timerId=window.setTimeout(function(){return t.setDisableResend(!1)},this.intervalBetweenSMS)},MfaStepModel.prototype.onSubmitCode=function(){this.validate()?(this.resetErrorMessage(),this.submitCode(this.currentMode,this.code,this.isSaveBrowser)):this.setErrorMessage()},MfaStepModel.prototype.setErrorMessage=function(e){void 0===e&&(e="Invalid code. Please try again."),this.errorMsg=e},MfaStepModel.prototype.resetErrorMessage=function(){this.errorMsg=void 0},MfaStepModel.prototype.validate=function(){return!!this.currentMode&&(this.currentMode===H.MfaSettings.Mode.backup&&rX.test(this.code)||this.currentMode!==H.MfaSettings.Mode.backup&&rZ.test(this.code))},MfaStepModel.prototype.requestCode=function(e){this.onCallTrigger(createTrigger($.MfaSubmit,__assign$2(__assign$2({},this.signInModel.getEmailFlowSubmitData()),{mode:e})))},MfaStepModel.prototype.submitCode=function(e,t,r){this.onCallTrigger(createTrigger($.MfaSubmit,__assign$2(__assign$2({},this.signInModel.getEmailFlowSubmitData()),{mode:e,code:t,rememberDevice:r})))},MfaStepModel.prototype.setupReactions=function(){var e=this,t=[];return t.push(reaction(function(){return e.signInModel.emailFlowModel.flowError},function(t){t&&e.setErrorMessage()})),t.push(reaction(function(){return e.code},function(){e.errorMsg&&e.resetErrorMessage()})),t},__decorate([observable,__metadata("design:type",String)],MfaStepModel.prototype,"currentView",void 0),__decorate([observable,__metadata("design:type",Object)],MfaStepModel.prototype,"currentMode",void 0),__decorate([observable,__metadata("design:type",Object)],MfaStepModel.prototype,"errorMsg",void 0),__decorate([observable,__metadata("design:type",Object)],MfaStepModel.prototype,"intervalBetweenSMS",void 0),__decorate([observable.ref,__metadata("design:type",Object)],MfaStepModel.prototype,"context",void 0),__decorate([observable,__metadata("design:type",Object)],MfaStepModel.prototype,"disableResend",void 0),__decorate([observable,__metadata("design:type",Object)],MfaStepModel.prototype,"isSaveBrowser",void 0),__decorate([observable,__metadata("design:type",Object)],MfaStepModel.prototype,"code",void 0),__decorate([computed,__metadata("design:type",String),__metadata("design:paramtypes",[])],MfaStepModel.prototype,"email",null),__decorate([computed,__metadata("design:type",Array),__metadata("design:paramtypes",[])],MfaStepModel.prototype,"enabledModes",null),__decorate([computed,__metadata("design:type",Object),__metadata("design:paramtypes",[])],MfaStepModel.prototype,"isResendableCode",null),__decorate([computed,__metadata("design:type",String),__metadata("design:paramtypes",[])],MfaStepModel.prototype,"phoneNumber",null),__decorate([computed,__metadata("design:type",String),__metadata("design:paramtypes",[])],MfaStepModel.prototype,"codeSubmitButtonStatus",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],MfaStepModel.prototype,"disableSms",null),__decorate([computed,__metadata("design:type",Set),__metadata("design:paramtypes",[])],MfaStepModel.prototype,"mfaModesEnabled",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"setContext",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"setCode",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Boolean]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"setDisableResend",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"setView",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Boolean]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"setIsSaveBrowser",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"switchMode",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"resendCode",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"startCountdown",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"onSubmitCode",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"setErrorMessage",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],MfaStepModel.prototype,"resetErrorMessage",null),MfaStepModel}(),rJ=function(){function SignUpViaSignInStepModel(e,t){this.socialProviderType=H.Social.Type.Google,this.termsModel=new rA(t.isGDPR,t.isExplicitToSAgreement,t.hasBusinessToSAgreement),this.socialFlowModel=new rj("SIGNUP",t.socialConfig,t.disabledSocialProviders,this.termsModel)}return SignUpViaSignInStepModel.prototype.destruct=function(){this.socialFlowModel.destruct()},SignUpViaSignInStepModel.prototype.getSocialFlowStartData=function(e,t){return __assign$2({provider:e,isReRequestPermissions:t},this.termsModel.getData())},SignUpViaSignInStepModel.prototype.getSocialProvider=function(){return this.socialFlowModel.getProviderByType(this.socialProviderType)},SignUpViaSignInStepModel.prototype.setTermsData=function(e){this.termsModel.setData(e)},SignUpViaSignInStepModel.prototype.setSocialProviderType=function(e){this.socialProviderType=e},SignUpViaSignInStepModel.prototype.validateSocialFlow=function(){return this.socialFlowModel.validateFlow()},__decorate([observable,__metadata("design:type",String)],SignUpViaSignInStepModel.prototype,"socialProviderType",void 0),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SignUpViaSignInStepModel.prototype,"setTermsData",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],SignUpViaSignInStepModel.prototype,"setSocialProviderType",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Array)],SignUpViaSignInStepModel.prototype,"validateSocialFlow",null),SignUpViaSignInStepModel}();(b=et||(et={})).ResendVerification="ResendVerification",b.ContactSupport="ContactSupport";var rQ=function(){function ResendVerificationViewModel(e,t){this.signUpStepModel=e,this.onCallTrigger=t,this.resendVerificationPayload=new rb.Empty,this.currentResendVerificationView=et.ResendVerification}return Object.defineProperty(ResendVerificationViewModel.prototype,"resendVerificationState",{get:function(){return this.resendVerificationPayload.isEmpty()?"visible":this.resendVerificationPayload.isLoading()?"loading":"hidden"},enumerable:!1,configurable:!0}),ResendVerificationViewModel.prototype.setPayload=function(e,t){this.resendVerificationPayload=e},ResendVerificationViewModel.prototype.onShowContactSupport=function(){this.currentResendVerificationView=et.ContactSupport},ResendVerificationViewModel.prototype.onResendVerificationClick=function(){var e=__assign$2({},this.signUpStepModel.getEmailFlowData());e.emailVerification=!0,e.isResendCode=!0,"visible"===this.resendVerificationState&&this.onCallTrigger(createTrigger($.SignUpEmailVerificationSubmit,e))},__decorate([observable.ref,__metadata("design:type",Object)],ResendVerificationViewModel.prototype,"resendVerificationPayload",void 0),__decorate([observable,__metadata("design:type",String)],ResendVerificationViewModel.prototype,"currentResendVerificationView",void 0),__decorate([computed,__metadata("design:type",String),__metadata("design:paramtypes",[])],ResendVerificationViewModel.prototype,"resendVerificationState",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",void 0)],ResendVerificationViewModel.prototype,"setPayload",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],ResendVerificationViewModel.prototype,"onShowContactSupport",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],ResendVerificationViewModel.prototype,"onResendVerificationClick",null),ResendVerificationViewModel}(),r0=/^[0-9]{6}$/;(er||(er={})).Code="code";var r1=function(e){function SignUpEmailVerficationStepModel(t,r,n,o){var a=e.call(this,t,r,n,o)||this;return a.signUpModel=t,a.onCallTrigger=r,a.trackSubmitSignUp=n,a.countSignUpWithCodeSubmit=0,a.signupWithCodePayload=new rb.Empty,a.shouldClearCodeInput=!1,a.showTryAgainSubmit=!1,a.code="",a.resendCodeToast=!1,a.reactionDisposers=a.setupReactions(),a}return __extends$1(SignUpEmailVerficationStepModel,e),SignUpEmailVerficationStepModel.prototype.destruct=function(){this.reactionDisposers&&this.reactionDisposers.forEach(function(e){return e()})},Object.defineProperty(SignUpEmailVerficationStepModel.prototype,"codeSubmitButtonStatus",{get:function(){return this.signupWithCodePayload.isLoading()?L.Loading:L.Active},enumerable:!1,configurable:!0}),Object.defineProperty(SignUpEmailVerficationStepModel.prototype,"canSubmitSignUpWithCode",{get:function(){return!this.signupWithCodePayload.isLoading()&&!this.resendVerificationViewModel.resendVerificationPayload.isLoading()},enumerable:!1,configurable:!0}),Object.defineProperty(SignUpEmailVerficationStepModel.prototype,"canSubmitSocial",{get:function(){return!this.signupWithCodePayload.isLoading()},enumerable:!1,configurable:!0}),SignUpEmailVerficationStepModel.prototype.setPayload=function(e,t){t.isSignUpEmailVerificationResendCodeRequest?this.resendVerificationViewModel.setPayload(e,t):t.hasSignUpEmailVerificationCode&&(this.signupWithCodePayload=e)},SignUpEmailVerficationStepModel.prototype.onSetCode=function(e){void 0===e&&(e=""),this.resetErrorMessage(),this.code=e,6===this.code.length&&0===this.countSignUpWithCodeSubmit&&this.onSubmitCode()},SignUpEmailVerficationStepModel.prototype.onSetResendCodeToast=function(e){this.resendCodeToast=e},SignUpEmailVerficationStepModel.prototype.onSubmitCode=function(){if(this.canSubmitSignUpWithCode){this.countSignUpWithCodeSubmit++;var e,t,r=(e=__read$2(this.validate(),2))[0],n=e[1];if(null===(t=this.trackSubmitSignUp)||void 0===t||t.call(this,{action:"SIGNUP",email:"true"},G.SignUpEmailVerification,n,void 0,this.countSignUpWithCodeSubmit),!r){this.setErrorMessage("Incomplete code. Please enter your 6-digit verification code.");return}this.onCallTrigger(createTrigger($.SignUpEmailVerificationSubmit,__assign$2(__assign$2({},this.signUpModel.getEmailFlowData()),{emailVerificationCode:this.code})))}},SignUpEmailVerficationStepModel.prototype.setErrorMessage=function(e){this.errorMsg=e},SignUpEmailVerficationStepModel.prototype.resetErrorMessage=function(){this.errorMsg=void 0},SignUpEmailVerficationStepModel.prototype.validate=function(){var e=r0.test(this.code);return[e,{code:e?X.Valid:X.Invalid}]},SignUpEmailVerficationStepModel.prototype.setupReactions=function(){var e=this,t=[];return t.push(reaction(function(){return e.signupWithCodePayload},function(t){t.isError()&&(H.Error.errCodeEqualsTo(t.error.errCode,H.Error.ApiErrorCode.EmailVerificationCode)?(t.error.message,e.setErrorMessage("Invalid code. Please try again.")):e.setErrorMessage("Something went wrong. Please try again."),1===e.countSignUpWithCodeSubmit&&(e.code="",e.shouldClearCodeInput=!0,e.showTryAgainSubmit=!0))})),t.push(reaction(function(){return e.resendVerificationViewModel.resendVerificationPayload},function(t){t.isError()&&H.Error.errCodeEqualsTo(t.error.errCode,H.Error.ApiErrorCode.EmailVerificationCode)&&(e.resendCodeToast=!0,setTimeout(function(){e.resendCodeToast=!1},3e3))})),t},__decorate([observable.ref,__metadata("design:type",Object)],SignUpEmailVerficationStepModel.prototype,"signupWithCodePayload",void 0),__decorate([observable,__metadata("design:type",Object)],SignUpEmailVerficationStepModel.prototype,"shouldClearCodeInput",void 0),__decorate([observable,__metadata("design:type",Object)],SignUpEmailVerficationStepModel.prototype,"showTryAgainSubmit",void 0),__decorate([observable,__metadata("design:type",Object)],SignUpEmailVerficationStepModel.prototype,"errorMsg",void 0),__decorate([observable,__metadata("design:type",Object)],SignUpEmailVerficationStepModel.prototype,"code",void 0),__decorate([observable,__metadata("design:type",Object)],SignUpEmailVerficationStepModel.prototype,"resendCodeToast",void 0),__decorate([computed,__metadata("design:type",String),__metadata("design:paramtypes",[])],SignUpEmailVerficationStepModel.prototype,"codeSubmitButtonStatus",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],SignUpEmailVerficationStepModel.prototype,"canSubmitSignUpWithCode",null),__decorate([computed,__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],SignUpEmailVerficationStepModel.prototype,"canSubmitSocial",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",void 0)],SignUpEmailVerficationStepModel.prototype,"setPayload",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],SignUpEmailVerficationStepModel.prototype,"onSetCode",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Boolean]),__metadata("design:returntype",void 0)],SignUpEmailVerficationStepModel.prototype,"onSetResendCodeToast",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SignUpEmailVerficationStepModel.prototype,"onSubmitCode",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],SignUpEmailVerficationStepModel.prototype,"setErrorMessage",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SignUpEmailVerficationStepModel.prototype,"resetErrorMessage",null),SignUpEmailVerficationStepModel}(function(){function SignUpEmailVerificationBaseViewModel(e,t,r,n){this.signUpStepModel=e,this.onCallTriggerFn=t,this.trackSubmitButton=r,this.trackBackButton=n,this.resendVerificationViewModel=new rQ(this.signUpStepModel,this.onCallTriggerFn),this.signUpStepModel.socialFlowModel.resetFlowError()}return Object.defineProperty(SignUpEmailVerificationBaseViewModel.prototype,"email",{get:function(){return this.signUpStepModel.getEmailFlowData().email},enumerable:!1,configurable:!0}),Object.defineProperty(SignUpEmailVerificationBaseViewModel.prototype,"socialFlowModel",{get:function(){return this.signUpStepModel.socialFlowModel},enumerable:!1,configurable:!0}),SignUpEmailVerificationBaseViewModel.prototype.getSocialFlowStartData=function(e){return this.signUpStepModel.getSocialFlowStartData(e)},SignUpEmailVerificationBaseViewModel.prototype.handleBackButtonClick=function(){var e;null===(e=this.trackBackButton)||void 0===e||e.call(this),this.onCallTriggerFn(q.ToSignUp)},SignUpEmailVerificationBaseViewModel.prototype.handleSocialSubmit=function(e,t){var r,n,o=(r=__read$2(this.socialFlowModel.validateFlow(),2))[0],a=r[1];null===(n=this.trackSubmitButton)||void 0===n||n.call(this,{action:"SIGNUP",socialType:e.type},t,a),o&&this.onCallTriggerFn(createTrigger($.SignUpSocialFlowStart,this.getSocialFlowStartData(e)))},__decorate([computed,__metadata("design:type",String),__metadata("design:paramtypes",[])],SignUpEmailVerificationBaseViewModel.prototype,"email",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[rL]),__metadata("design:returntype",Object)],SignUpEmailVerificationBaseViewModel.prototype,"getSocialFlowStartData",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SignUpEmailVerificationBaseViewModel.prototype,"handleBackButtonClick",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[rL,String]),__metadata("design:returntype",void 0)],SignUpEmailVerificationBaseViewModel.prototype,"handleSocialSubmit",null),SignUpEmailVerificationBaseViewModel}()),getTopWindow=function(){var e;return null!==(e=window.top)&&void 0!==e?e:window.parent},r2=new Set([G.SignInInit,G.SignInWithPassword,G.SignInEmailPermissionPopup,G.Captcha,G.MFA,G.ExplicitTermsOfServicePopup,G.SupportRequest,G.WelcomeBack,G.ContinueSSO]),r3=new Set([G.SecureSignIn,G.SignInEmailPermissionPopup,G.Captcha,G.MFA,G.ExplicitTermsOfServicePopup,G.SupportRequest]),r5=new Set([G.MFA]),r4=new Set([G.SignUpEmailVerification]),r6=new Set([G.NewAccount,G.Captcha,G.SignUpEmailVerification,G.SignUpEmailPermissionPopup]);function extractErrors(e){return Object.entries(e).filter(function(e){return __read$2(e,2)[1]!==X.Valid}).map(function(e){var t=__read$2(e,2);return{fieldName:t[0],errorMessage:t[1]}})}var r7=function(){function AuthModel(e,t,r,n,o,a,i){var s=this;this.api=e,this.captchaEnterprise=t,this.socialService=r,this.ssoService=n,this.createMfaSupportTicket=o,this.track=a,this.options=i,this.onTrackFormShow=function(e){var t,r;null===(r=(t=s.track).trackFormShow)||void 0===r||r.call(t,e)},this.onAuthSubmitClick=function(e,t,r,n,o){var a,i;try{null===(i=(a=s.track).trackSubmitButtonClick)||void 0===i||i.call(a,e,t,extractErrors(r),n,o)}catch(e){}};var l=i.defaultView||G.SignInInit;this.validateNextView(l),this.currentView=l,this.captchaActionType=this.options.defaultView===G.NewAccount?"SIGNUP":"SIGNIN",this._initialFlowError=i.initialError,this.socialAccountLinkingData={token:null,email:null,provider:null},this.mfaSocialAccountLinkingData={action:"SIGNUP",modes:[],lastDigits:void 0,token:void 0,provider:void 0},this.authInfoData=new rb.Empty,this.welcomeBackExperimentTreatmentGroup=void 0}return Object.defineProperty(AuthModel.prototype,"resetPasswordViewModel",{get:function(){return this._resetPasswordViewModel||(this._resetPasswordViewModel=new rw(this.api)),this._resetPasswordViewModel},enumerable:!1,configurable:!0}),Object.defineProperty(AuthModel.prototype,"signUpViewModel",{get:function(){return this._signUpViewModel||(this._signUpViewModel=new rq(this.api,this.captchaEnterprise,this.options),this.setInitialFlowError(this._signUpViewModel)),this._signUpViewModel},enumerable:!1,configurable:!0}),Object.defineProperty(AuthModel.prototype,"signUpViaSignInViewModel",{get:function(){return this._signUpViaSignInViewModel||(this._signUpViaSignInViewModel=new rJ(this.api,this.options)),this._signUpViaSignInViewModel},enumerable:!1,configurable:!0}),Object.defineProperty(AuthModel.prototype,"signInViewModel",{get:function(){var e,t=this;if(!this._signInViewModel){var r=void 0;r=this.isSecureSignIn?__assign$2(__assign$2({},this.options),{secureLogin:!0,initialEmail:null===(e=this.currentUser)||void 0===e?void 0:e.email,disabledSocialProviders:rG.validAuthSocialTypes.filter(function(e){var r;return!(null===(r=t.currentUser)||void 0===r?void 0:r.loginProviders.includes(e.toUpperCase()))})}):this.options,this._signInViewModel=new rH(this.api,r),this.setInitialFlowError(this._signInViewModel)}return this._signInViewModel},enumerable:!1,configurable:!0}),Object.defineProperty(AuthModel.prototype,"supportRequestViewModel",{get:function(){return this._supportRequestViewModel||(this._supportRequestViewModel=new rK(this.signInViewModel.emailFlowModel.emailModel.value)),this._supportRequestViewModel},enumerable:!1,configurable:!0}),Object.defineProperty(AuthModel.prototype,"mfaViewModel",{get:function(){return this._mfaViewModel||(this._mfaViewModel=new rY(this.signInViewModel,this.onCallTrigger)),this._mfaViewModel},enumerable:!1,configurable:!0}),Object.defineProperty(AuthModel.prototype,"emailVerificationViewModel",{get:function(){var e;return this._emailVerificationViewModel||(this._emailVerificationViewModel=new r1(this.signUpViewModel,this.onCallTrigger,this.onAuthSubmitClick,null===(e=this.track.signupEmailVerificationTracking)||void 0===e?void 0:e.trackBackButtonClick)),this._emailVerificationViewModel},enumerable:!1,configurable:!0}),Object.defineProperty(AuthModel.prototype,"currentUser",{get:function(){var e,t;return null===(t=(e=this.options).getCurrentUser)||void 0===t?void 0:t.call(e)},enumerable:!1,configurable:!0}),Object.defineProperty(AuthModel.prototype,"defaultSocialContext",{get:function(){return{action:this.currentView===G.NewAccount?"SIGNUP":"SIGNIN",socialType:H.Social.Type.Google}},enumerable:!1,configurable:!0}),Object.defineProperty(AuthModel.prototype,"isSecureSignIn",{get:function(){return!!(this.currentUser&&!this.currentUser.anonymous&&this.options.defaultView===G.SecureSignIn)},enumerable:!1,configurable:!0}),AuthModel.prototype.safeCaptchaExecute=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.captchaEnterprise.execute(rC)];case 1:return[2,e.sent()];case 2:return e.sent(),[3,3];case 3:return[2,void 0]}})})},AuthModel.prototype.setInitialFlowError=function(e){this._initialFlowError&&(e.setPayload(new rb.Error(this._initialFlowError),this.defaultSocialContext),this._initialFlowError=void 0)},AuthModel.prototype.setCaptchaActionType=function(e){this.captchaActionType=e},AuthModel.prototype.setCurrentView=function(e){var t,r,n,o,a;(this.isSecureSignIn&&r3.has(this.currentView)&&!r3.has(e)||!this.isSecureSignIn&&r2.has(this.currentView)&&!r2.has(e))&&(null===(t=this._signInViewModel)||void 0===t||t.destruct(),null===(r=this._signUpViaSignInViewModel)||void 0===r||r.destruct(),this._signInViewModel=void 0,this._signUpViaSignInViewModel=void 0,this._mfaViewModel=void 0,this._emailVerificationViewModel=void 0),r6.has(this.currentView)&&!r6.has(e)&&(null===(n=this._signUpViewModel)||void 0===n||n.destruct(),this._signUpViewModel=void 0),r4.has(this.currentView)&&!r4.has(e)&&(null===(o=this._emailVerificationViewModel)||void 0===o||o.destruct(),this._emailVerificationViewModel=void 0,this.signUpViewModel.emailFlowModel.setPayload(new rb.Empty)),r5.has(this.currentView)&&!r5.has(e)&&(null===(a=this._mfaViewModel)||void 0===a||a.destruct(),this._mfaViewModel=void 0),this.validateNextView(e),this.currentView=e},AuthModel.prototype.validateNextView=function(e){if(this.options.onFormRenderError){var t=void 0;e===G.SecureSignIn&&(!this.currentUser||this.currentUser.anonymous)&&(t=H.Error.FormRenderErrorCode.UserIsAnonymous),t&&this.options.onFormRenderError(t)}},AuthModel.prototype.onCallTrigger=function(e){if(e&&q[e]){if(e===q.ToSignIn){var t=this.signInViewModel.secureLogin?G.SecureSignIn:G.SignInInit;this.setCurrentView(t)}else this.setCurrentView(ti[e])}else switch(e.key){case $.ResetPasswordSubmit:this.processResetPasswordRequest(e.data);break;case $.SupportRequestSubmit:this.processSupportRequest(e.data);break;case $.SignUpEmailSubmit:this.processSignUpEmailRequest(e.data);break;case $.SignUpSocialFlowStart:this.processSignUpSocialStartRequest(e.data);break;case $.SignInCheckEmailSubmit:this.processSignInCheckEmailRequest(e.data,this.currentView);break;case $.SignInEmailFlowSubmit:this.processSignInEmailRequest(e.data,this.currentView);break;case $.SignInSocialFlowStart:this.processSignInSocialStartRequest(e.data);break;case $.CaptchaSubmit:this.processCaptchaRequest(e.data);break;case $.MfaSubmit:this.processMFARequest(e.data,this.currentView);break;case $.SignUpEmailVerificationSubmit:this.processSignUpEmailVerificationRequest(e.data);break;case $.SocialFlowContinue:this.processSocialContinueRequest(e.data);break;case $.SSOFlowContinue:this.processSSOContinueRequest(e.data)}},AuthModel.prototype.processSignUpEmailRequest=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:if(e.captchaToken)return[3,2];return[4,this.safeCaptchaExecute()];case 1:return r=i.sent(),[3,3];case 2:r=void 0,i.label=3;case 3:return t=r,n={action:"SIGNUP",email:e.email,useSignUpEmailVerification:!1,hasSignUpEmailVerificationCode:!1,isSignUpEmailVerificationResendCodeRequest:!1},o={isMarketingEmailsAllowed:e.isMarketingEmailsAllowed,isTermsOfServiceAccepted:e.isTermsOfServiceAccepted},null!=e&&null!=e.emailVerification&&(n.useSignUpEmailVerification=!!e.emailVerification,n.signUpEmailVerificationType=e.emailVerification?H.SignupEmailVerificationType.Code:void 0,n.hasSignUpEmailVerificationCode=!!e.emailVerificationCode,n.isSignUpEmailVerificationResendCodeRequest=!!e.isResendCode),a={groups:["newfunnel"],email_signup:{email:e.email,name:e.name,password:e.password,visibleCaptchaToken:e.captchaToken,captchaTokenV3:t,emailVerification:e.emailVerification,stateKey:e.stateKey,emailVerificationCode:e.emailVerificationCode,institutionInviteKey:this.options.initialInstitutionInviteKey}},[4,this.processSignUpCommonRequest(n,this.currentView,a,o)];case 4:return i.sent(),[2]}})})},AuthModel.prototype.processSignUpSocialStartRequest=function(e){var t={action:"SIGNUP",socialType:e.provider.type},r={isMarketingEmailsAllowed:e.isMarketingEmailsAllowed,isTermsOfServiceAccepted:e.isTermsOfServiceAccepted};this.signUpViewModel.setPayload(new rb.Loading,t),this.processSocialStartRequest(t,e.provider,e.isReRequestPermissions,r)},AuthModel.prototype.processSignUpSocialContinueRequest=function(e,t){var r,n,o;return __awaiter(this,void 0,void 0,function(){var a,i,s,l;return __generator(this,function(c){switch(c.label){case 0:if(this.signUpViewModel.socialFlowModel.resetProviders([]),a=this.signUpViewModel.socialFlowModel.getProviderByType(e.socialType),!(t.restoreError||!a))return[3,1];return i=H.Error.AuthCommonError.create(null!==(r=t.restoreError)&&void 0!==r?r:Error("Cannot find target social provider")),this.signUpViewModel.setPayload(new rb.Error(i),e),[3,3];case 1:return s=__assign$2({},null==a?void 0:a.getSignupConfig(t.requestData||{})),l=(null===(n=t.restoredData)||void 0===n?void 0:n.termsData)||{isMarketingEmailsAllowed:!1,isTermsOfServiceAccepted:!1},this.signUpViewModel.setTermsData(l),[4,this.processSignUpCommonRequest(e,this.currentView,s,l,null===(o=t.restoredData)||void 0===o?void 0:o.initFlowUIState.formKey)];case 2:c.sent(),c.label=3;case 3:return[2]}})})},AuthModel.prototype.isResendCodeSignUpRequest=function(e){return!!e.isSignUpEmailVerificationResendCodeRequest},AuthModel.prototype.setSignUpCommonRequestPayload=function(e,t){H.isAuthEmailContext(t)&&(t.hasSignUpEmailVerificationCode||this.isResendCodeSignUpRequest(t))?this.emailVerificationViewModel.setPayload(e,t):this.signUpViewModel.setPayload(e,t)},AuthModel.prototype.processSignUpCommonRequest=function(e,t,r,n,o){var a,i;return __awaiter(this,void 0,void 0,function(){var s,l,c,u,d,p,m,h=this;return __generator(this,function(g){switch(g.label){case 0:return g.trys.push([0,3,,4]),this.setSignUpCommonRequestPayload(new rb.Loading,e),this.onAuthAttempt(e,t,o,n),s=removeEmptyKeys(__assign$2(__assign$2({},null===(i=(a=this.options).getAssignedCustomFields)||void 0===i?void 0:i.call(a,e.action)),{disableMarketingEmails:null===n.isMarketingEmailsAllowed?void 0:!n.isMarketingEmailsAllowed})),[4,this.api.signup(__assign$2({custom_fields:s},r))];case 1:return l=(p=g.sent()).action,c=p.user,e=__assign$2(__assign$2({},e),{action:l}),[4,this.onAuthSuccess(e,t,c,o,n)];case 2:return g.sent(),this.setSignUpCommonRequestPayload(new rb.Value(void 0),e),[3,4];case 3:return u=g.sent(),d=H.Error.AuthCommonError.create(u),this.onAuthFail(e,t,d,o,n),H.Error.matchErrCode(d.errCode,((m={})[H.Error.ApiErrorCode.SocialEmailVerification]=function(){var t;if(H.isAuthSocialContext(e)){var r=(t=d.nestedError).token,n=t.email;h.socialAccountLinkingData={email:n,token:r,provider:H.Social.Type.Google},h.setCurrentView(G.SocialAccountLinking)}},m[H.Error.ApiErrorCode.SocialMfaVerification]=function(){var t,r;if(H.isAuthSocialContext(e)){var n=d.nestedError;h.mfaSocialAccountLinkingData={action:n.action,modes:null===(t=n.context)||void 0===t?void 0:t.modes,lastDigits:null===(r=n.context)||void 0===r?void 0:r.lastDigits,token:n.token,provider:e.socialType},h.setCurrentView(G.MfaSocialAccountLinking)}return new rb.Value(void 0)},m[H.Error.ApiErrorCode.SignUpEmailVerification]=function(){h.setSignUpCommonRequestPayload(new rb.Value(void 0),e),h.setCurrentView(G.SignUpEmailVerification)},m[H.Error.ApiErrorCode.EmailVerificationCode]=function(){h.setSignUpCommonRequestPayload(new rb.Error(d),e),h.setCurrentView(G.SignUpEmailVerification)},m[H.Error.ApiErrorCode.ShowCaptcha]=function(){h.setCaptchaActionType("SIGNUP"),h.setCurrentView(G.Captcha),h.signUpViewModel.setCaptchaToken(),h.signUpViewModel.setPayload(new rb.Value(void 0),e)},m[H.Error.ApiErrorCode.SocialNoEmail]=function(){h.setCurrentView(G.SignUpEmailPermissionPopup),h.signUpViewModel.setPayload(new rb.Value(void 0),e)},m[H.Error.ApiErrorCode.UseSso]=function(){var t,r=null===(t=d.nestedError.context)||void 0===t?void 0:t.redirectTo;r?h.processSSOStartRequest(__assign$2(__assign$2({},e),{isSSO:!0}),r):h.signUpViewModel.setPayload(new rb.Error(d),e)},m.default=function(){t!==G.NewAccount&&h.setCurrentView(G.NewAccount),h.setSignUpCommonRequestPayload(new rb.Error(d),e)},m)),[3,4];case 4:return[2]}})})},AuthModel.prototype.processSignInCheckEmailRequest=function(e,t){var r,n,o,a,i,s,l,c,u,d,p=e.email;return __awaiter(this,void 0,void 0,function(){var e,m,h,g,f,v,y,_,S,E;return __generator(this,function(b){switch(b.label){case 0:e={action:"SIGNIN",isSecureSignIn:this.signInViewModel.secureLogin,email:p},b.label=1;case 1:return b.trys.push([1,10,,11]),this.signInViewModel.setPayload(new rb.Loading,e),[4,this.api.getAuthInfo(p)];case 2:switch(m=b.sent(),this.authInfoData=new rb.Value(m),h=m.loginType,g=m.hasSocial,null===(n=(r=this.track).trackAuthInfoRequestSuccess)||void 0===n||n.call(r,t,h,g),f=void 0,h){case H.LoginType.sso:if(this.options.isIgnoreSignInSSO){f=new rb.Value(void 0);break}f=new rb.Empty;break;case H.LoginType.apple:f=new rb.Error(new H.Error.AuthCommonError(H.Error.ApiErrorCode.UseApple));break;case H.LoginType.google:f=new rb.Error(new H.Error.AuthCommonError(H.Error.ApiErrorCode.UseGoogle));break;case H.LoginType.facebook:f=new rb.Error(new H.Error.AuthCommonError(H.Error.ApiErrorCode.UseFacebook));break;default:f=new rb.Value(void 0)}if(h!==H.LoginType.google)return[3,3];return this.welcomeBackExperimentTreatmentGroup=null===(a=(o=this.options).onAssignWelcomeBackSocialSigninTreatment)||void 0===a?void 0:a.call(o),"welcome_back"===this.welcomeBackExperimentTreatmentGroup||"welcome_back_login_hint"===this.welcomeBackExperimentTreatmentGroup?(this.signInViewModel.setPayload(new rb.Empty,e),this.setCurrentView(G.WelcomeBack)):this.signInViewModel.setPayload(f,e),[3,9];case 3:if(h!==H.LoginType.sso)return[3,8];b.label=4;case 4:return b.trys.push([4,6,,7]),v=this,[4,null===(s=(i=this.options).onAssignWelcomeBackSSOSigninTreatment)||void 0===s?void 0:s.call(i)];case 5:return v.welcomeBackExperimentTreatmentGroup=b.sent(),[3,7];case 6:return b.sent(),[3,7];case 7:if("welcome_back"===this.welcomeBackExperimentTreatmentGroup)this.signInViewModel.setPayload(f,e),this.setCurrentView(G.WelcomeBack);else{if(!this.options.isIgnoreSignInSSO)return y=m.ssoLoginURL,this.processSSOStartRequest(__assign$2(__assign$2({},e),{isSSO:!0}),y),[2];this.signInViewModel.setPayload(f,e)}return[3,9];case 8:this.signInViewModel.setPayload(f,e),("test_signup"===(_=null===(c=(l=this.options).onAssignAccountNotExistTreatment)||void 0===c?void 0:c.call(l))||"test_signup_prefill"===_)&&(this.signInViewModel.emailFlowModel.isAccountExist=m.accountExists),b.label=9;case 9:return[3,11];case 10:S=b.sent(),E=H.Error.AuthCommonError.create(S);try{null===(d=(u=this.track).trackFail)||void 0===d||d.call(u,E,e,t)}catch(e){}return this.signInViewModel.setPayload(new rb.Error(E),e),[3,11];case 11:return[2]}})})},AuthModel.prototype.processSignInEmailRequest=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:if(e.captchaToken)return[3,2];return[4,this.safeCaptchaExecute()];case 1:return n=s.sent(),[3,3];case 2:n=void 0,s.label=3;case 3:return r=n,e.captchaToken,o=__rest(e,["captchaToken"]),a={email_login:__assign$2(__assign$2({},o),{visibleCaptchaToken:e.captchaToken,captchaTokenV3:r})},i={action:"SIGNIN",isSecureSignIn:this.signInViewModel.secureLogin,email:e.email,mfaMode:a.email_login.mode},[4,this.processSignInCommonRequest(i,t,a)];case 4:return s.sent(),[2]}})})},AuthModel.prototype.processSignInSocialStartRequest=function(e){var t={action:"SIGNIN",isSecureSignIn:this.signInViewModel.secureLogin,socialType:e.provider.type};this.signInViewModel.setPayload(new rb.Loading,t),this.processSocialStartRequest(t,e.provider,e.isReRequestPermissions,void 0,e.loginHint)},AuthModel.prototype.processSignInSocialContinueRequest=function(e,t){var r,n;return __awaiter(this,void 0,void 0,function(){var o,a,i;return __generator(this,function(s){switch(s.label){case 0:if(this.signInViewModel.socialFlowModel.resetProviders([]),o=this.signInViewModel.socialFlowModel.getProviderByType(e.socialType),!(t.restoreError||!o))return[3,1];return a=H.Error.AuthCommonError.create(null!==(r=t.restoreError)&&void 0!==r?r:Error("Cannot find target social provider")),this.signInViewModel.setPayload(new rb.Error(a),e),[3,3];case 1:return i=__assign$2({},null==o?void 0:o.getSigninConfig(t.requestData||{})),[4,this.processSignInCommonRequest(e,this.currentView,i,null===(n=t.restoredData)||void 0===n?void 0:n.initFlowUIState.formKey)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},AuthModel.prototype.processCaptchaRequest=function(e){var t=e.token,r=e.action;return __awaiter(this,void 0,void 0,function(){var e,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:e={action:r,isSecureSignIn:this.signInViewModel.secureLogin,email:"true"},s.label=1;case 1:if(s.trys.push([1,6,,7]),this.signInViewModel.setCaptchaToken(t),this.signUpViewModel.setCaptchaToken(t),"SIGNUP"!==r)return[3,3];return[4,this.processSignUpEmailRequest(this.signUpViewModel.getEmailFlowData())];case 2:return s.sent(),[3,5];case 3:return[4,this.processSignInEmailRequest(this.signInViewModel.getEmailFlowSubmitData(),G.Captcha)];case 4:s.sent(),s.label=5;case 5:return[3,7];case 6:return n=s.sent(),o=new rb.Error(H.Error.AuthCommonError.create(n)),a="SIGNUP"===r?this.signUpViewModel:this.signInViewModel,i="SIGNUP"===r?G.NewAccount:G.SignInWithPassword,a.setPayload(o,e),this.setCurrentView(i),[3,7];case 7:return[2]}})})},AuthModel.prototype.processMFARequest=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.processSignInEmailRequest(e,t)];case 1:return r.sent(),[2]}})})},AuthModel.prototype.processSignUpEmailVerificationRequest=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.processSignUpEmailRequest(e)];case 1:return t.sent(),[2]}})})},AuthModel.prototype.processSignInCommonRequest=function(e,t,r,n){var o,a;return __awaiter(this,void 0,void 0,function(){var i,s,l,c,u,d,p,m,h=this;return __generator(this,function(g){switch(g.label){case 0:return g.trys.push([0,3,,4]),this.signInViewModel.setPayload(new rb.Loading,e),this.onAuthAttempt(e,t,n),i=removeEmptyKeys(__assign$2(__assign$2({},null===(a=(o=this.options).getAssignedCustomFields)||void 0===a?void 0:a.call(o,e.action)),{implicitSignupAllowed:!1})),[4,this.api.loginGeneric(__assign$2({custom_fields:i},r))];case 1:return s=(p=g.sent()).action,l=p.user,e=__assign$2(__assign$2({},e),{action:s}),[4,this.onAuthSuccess(e,t,l,n)];case 2:return g.sent(),this.signInViewModel.setPayload(new rb.Value(void 0),e),[3,4];case 3:return c=g.sent(),u=H.Error.AuthCommonError.create(c),this.onAuthFail(e,t,u,n),d=H.Error.matchErrCode(u.errCode,((m={})[H.Error.ApiErrorCode.SocialEmailVerification]=function(){if(H.isAuthSocialContext(e)){var t=u.nestedError,r=t.token,n=t.email;h.socialAccountLinkingData={email:n,token:r,provider:e.socialType},h.setCurrentView(G.SocialAccountLinking)}},m[H.Error.ApiErrorCode.SocialNoEmail]=function(){return h.setCurrentView(G.SignInEmailPermissionPopup),new rb.Value(void 0)},m[H.Error.ApiErrorCode.SocialMfaVerification]=function(){var t,r;if(H.isAuthSocialContext(e)){var n=u.nestedError;h.mfaSocialAccountLinkingData={action:n.action,modes:null===(t=n.context)||void 0===t?void 0:t.modes,lastDigits:null===(r=n.context)||void 0===r?void 0:r.lastDigits,token:n.token,provider:e.socialType},h.setCurrentView(G.MfaSocialAccountLinking)}return new rb.Value(void 0)},m[H.Error.ApiErrorCode.Mfa]=function(){var e,t=u.nestedError.context;return h.mfaViewModel.setContext({modes:null!==(e=null==t?void 0:t.modes)&&void 0!==e?e:[],lastChars:null==t?void 0:t.lastDigits}),h.setCurrentView(G.MFA),new rb.Value(void 0)},m[H.Error.ApiErrorCode.ShowCaptcha]=function(){return h.setCaptchaActionType("SIGNIN"),h.signInViewModel.setCaptchaToken(),h.setCurrentView(G.Captcha),new rb.Value(void 0)},m[H.Error.ApiErrorCode.UseSso]=function(){var t,r=null===(t=u.nestedError.context)||void 0===t?void 0:t.redirectTo;return r?(h.processSSOStartRequest(__assign$2(__assign$2({},e),{isSSO:!0}),r),new rb.Value(void 0)):new rb.Error(u)},m[H.Error.ApiErrorCode.ExplicitSignUpRequired]=function(){if(H.isAuthSocialContext(e))return h.signUpViaSignInViewModel.setSocialProviderType(e.socialType),h.setCurrentView(G.ExplicitTermsOfServicePopup),new rb.Value(void 0)},m.default=function(){return t===G.SecureSignIn||t===G.SignInInit||t===G.SignInWithPassword||h.setCurrentView(G.SignInWithPassword),new rb.Error(u)},m))||new rb.Error(u),this.signInViewModel.setPayload(d,e),[3,4];case 4:return[2]}})})},AuthModel.prototype.processSocialStartRequest=function(e,t,r,n,o){this.socialService.resetFlowData();try{null===(i=(a=this.options).onBeforeSocialRedirect)||void 0===i||i.call(a,e,this.socialService.appendToState)}catch(e){}var a,i,s=this.socialService.saveState({context:e,termsData:n,initFlowUIState:{formKey:this.currentView}});getTopWindow().location.href=t.getOAuthProviderUrl({stateKey:s,reRequestPermissions:r,loginHint:o})},AuthModel.prototype.processSocialContinueRequest=function(e){var t,r,n,o,a;return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(s){switch(s.label){case 0:i=(null===(t=e.restoredData)||void 0===t?void 0:t.context)&&H.isAuthSocialContext(null===(r=e.restoredData)||void 0===r?void 0:r.context)?null===(n=e.restoredData)||void 0===n?void 0:n.context:this.defaultSocialContext;try{null===(a=(o=this.options).onAfterSocialRedirectReturn)||void 0===a||a.call(o,i,this.socialService.getFromStateByKey)}catch(e){}if("SIGNUP"!==i.action)return[3,2];return[4,this.processSignUpSocialContinueRequest(i,e)];case 1:return s.sent(),[3,4];case 2:return[4,this.processSignInSocialContinueRequest(i,e)];case 3:s.sent(),s.label=4;case 4:return[2]}})})},AuthModel.prototype.processSSOStartRequest=function(e,t){var r=this.ssoService.generateStateKey(),n=this.ssoService.getRedirectLink(t,r);window&&window.parent?getTopWindow().location.href=n:document.location.href=n},AuthModel.prototype.processSSOContinueRequest=function(e){var t,r,n=e.action;return __awaiter(this,void 0,void 0,function(){var e,o,a,i,s,l;return __generator(this,function(c){switch(c.label){case 0:e={action:n,email:"sso_dummy",isSecureSignIn:this.signInViewModel.secureLogin,isSSO:!0},o="SIGNUP"===n?this.signUpViewModel:this.signInViewModel,c.label=1;case 1:if(c.trys.push([1,5,,6]),o.setPayload(new rb.Loading,e),i=null===(r=(t=this.options).getCurrentUser)||void 0===r?void 0:r.call(t))return[3,3];return[4,this.api.orAnonymous()];case 2:i=c.sent(),c.label=3;case 3:if((a=i).anonymous)throw Error("User is anonymous after the SSO flow");return[4,this.onAuthSuccess(e,this.currentView,a)];case 4:return c.sent(),o.setPayload(new rb.Value(void 0),e),[3,6];case 5:return s=c.sent(),l=H.Error.AuthCommonError.create(s),this.onAuthFail(e,this.currentView,l),o.setPayload(new rb.Error(l),e),[3,6];case 6:return[2]}})})},AuthModel.prototype.processResetPasswordRequest=function(e){var t,r,n,o,a,i,s,l,c,u=e.email;return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),null===(n=null===(r=null===(t=this.track)||void 0===t?void 0:t.resetPasswordTracking)||void 0===r?void 0:r.trackAttempt)||void 0===n||n.call(r),this.resetPasswordViewModel.setPayload(new rb.Loading),[4,this.api.resetPassword(u).catch(function(e){if(!H.Error.isAuthLegacyApiError(e))throw e})];case 1:return d.sent(),this.setCurrentView(G.ResetPasswordEmailSent),this.resetPasswordViewModel.setPayload(new rb.Value(void 0)),null===(i=null===(a=null===(o=this.track)||void 0===o?void 0:o.resetPasswordTracking)||void 0===a?void 0:a.trackSuccess)||void 0===i||i.call(a),[3,3];case 2:return e=d.sent(),this.resetPasswordViewModel.setPayload(new rb.Error(e)),null===(c=null===(l=null===(s=this.track)||void 0===s?void 0:s.resetPasswordTracking)||void 0===l?void 0:l.trackFail)||void 0===c||c.call(l,e),[3,3];case 3:return[2]}})})},AuthModel.prototype.processSupportRequest=function(e){var t=e.email,r=e.comment;return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.supportRequestViewModel.setPayload(new rb.Loading),[4,this.createMfaSupportTicket({name:"NA - Two Step Verification Form",email:t,comment:r})];case 1:return n.sent(),this.setCurrentView(G.SupportRequestSent),this.supportRequestViewModel.setPayload(new rb.Value(void 0)),[3,3];case 2:return e=n.sent(),this.supportRequestViewModel.setPayload(new rb.Error(e)),[3,3];case 3:return[2]}})})},AuthModel.prototype.onAuthAttempt=function(e,t,r,n){var o,a,i,s;try{null===(a=(o=this.track).trackAttempt)||void 0===a||a.call(o,e,t,n,r),null===(s=(i=this.options).onAuthAttempt)||void 0===s||s.call(i,e)}catch(e){}},AuthModel.prototype.onAuthSuccess=function(e,t,r,n,o){var a,i,s,l;return __awaiter(this,void 0,void 0,function(){return __generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),null===(i=(a=this.track).trackSuccess)||void 0===i||i.call(a,e,t,o,n),[4,null===(l=(s=this.options).onAuthSuccess)||void 0===l?void 0:l.call(s,e,r)];case 1:case 2:return c.sent(),[3,3];case 3:return[2]}})})},AuthModel.prototype.onAuthFail=function(e,t,r,n,o){var a,i,s,l;try{null===(i=(a=this.track).trackFail)||void 0===i||i.call(a,r,e,t,o,n),null===(l=(s=this.options).onAuthReject)||void 0===l||l.call(s,e,r)}catch(e){}},__decorate([observable,__metadata("design:type",String)],AuthModel.prototype,"currentView",void 0),__decorate([observable,__metadata("design:type",String)],AuthModel.prototype,"captchaActionType",void 0),__decorate([observable,__metadata("design:type",Object)],AuthModel.prototype,"socialAccountLinkingData",void 0),__decorate([observable,__metadata("design:type",Object)],AuthModel.prototype,"mfaSocialAccountLinkingData",void 0),__decorate([observable,__metadata("design:type",Object)],AuthModel.prototype,"authInfoData",void 0),__decorate([observable,__metadata("design:type",Object)],AuthModel.prototype,"welcomeBackExperimentTreatmentGroup",void 0),__decorate([computed,__metadata("design:type",Object),__metadata("design:paramtypes",[])],AuthModel.prototype,"currentUser",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],AuthModel.prototype,"setCaptchaActionType",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",void 0)],AuthModel.prototype,"setCurrentView",null),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AuthModel.prototype,"onCallTrigger",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSignUpEmailRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AuthModel.prototype,"processSignUpSocialStartRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSignUpSocialContinueRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,String,Object,Object,String]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSignUpCommonRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,String]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSignInCheckEmailRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,String]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSignInEmailRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AuthModel.prototype,"processSignInSocialStartRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSignInSocialContinueRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processCaptchaRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,String]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processMFARequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSignUpEmailVerificationRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,String,Object,String]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSignInCommonRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,rL,Boolean,Object,String]),__metadata("design:returntype",void 0)],AuthModel.prototype,"processSocialStartRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSocialContinueRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,String]),__metadata("design:returntype",void 0)],AuthModel.prototype,"processSSOStartRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSSOContinueRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processResetPasswordRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],AuthModel.prototype,"processSupportRequest",null),AuthModel}(),VerticalSpacer=function(e){return em.createElement("div",{style:{height:"".concat(8*e.multiplier,"px"),flexShrink:0}})},HorizontalSpacer=function(e){return em.createElement("div",{style:{display:"inline-block",width:"".concat(8*e.multiplier,"px"),flexShrink:0}})},r9={normalWeight:"typography-module_normalWeight__FfaYY",hCommon:"typography-module_hCommon__uSEsP",h1:"typography-module_h1__SkjMp",h2:"typography-module_h2__nuXz7",h3:"typography-module_h3__rqvJu",h4:"typography-module_h4__m2OjY",h5:"typography-module_h5__9zVZF",h6:"typography-module_h6__lQHZ7",pCommon:"typography-module_pCommon__F5qJW",large:"typography-module_large__1Q-QH",medium:"typography-module_medium__F8b7L",small:"typography-module_small__5uZo5",xsmall:"typography-module_xsmall__0JXMd",compact:"typography-module_compact__tXJGJ",tag:"typography-module_tag__dqtJy"},TypographyComponent=function(e){var t=e.htmlElement,r=e.className,n=e.children,o=e.color,a=e.bold,i=e.textAlign,s=e.textDecoration,l=e.style,c=e.qa,u=__assign$2(__assign$2(__assign$2({},o?{color:e6[o]}:{}),{fontWeight:a?600:void 0,textAlign:i,textDecoration:s}),l);return n?em.createElement(t,{style:u,className:eX(r,!1===a&&r9.normalWeight),"data-qa":c},n):null},Heading=function(e){return em.createElement(TypographyComponent,__assign$2({htmlElement:e.htmlTag,className:r9[e.styleTag||e.htmlTag]},e))},H2=function(e){return em.createElement(TypographyComponent,__assign$2({htmlElement:"h2",className:r9.h2},e))},H3=function(e){return em.createElement(TypographyComponent,__assign$2({htmlElement:"h3",className:r9.h3},e))},H4=function(e){return em.createElement(TypographyComponent,__assign$2({htmlElement:"h4",className:r9.h4},e))},H5=function(e){return em.createElement(TypographyComponent,__assign$2({htmlElement:"h5",className:r9.h5},e))},LargeText=function(e){return em.createElement(TypographyComponent,__assign$2({htmlElement:"div",className:r9.large},e))},MediumText=function(e){return em.createElement(TypographyComponent,__assign$2({htmlElement:"div",className:r9.medium},e))},SmallText=function(e){return em.createElement(TypographyComponent,__assign$2({htmlElement:"div",className:r9.small},e))},XSmallText=function(e){return em.createElement(TypographyComponent,__assign$2({htmlElement:"div",className:r9.xsmall},e))},SpanCustomText=function(e){var t=e.color,r=__rest(e,["color"]);return em.createElement(TypographyComponent,__assign$2({htmlElement:"span",style:{color:t?e6[t]:"inherit"}},r))};function _extends$f(){return(_extends$f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function replaceClassName(e,t){return e.replace(RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var r8={disabled:!1},ne=em.createContext(null),nt="unmounted",nr="exited",nn="entering",no="entered",na="exiting",ni=function(e){function Transition(t,r){n=e.call(this,t,r)||this;var n,o,a=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?a?(o=nr,n.appearStatus=nn):o=no:o=t.unmountOnExit||t.mountOnEnter?nt:nr,n.state={status:o},n.nextCallback=null,n}_inheritsLoose(Transition,e),Transition.getDerivedStateFromProps=function(e,t){return e.in&&t.status===nt?{status:nr}:null};var t=Transition.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==nn&&r!==no&&(t=nn):(r===nn||r===no)&&(t=na)}this.updateStatus(!1,t)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},t.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===nn?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===nr&&this.setState({status:nt})},t.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,o=this.props.nodeRef?[n]:[eY.findDOMNode(this),n],a=o[0],i=o[1],s=this.getTimeouts(),l=n?s.appear:s.enter;if(!e&&!r||r8.disabled){this.safeSetState({status:no},function(){t.props.onEntered(a)});return}this.props.onEnter(a,i),this.safeSetState({status:nn},function(){t.props.onEntering(a,i),t.onTransitionEnd(l,function(){t.safeSetState({status:no},function(){t.props.onEntered(a,i)})})})},t.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:eY.findDOMNode(this);if(!t||r8.disabled){this.safeSetState({status:nr},function(){e.props.onExited(n)});return}this.props.onExit(n),this.safeSetState({status:na},function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,function(){e.safeSetState({status:nr},function(){e.props.onExited(n)})})})},t.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},t.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},t.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:eY.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(!r||n){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],a=o[0],i=o[1];this.props.addEndListener(a,i)}null!=e&&setTimeout(this.nextCallback,e)},t.render=function(){var e=this.state.status;if(e===nt)return null;var t=this.props,r=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var n=_objectWithoutPropertiesLoose(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return em.createElement(ne.Provider,{value:null},"function"==typeof r?r(e,n):em.cloneElement(em.Children.only(r),n))},Transition}(em.Component);function noop$1(){}ni.contextType=ne,ni.propTypes={},ni.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$1,onEntering:noop$1,onEntered:noop$1,onExit:noop$1,onExiting:noop$1,onExited:noop$1},ni.UNMOUNTED=nt,ni.EXITED=nr,ni.ENTERING=nn,ni.ENTERED=no,ni.EXITING=na;var removeClass=function(e,t){return e&&t&&t.split(" ").forEach(function(t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=replaceClassName(e.className,t):e.setAttribute("class",replaceClassName(e.className&&e.className.baseVal||"",t))})},ns=function(e){function CSSTransition(){for(var t,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var n=t.resolveArguments(e,r),o=n[0],a=n[1];t.removeClasses(o,"exit"),t.addClass(o,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var n=t.resolveArguments(e,r),o=n[0],a=n[1];t.addClass(o,a?"appear":"enter","active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var n=t.resolveArguments(e,r),o=n[0],a=n[1]?"appear":"enter";t.removeClasses(o,a),t.addClass(o,a,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,n="string"==typeof r,o=n?(n&&r?r+"-":"")+e:r[e],a=n?o+"-active":r[e+"Active"],i=n?o+"-done":r[e+"Done"];return{baseClassName:o,activeClassName:a,doneClassName:i}},t}_inheritsLoose(CSSTransition,e);var t=CSSTransition.prototype;return t.addClass=function(e,t,r){var n,o=this.getClassNames(t)[r+"ClassName"],a=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&a&&(o+=" "+a),"active"===r&&e&&e.scrollTop,o&&(this.appliedClasses[t][r]=o,n=o,e&&n&&n.split(" ").forEach(function(t){var r,n;return r=e,n=t,void(r.classList?r.classList.add(n):(r.classList?n&&r.classList.contains(n):-1!==(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+n+" "))||("string"==typeof r.className?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n)))}))},t.removeClasses=function(e,t){var r=this.appliedClasses[t],n=r.base,o=r.active,a=r.done;this.appliedClasses[t]={},n&&removeClass(e,n),o&&removeClass(e,o),a&&removeClass(e,a)},t.render=function(){var e=this.props;e.classNames;var t=_objectWithoutPropertiesLoose(e,["classNames"]);return em.createElement(ni,_extends$f({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},CSSTransition}(em.Component);ns.defaultProps={classNames:""},ns.propTypes={};var nl={out:"out-in",in:"in-out"},callHook=function(e,t,r){return function(){var n;e.props[t]&&(n=e.props)[t].apply(n,arguments),r()}},nc=((en={})[nl.out]=function(e){var t=e.current,r=e.changeState;return em.cloneElement(t,{in:!1,onExited:callHook(t,"onExited",function(){r(nn,null)})})},en[nl.in]=function(e){var t=e.current,r=e.changeState,n=e.children;return[t,em.cloneElement(n,{in:!0,onEntered:callHook(n,"onEntered",function(){r(nn)})})]},en),nu=((eo={})[nl.out]=function(e){var t=e.children,r=e.changeState;return em.cloneElement(t,{in:!0,onEntered:callHook(t,"onEntered",function(){r(no,em.cloneElement(t,{in:!0}))})})},eo[nl.in]=function(e){var t=e.current,r=e.children,n=e.changeState;return[em.cloneElement(t,{in:!1,onExited:callHook(t,"onExited",function(){n(no,em.cloneElement(r,{in:!0}))})}),em.cloneElement(r,{in:!0})]},eo),nd=function(e){function SwitchTransition(){for(var t,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={status:no,current:null},t.appeared=!1,t.changeState=function(e,r){void 0===r&&(r=t.state.current),t.setState({status:e,current:r})},t}_inheritsLoose(SwitchTransition,e);var t=SwitchTransition.prototype;return t.componentDidMount=function(){this.appeared=!0},SwitchTransition.getDerivedStateFromProps=function(e,t){var r,n;return null==e.children?{current:null}:t.status===nn&&e.mode===nl.in?{status:nn}:t.current&&!((r=t.current)===(n=e.children)||em.isValidElement(r)&&em.isValidElement(n)&&null!=r.key&&r.key===n.key)?{status:na}:{current:em.cloneElement(e.children,{in:!0})}},t.render=function(){var e,t=this.props,r=t.children,n=t.mode,o=this.state,a=o.status,i=o.current,s={children:r,current:i,changeState:this.changeState,status:a};switch(a){case nn:e=nu[n](s);break;case na:e=nc[n](s);break;case no:e=i}return em.createElement(ne.Provider,{value:{isMounting:!this.appeared}},e)},SwitchTransition}(em.Component);nd.propTypes={},nd.defaultProps={mode:nl.out};var np={overlay:"modal-module_overlay__Gv6Vp",shadow:"modal-module_shadow__19RRv",modal:"modal-module_modal__-EhVq",modalEnter:"modal-module_modalEnter__4Pla1",modalEnterActive:"modal-module_modalEnterActive__WZMMn",modalExit:"modal-module_modalExit__IowXo",modalExitActive:"modal-module_modalExitActive__AJIxV",close:"modal-module_close__7rkoA",childrenContainer:"modal-module_childrenContainer__7DyRn"},ModalOverlay=function(e){var t=e.children,r=e.className,n=e.show,o=e.onClose,a=e.closeByClickOutside,i=e.closeByIcon;return em.createElement(ns,{in:n,classNames:{enter:np.modalEnter,enterActive:np.modalEnterActive,enterDone:np.modalEnterActive,exit:np.modalExit,exitActive:np.modalExitActive,exitDone:np.modalExitActive},timeout:500,mountOnEnter:!0,unmountOnExit:!0},em.createElement("div",{className:np.overlay},em.createElement("div",{className:np.shadow,onClick:a?o:void 0}),em.createElement("div",{className:eX(np.modal,r)},i&&em.createElement("div",{className:np.close,onClick:o},em.createElement(CloseIcon,{color:"neutral50"})),em.createElement("div",{className:np.childrenContainer},t))))},nm=function(e){function Modal(t){var r=e.call(this,t)||this;return t.show&&r.appendRootDiv(),r}return __extends$1(Modal,e),Modal.prototype.componentDidMount=function(){this.appendRootDiv()},Modal.prototype.componentWillUnmount=function(){this.el&&document.body.removeChild(this.el)},Modal.prototype.render=function(){return this.el?eY.createPortal(em.createElement(ModalOverlay,__assign$2({},this.props)),this.el):null},Modal.prototype.appendRootDiv=function(){this.el||(this.el=document.createElement("div"),document.body.appendChild(this.el))},Modal}(em.Component),nh={modalContainer:"facebook_permissions-module_modalContainer__4mnyr",highlight:"facebook_permissions-module_highlight__O--iP",instructionsList:"facebook_permissions-module_instructionsList__N-lq4",buttonsContainer:"facebook_permissions-module_buttonsContainer__kkonX"},FacebookPermissionsModal=function(e){var t=e.formKey,r=e.trackFormShow,n=e.show,o=e.onCloseHandler,a=e.onOpenFacebookSettings,i=__rest(e,["formKey","trackFormShow","show","onCloseHandler","onOpenFacebookSettings"]);return(0,em.useEffect)(function(){n&&(null==r||r(t))},[r,n,t]),em.createElement(nm,__assign$2({className:nh.modalContainer,closeByIcon:!0,show:n},i,{onClose:o}),em.createElement(H4,{qa:"requireEmailNotice",textAlign:"center"},"Permission required"),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement(MediumText,null,"In order to proceed, please enable email permission on your Facebook account. Use the button below to open your Facebook settings and follow these steps:"),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement("ol",{className:nh.instructionsList},em.createElement("li",null,"Click ",em.createElement("span",{className:nh.highlight},"Edit This")," above the Facebook continue button"),em.createElement("li",null,"Make sure the toggle next to ",em.createElement("span",{className:nh.highlight},"Email address")," is ON"),em.createElement("li",null,"Click ",em.createElement("span",{className:nh.highlight},"Continue")," to save your settings")),em.createElement("div",{className:nh.buttonsContainer},em.createElement(PrimaryButton,{compact:!0,text:"Open Facebook settings",color:V.FacebookBlue,onClick:a}),em.createElement(SecondaryButton,{compact:!0,text:"Sign ".concat(t===G.SignUpEmailPermissionPopup?"up":"in"," with a different method"),onClick:o})))},ng={checkboxContainer:"default-module_checkboxContainer__MjO-s",disabled:"default-module_disabled__TWzzd",checkbox:"default-module_checkbox__wo8B5"},CheckboxDefault=function(e){var t=e.label,r=e.handleChange,n=e.qa,o=__rest(e,["label","handleChange","qa"]);return em.createElement("label",{className:eX(ng.checkboxContainer,o.disabled&&ng.disabled)},em.createElement("input",__assign$2({"data-qa":n,className:ng.checkbox,type:"checkbox",onChange:function(e){return r(e.target.checked)}},o)),t)},nf=em.createElement(eg.x,{as:"span",variant:"text-xsmall",color:"base-subdued"},"Send me product updates, Premium offers, and weekly progress reports."),GDPRCheckbox=function(e){return em.createElement(CheckboxDefault,{name:"GDPR",label:nf,checked:e.isChecked,handleChange:e.onChange,qa:e.qa})};(w=ea||(ea={})).TermsOfService="terms",w.PrivacyPolicy="privacyPolicy",w.CAPrivacyPolicy="CAPrivacyNotice";var BusinessAgreementLink=function(e){var t=e.highlight,r=e.onClick;return em.createElement(e_.r,{variant:t?"secondary":"inherit",onClick:r,href:"/terms/customer-business-agreement",target:"_blank"},"Customer Business Agreement")},TermsAndConditionsLink=function(e){var t=e.highlight,r=e.onClick;return em.createElement(e_.r,{variant:t?"secondary":"inherit",onClick:r,href:"/terms",target:"_blank",accessibilityLabel:"Grammarly Terms and Conditions"},"Terms and Conditions")},PrivacyPolicyLink=function(e){var t=e.highlight,r=e.onClick;return em.createElement(e_.r,{variant:t?"secondary":"inherit",onClick:r,accessibilityLabel:"Grammarly Privacy Policy",href:"/privacy-policy",target:"_blank"},"Privacy Policy")},CAPrivacyNoticeLink=function(e){var t=e.highlight,r=e.onClick;return em.createElement(e_.r,{variant:t?"secondary":"inherit",onClick:r,accessibilityLabel:"Grammarly Privacy Policy",href:"/privacy-policy#sectionSingleColumn_47y4NWiOf89wt12wcc6a74",target:"_blank"},"CA Notice at Collection")},nv={termsCheckboxContainer:"grammarly-module_termsCheckboxContainer__MlVrI",highlight:"grammarly-module_highlight__bcHVN",highlightHover:"grammarly-module_highlightHover__3HkIe"},GrammarlyToSText=function(e){var t=e.trackPrivacyPolicyCALink,r=e.trackPrivacyPolicyLink,n=e.trackTermsOfServiceLink;return em.createElement(em.Fragment,null,"By signing up, you agree to the"," ",em.createElement(TermsAndConditionsLink,{highlight:!0,onClick:n})," and"," ",em.createElement(PrivacyPolicyLink,{highlight:!0,onClick:r}),". California residents, see our ",em.createElement(CAPrivacyNoticeLink,{highlight:!0,onClick:t}),".")},GrammarlyBusinessToSText=function(e){var t=e.trackBusinessAgreementLink,r=e.trackPrivacyPolicyCALink,n=e.trackPrivacyPolicyLink,o=e.trackTermsOfServiceLink;return em.createElement(WrapperGDSText,{weight:"bold",as:"span",variant:"text-xsmall",color:"base-subdued"},"By signing up, you agree to the"," ",em.createElement(BusinessAgreementLink,{highlight:!0,onClick:t})," and"," ",em.createElement(TermsAndConditionsLink,{highlight:!0,onClick:o}),", and acknowledge that you have read our ",em.createElement(PrivacyPolicyLink,{highlight:!0,onClick:n}),". California residents, see our ",em.createElement(CAPrivacyNoticeLink,{highlight:!0,onClick:r}),".")},GrammarlyTermsOfServiceSignupTextXSmall=function(e){var t=e.hasBusinessToSAgreement,r=__rest(e,["hasBusinessToSAgreement"]);return t?em.createElement(GrammarlyBusinessToSText,__assign$2({},r)):em.createElement(WrapperGDSText,{as:"span",variant:"text-xsmall",color:"base-subdued"},em.createElement(GrammarlyToSText,__assign$2({},r)))},GrammarlySignupMaskPrivacyPolicyText=function(e){return em.createElement(WrapperGDSText,{as:"span",variant:"text-xsmall",color:"base-subdued"},"Grammarly will only use your email in accordance with our"," ",em.createElement(PrivacyPolicyLink,{highlight:!0,onClick:e.trackPrivacyPolicyLink}),". California residents, see our ",em.createElement(CAPrivacyNoticeLink,{highlight:!0,onClick:e.trackPrivacyPolicyCALink}),".")},GrammarlySignupMarketingEmailsText=function(){return em.createElement(WrapperGDSText,{as:"p",variant:"text-xsmall",color:"base-subdued"},"You also agree to receive product-related marketing emails from Grammarly, which you can unsubscribe from at any time.")},GrammarlyTermsOfServiceCheckbox=function(e){var t=e.isChecked,r=e.isHighlighted,n=e.onToggle,o=e.trackTermsOfServiceLink,a=e.trackPrivacyPolicyLink,i=e.trackPrivacyPolicyCALink;return em.createElement("div",{className:eX(nv.termsCheckboxContainer,!t&&nv.highlight,!t&&r&&nv.highlightHover)},em.createElement(CheckboxDefault,{name:"terms",label:em.createElement(XSmallText,null,"I agree to the ",em.createElement(TermsAndConditionsLink,{highlight:!0,onClick:o})," ","and ",em.createElement(PrivacyPolicyLink,{highlight:!0,onClick:a}),". California\xa0residents, see our"," ",em.createElement(CAPrivacyNoticeLink,{highlight:!0,onClick:i}),"."),checked:t,handleChange:n}))},GrammarlyTermsOfServiceSigninLinks=function(){return em.createElement(WrapperGDSText,{as:"p",variant:"text-xsmall",color:"base-subdued"},em.createElement(TermsAndConditionsLink,{highlight:!0})," \xb7 ",em.createElement(PrivacyPolicyLink,{highlight:!0})," \xb7"," ",em.createElement(CAPrivacyNoticeLink,{highlight:!0}))},RecaptchaTermsOfService=function(){return em.createElement(WrapperGDSText,{as:"p",variant:"text-xsmall",color:"base-subdued"},"This site is protected by reCAPTCHA and the Google"," ",em.createElement(e_.r,{href:"https://policies.google.com/privacy",accessibilityLabel:"Google Privacy Policy",variant:"secondary"},"Privacy Policy")," ","and"," ",em.createElement(e_.r,{href:"https://policies.google.com/terms",accessibilityLabel:"Google Terms of Service",target:"_blank",variant:"secondary"},"Terms of Service")," ","apply.")},ny=observer(function(e){var t=e.model,r=e.trackToSLinkFollow,n=e.className,o=e.tosTextCentered,a=(0,em.useCallback)(function(){return null==r?void 0:r(H.Tracking.ToSLinkType.BusinessAgreement)},[r]),i=(0,em.useCallback)(function(){return null==r?void 0:r(H.Tracking.ToSLinkType.TermsOfService)},[r]),s=(0,em.useCallback)(function(){return null==r?void 0:r(H.Tracking.ToSLinkType.PrivacyPolicy)},[r]),l=(0,em.useCallback)(function(){return null==r?void 0:r(H.Tracking.ToSLinkType.CAPrivacyPolicy)},[r]);return em.createElement("div",{className:n},t.isGDPR&&em.createElement(em.Fragment,null,em.createElement(GDPRCheckbox,{isChecked:t.isMarketingEmailsAllowed,onChange:t.onMarketingEmailChange,qa:"ckbxSignupGDPR"}),em.createElement(VerticalSpacer,{multiplier:2})),t.isExplicitToSAgreement&&em.createElement(GrammarlyTermsOfServiceCheckbox,{isChecked:t.isTermsOfServiceAccepted,isHighlighted:t.isHighlighted,onToggle:t.onTermsOfServiceChange,hasBusinessToSAgreement:t.hasBusinessToSAgreement,trackBusinessAgreementLink:a,trackTermsOfServiceLink:i,trackPrivacyPolicyLink:s,trackPrivacyPolicyCALink:l}),!t.isExplicitToSAgreement&&em.createElement(XSmallText,{textAlign:o?"center":void 0},em.createElement(GrammarlyTermsOfServiceSignupTextXSmall,{hasBusinessToSAgreement:t.hasBusinessToSAgreement,trackBusinessAgreementLink:a,trackTermsOfServiceLink:i,trackPrivacyPolicyLink:s,trackPrivacyPolicyCALink:l})))}),n_={modalContainer:"explicit_terms_of_service-module_modalContainer__tmTgL",buttonsContainer:"explicit_terms_of_service-module_buttonsContainer__MB0y1"},ExplicitTermsOfServiceModal=function(e){var t=e.show,r=e.model,n=e.trackFormShow,o=e.trackToSLinkFollow,a=e.trackSubmitButtonClick,i=e.onCallTrigger,s=e.onCloseHandler;(0,em.useEffect)(function(){t&&(null==n||n(G.ExplicitTermsOfServicePopup))},[n,t]);var l=(0,em.useCallback)(function(){var e=__read$2(r.validateSocialFlow(),2),t=e[0],n=e[1],o=r.getSocialProvider();if(!o){i(q.ToSignIn);return}null==a||a({action:"SIGNUP",socialType:o.type},G.ExplicitTermsOfServicePopup,n,r.termsModel.getData()),t&&i(createTrigger($.SignUpSocialFlowStart,r.getSocialFlowStartData(o)))},[i,r]),c=(0,em.useCallback)(function(){i(q.ToSignIn)},[i]);return em.createElement(nm,{className:n_.modalContainer,closeByIcon:!0,show:t,onClose:s},em.createElement(H4,{textAlign:"center"},"Welcome to Grammarly"),em.createElement(VerticalSpacer,{multiplier:3}),em.createElement(MediumText,{textAlign:"center"},"Create your Grammarly account with your ",r.socialProviderType," account"),em.createElement(VerticalSpacer,{multiplier:5}),em.createElement(ny,{model:r.termsModel,trackToSLinkFollow:o}),em.createElement("div",{className:n_.buttonsContainer},em.createElement(PrimaryButton,{qa:"btnAgreeAndSignUp",compact:!0,text:"Agree and Sign up",color:V.Green,onClick:l}),em.createElement(SecondaryButton,{qa:"btnBackToSignIn",compact:!0,text:"Back to Sign in",onClick:c})))},nS={mainContainer:"base-module_mainContainer__IS7Z5",titleContainer:"base-module_titleContainer__h1Yue",headingAndLinkContainer:"base-module_headingAndLinkContainer__eijiA",stacked:"base-module_stacked__Up-EF"},BaseTitle=function(e){var t,r=e.children,n=e.subtitle,o=e.hideLink,a=e.linkText,i=e.onLinkClick,s=e.linkHref,l=e.linkQa,c=e.headingHtmlTag,u=e.alignment,d=void 0===u?H.SupplementaryFlowLinkAlignment.INLINE:u,p=!o&&a,m=p&&d===H.SupplementaryFlowLinkAlignment.STACKED;return em.createElement("div",{className:nS.titleContainer},em.createElement("div",{className:eX(nS.headingAndLinkContainer,((t={})[nS.stacked]=m,t))},r&&em.createElement(Heading,{color:"neutral90",styleTag:"h3",htmlTag:void 0===c?"h3":c,bold:!1},r),p&&(s?em.createElement(SmallText,null,em.createElement(e_.r,{id:l,onClick:i,href:s,target:"_parent",variant:"primary"},a)):em.createElement(UnstyledButton,{style:{fontSize:"14px",lineHeight:"22px",color:e6.Green60_24,textDecoration:"underline"},qa:l,onClick:i},a))),n&&em.createElement(em.Fragment,null,em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(MediumText,{color:"neutral90"},n)))},TermsOfServiceFooter=function(e){var t=e.isGDPR;return em.createElement(em.Fragment,null,em.createElement(RecaptchaTermsOfService,null),!t&&em.createElement(em.Fragment,null,em.createElement(VerticalSpacer,{multiplier:1.5}),em.createElement(GrammarlySignupMarketingEmailsText,null)))},Form=function(e){var t=e.children,r=e.qa,n=e.className,o=e.onSubmit,a=__rest(e,["children","qa","className","onSubmit"]);return em.createElement("form",__assign$2({},a,{className:eX("form-module_formContainer__2m9FA",n),"aria-label":"form",onSubmit:function(e){e.preventDefault(),o&&o(e)},method:"post",target:"_self","data-qa":r||"form-component"}),t)},nE={resetPassword:"validation-module_resetPassword__EHL3p"},getUseSocialSignUpMessage=function(e){return e?"There's already a Grammarly account associated with this email through the ".concat(e," sign-in method. Please choose ").concat(e," below to sign in."):"There's already a Grammarly account associated with this email through a social sign-in method. Please choose a social provider below to sign in."},getUseSocialSignInMessage=function(e,t){return e?"You chose the ".concat(e," sign-in method when you created your account. Please choose ").concat(e," ").concat(t?"above":"below"," to sign in."):"You chose a social sign-in method when you created your account. Please choose a social provider ".concat(t?"above":"below"," to sign in.")},getSignUpMessageByErrCode=function(e,t){switch(e){case D.UiErrorCode.AcceptTermsOfService:return"Please agree to our Terms and Conditions before signing up.";case D.ApiErrorCode.UseEmail:return"This email is already linked to a Grammarly account. Please sign in with your email address and password.";case D.ApiErrorCode.RateLimited:return"Sign-up is disabled because of too many attempts. Please wait a moment and try again.";case D.ApiErrorCode.UseApple:return getUseSocialSignUpMessage(H.Social.Type.Apple);case D.ApiErrorCode.UseFacebook:return getUseSocialSignUpMessage(H.Social.Type.Facebook);case D.ApiErrorCode.UseGoogle:return getUseSocialSignUpMessage(H.Social.Type.Google);case D.ApiErrorCode.UseSocial:return getUseSocialSignUpMessage();case D.ApiErrorCode.SocialNoEmail:return"We couldn’t complete your registration because this Facebook account was created with a phone number. Please try a different sign-up method.";case D.ApiErrorCode.InvalidOAuthCode:return"We are unable to create an account with ".concat((null==t?void 0:t.socialProvider)||"selected provider",". Please wait a moment and try again.");case D.ApiErrorCode.AccountExistsWithDifferentLogin:return"An account with this email address already exists. Please try a different sign in method."}return(null==t?void 0:t.socialProvider)?"Unable to create an account with ".concat(t.socialProvider,". Please try a different sign-up method."):"Unable to create an account with your email address. Please try a different sign-up method."},getSignInMessageByErrCode=function(e,t){var r;switch(e){case D.ApiErrorCode.RateLimited:return"Sign-in is disabled because of too many attempts. Please wait a moment and try again.";case D.ApiErrorCode.UseApple:return getUseSocialSignInMessage(H.Social.Type.Apple,null==t?void 0:t.isSocialSignInFirstExperimentEnabled);case D.ApiErrorCode.UseFacebook:return getUseSocialSignInMessage(H.Social.Type.Facebook,null==t?void 0:t.isSocialSignInFirstExperimentEnabled);case D.ApiErrorCode.UseGoogle:return getUseSocialSignInMessage(H.Social.Type.Google,null==t?void 0:t.isSocialSignInFirstExperimentEnabled);case D.ApiErrorCode.UseSocial:return getUseSocialSignInMessage(void 0,null==t?void 0:t.isSocialSignInFirstExperimentEnabled);case D.ApiErrorCode.InvalidOAuthCode:return"Unable to sign in with ".concat((null==t?void 0:t.socialProvider)||"selected provider",". Please wait a moment and try again.");case D.ApiErrorCode.UseEmail:return"We’ve noticed you tried to sign in with ".concat((null==t?void 0:t.socialProvider)||"a social provider",", but it looks like you used a password when you joined Grammarly. Please sign in with ").concat((null==t?void 0:t.hasEmail)?"a password":"an email and password"," below.");case D.ApiErrorCode.AccountExistsWithDifferentLogin:return"An account with this email address already exists. Please try a different sign in method."}return(null==t?void 0:t.socialProvider)?"Unable to sign in with ".concat(t.socialProvider,". Please wait a moment and try again."):em.createElement(em.Fragment,null,"Your password is incorrect or this account doesn’t exist. Please"," ",(null==t?void 0:t.onResetPasswordClick)?em.createElement(UnstyledButton,{className:nE.resetPassword,onClick:t.onResetPasswordClick},"reset your password"):"reset your password"," ","or check"," ",em.createElement(Link,{to:null!==(r=null==t?void 0:t.signInEmailFailureSupportUrl)&&void 0!==r?r:"",openInNewWindow:!0},"this article."))},SignUpFlowErrorAlert=function(e){var t=e.error;return em.createElement(ErrorAlert,null,getSignUpMessageByErrCode(t.errCode))},SignInFlowErrorAlert=function(e){var t=e.error,r=e.socialProvider,n=e.onGotToResetPassword,o=e.signInEmailFailureSupportUrl,a=e.isSocialSignInFirstExperimentEnabled;return em.createElement(ErrorAlert,{qa:"txtLoginError"},getSignInMessageByErrCode(t.errCode,{socialProvider:r,signInEmailFailureSupportUrl:o,onResetPasswordClick:n,isSocialSignInFirstExperimentEnabled:a}))},nb={socialContainer:"social-module_socialContainer__YK5Ip",socialButtonsContainer:"social-module_socialButtonsContainer__mIziK",socialButtonsTileContainer:"social-module_socialButtonsTileContainer__6O1UI",socialButtonTile:"social-module_socialButtonTile__a-35G"},nw=observer(function(e){var t=e.signInEmailFailureSupportUrl,r=e.model,n=e.copyType,o=e.isSubmitButtonsDisabled,a=e.isSocialSignInFirstExperimentEnabled,i=e.onSubmit,s=e.onButtonMouseEnter,l=e.onButtonMouseLeave,c=e.removeFbSignupOptionTreatment,u=e.isSocialFirstSignupTileVariant;if(!r.isEnabled)return null;var d=r.isLoading,p=r.activeProviderType;return em.createElement("div",{className:nb.socialContainer},r.flowErrorAlert&&em.createElement(em.Fragment,null,em.createElement(VerticalSpacer,{multiplier:1}),"SIGNUP"===r.actionType?em.createElement(SignUpFlowErrorAlert,{error:r.flowErrorAlert}):em.createElement(SignInFlowErrorAlert,{signInEmailFailureSupportUrl:t,error:r.flowErrorAlert,isSocialSignInFirstExperimentEnabled:a}),em.createElement(VerticalSpacer,{multiplier:1})),em.createElement("ul",{className:u?nb.socialButtonsTileContainer:nb.socialButtonsContainer,"aria-label":"Social login"},r.enabledProviders.map(function(e){if("test"!==c||"SIGNUP"!==r.actionType||"Facebook"!==e.type){var t=o||d&&p!==e.type?L.Disabled:d?L.Loading:L.Active,a={authSocialType:e.type,status:t,onClick:function(){return i(e)},onMouseEnter:s,onMouseLeave:l};return em.createElement("li",{key:e.type},em.createElement(SocialAuthButton,__assign$2({},a,{text:u?e.type:"".concat(tl[n]," ").concat(e.type),showArrow:!u,className:u?nb.socialButtonTile:void 0})))}})))}),SignInWithExistingLink=function(e){return em.createElement("div",{className:"signin_link-module_container__gbFtF"},em.createElement(SmallText,{bold:!0},em.createElement(Link$1,{href:e.linkHref,onClick:e.onLinkClick,color:"green70"},"Sign in with existing account")),em.createElement(ArrowIcon,{color:"green60"}))};function _extends$e(){return(_extends$e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var DashedLine=({styles:e={},...t})=>em.createElement("svg",_extends$e({width:"197",height:"1",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("path",{d:"M1 .5h195.5",stroke:"#D9D9D9",strokeWidth:".5",strokeLinecap:"round"})),nC={textFieldsContainer:"signup-module_textFieldsContainer__GjzSY",field:"signup-module_field__KGB-p",extraFieldsContainer:"signup-module_extraFieldsContainer__jJkfI",show:"signup-module_show__YlZFb",checkboxesContainer:"signup-module_checkboxesContainer__bN-BK",noOutline:"signup-module_noOutline__X9zVL",orDividerContainer:"signup-module_orDividerContainer__3MyyJ",dashedLineContainer:"signup-module_dashedLineContainer__golQc",dashedLine:"signup-module_dashedLine__y9FCp",OrText:"signup-module_OrText__NVP19"},nk=observer(function(e){var t=e.hideTitle,r=e.hideTitleLink,n=e.title,o=void 0===n?"Sign up":n,a=e.titleHeadingHtmlTag,i=e.supplementaryFlowLink,s=e.supplementaryFlowType,l=e.onSupplementaryFlowLinkClick,c=e.headingRef;if(t)return null;var u={linkHref:s===H.Props.SupplementaryFlowType.Link?i:void 0,onLinkClick:s===H.Props.SupplementaryFlowType.BuiltIn?l:void 0};return em.createElement(BaseTitle,__assign$2({hideLink:r,linkText:"I have an account"},u,{linkQa:"supplementaryFlowLink",headingHtmlTag:a}),em.createElement("span",{id:"signUpFormTitle",tabIndex:-1,ref:c,className:nC.noOutline},o))}),OrDivider=function(){return em.createElement(em.Fragment,null,em.createElement(VerticalSpacer,{multiplier:2}),em.createElement("div",{className:nC.orDividerContainer},em.createElement("div",{className:nC.dashedLineContainer},em.createElement(DashedLine,{className:nC.dashedLine})),em.createElement("span",{className:nC.OrText},"Or"),em.createElement("div",{className:nC.dashedLineContainer},em.createElement(DashedLine,{className:nC.dashedLine}))),em.createElement(VerticalSpacer,{multiplier:2}))},nA=observer(function(e){var t=e.model,r=e.supplementaryFlowType,n=e.supplementaryFlowLink,o=e.onSupplementaryFlowLinkClick;if(!t.emailFlowModel.flowError)return null;var a={linkHref:r===H.Props.SupplementaryFlowType.Link?n:void 0,onLinkClick:r===H.Props.SupplementaryFlowType.BuiltIn?o:void 0};return em.createElement(em.Fragment,null,em.createElement(SignUpFlowErrorAlert,{error:t.emailFlowModel.flowError}),em.createElement(VerticalSpacer,{multiplier:1}),t.emailFlowModel.isUseEmailFlowError&&em.createElement(em.Fragment,null,em.createElement(SignInWithExistingLink,__assign$2({},a)),em.createElement(VerticalSpacer,{multiplier:1})))}),nM=observer(function(e){var t=e.model,r=e.signInEmailFailureSupportUrl,n=e.onSocialSubmit,o=e.socialFirstSignupTreatment,a=e.removeFbSignupOptionTreatment;return t.socialFlowModel.isEnabled?em.createElement(nw,{signInEmailFailureSupportUrl:r,model:t.socialFlowModel,copyType:"social_signup_first"===o?"SOCIAL_FIRST_SIGNUP":"SIGNUP",isSubmitButtonsDisabled:t.emailFlowModel.payload.isLoading(),onSubmit:n,onButtonMouseEnter:t.termsModel.onHighlightStart,onButtonMouseLeave:t.termsModel.onHighlightEnd,isSocialFirstSignupTileVariant:"social_signup_first_tile"===o,removeFbSignupOptionTreatment:a}):null}),nF=observer(function(e){var t=e.model,r=e.onEmailSubmit,n=e.showLastName,o=e.trackToSLinkFollow,a=e.socialFirstSignupTreatment,i=e.supplementaryFlowType,s=e.supplementaryFlowLink,l=e.onSupplementaryFlowLinkClick;return em.createElement("div",{id:"signupFormContainer"},em.createElement(Form,{onSubmit:r,"aria-labelledby":"signUpFormTitle"},em.createElement("div",{className:nC.textFieldsContainer},em.createElement(em.Fragment,null,em.createElement(rp,{autoComplete:!0,className:nC.field,model:t.emailFlowModel.emailModel,onFocus:t.emailFlowModel.activate,qa:"txtSignupEmail"})),em.createElement("div",{className:eX(nC.extraFieldsContainer,t.emailFlowModel.isEmailActivated&&nC.show)},em.createElement(rF,{className:nC.field,model:t.emailFlowModel.passwordModel,qa:"txtSignupPassword"}),n?em.createElement(em.Fragment,null,em.createElement(rO,{autoComplete:!0,className:nC.field,model:t.emailFlowModel.nameModel,qa:"txtSignupName",label:"First Name"}),em.createElement(rO,{autoComplete:!0,className:nC.field,model:t.emailFlowModel.nameModelLast,qa:"txtSignupName",label:"Last Name"})):em.createElement(rO,{autoComplete:!0,className:nC.field,model:t.emailFlowModel.nameModel,qa:"txtSignupName"}))),("control"===a||null===a||"NOT_ASSIGNED"===a)&&em.createElement(nT,{model:t,trackToSLinkFollow:o,socialFirstSignupTreatment:a}),em.createElement(nA,{model:t,supplementaryFlowType:i,supplementaryFlowLink:s,onSupplementaryFlowLinkClick:l}),em.createElement(SubmitAuthButton,{text:t.termsModel.isExplicitToSAgreement?"Sign up":"Agree and Sign up",status:t.emailFlowSubmitButtonStatus,onMouseEnter:t.termsModel.onHighlightStart,onMouseLeave:t.termsModel.onHighlightEnd,qa:"btnSignupSubmit"})))}),nT=observer(function(e){var t=e.model,r=e.trackToSLinkFollow,n=e.socialFirstSignupTreatment;return em.createElement(ny,{className:nC.checkboxesContainer,tosTextCentered:!("social_signup_first"===n||"social_signup_first_tile"===n),model:t.termsModel,trackToSLinkFollow:r})}),nP=function(e){var t;function SignUpForm(r){var n=e.call(this,r)||this;return n.onEmailSubmit=function(){return __awaiter(n,void 0,void 0,function(){var e,r,n,o,a,i,s,l;return __generator(this,function(c){switch(c.label){case 0:return e=(s=this.props).model,r=s.onCallTrigger,n=s.trackSubmitButtonClick,o=s.onAssignEmailVerificationTreatment,[4,e.validateEmailFlow()];case 1:return a=(l=__read$2.apply(void 0,[c.sent(),2]))[0],i=l[1],null==n||n({action:"SIGNUP",email:"true"},t.formKey,i,e.termsModel.getData()),a&&(e.setEmailVerificationExperiment(null==o?void 0:o()),r(createTrigger($.SignUpEmailSubmit,e.getEmailFlowData()))),e.emailFlowModel.isEmailActivated||e.emailFlowModel.activate(),[2]}})})},n.onSocialSubmit=function(e){var r,o,a=(r=n.props).model,i=r.onCallTrigger,s=r.trackSubmitButtonClick;r.showFacebookOutageDisabledModal;var l=(o=__read$2(a.validateSocialFlow(),2))[0],c=o[1];null==s||s({action:"SIGNUP",socialType:e.type},t.formKey,c,a.termsModel.getData()),l&&i(createTrigger($.SignUpSocialFlowStart,a.getSocialFlowStartData(e)))},n.onSupplementaryFlowLinkClick=function(){n.props.onCallTrigger(q.ToSignIn)},n.formHeadingRef=em.createRef(),n}return __extends$1(SignUpForm,e),t=SignUpForm,SignUpForm.prototype.componentDidMount=function(){var e,r,n;null===(r=(e=this.props).trackFormShow)||void 0===r||r.call(e,t.formKey),null===(n=this.formHeadingRef.current)||void 0===n||n.focus()},SignUpForm.prototype.render=function(){var e,t=(e=this.props).model,r=e.trackToSLinkFollow,n=e.signInEmailFailureSupportUrl,o=e.showLastName,a=e.supplementaryFlowType,i=e.supplementaryFlowLink,s=e.hideTitle,l=e.hideTitleLink,c=e.title,u=e.titleHeadingHtmlTag,d=e.socialFirstSignupTreatment,p=e.removeFbSignupOptionTreatment,m={hideTitle:s,hideTitleLink:l,title:c,titleHeadingHtmlTag:u,supplementaryFlowLink:i,supplementaryFlowType:a,headingRef:this.formHeadingRef,onSupplementaryFlowLinkClick:this.onSupplementaryFlowLinkClick},h={model:t,showLastName:o,trackToSLinkFollow:r,supplementaryFlowType:a,supplementaryFlowLink:i,onEmailSubmit:this.onEmailSubmit,onSupplementaryFlowLinkClick:this.onSupplementaryFlowLinkClick,socialFirstSignupTreatment:d};switch(d){case"social_signup_first":case"social_signup_first_tile":return em.createElement(em.Fragment,null,em.createElement(nk,__assign$2({},m)),em.createElement(nM,{model:t,signInEmailFailureSupportUrl:n,onSocialSubmit:this.onSocialSubmit,socialFirstSignupTreatment:d,removeFbSignupOptionTreatment:p}),em.createElement(OrDivider,null),em.createElement(nF,__assign$2({},h)),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(nT,{model:t,trackToSLinkFollow:r,socialFirstSignupTreatment:d}),em.createElement(TermsOfServiceFooter,{isGDPR:t.termsModel.isGDPR}));default:return em.createElement(em.Fragment,null,em.createElement(nk,__assign$2({},m)),em.createElement(nF,__assign$2({},h)),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(nM,{model:t,signInEmailFailureSupportUrl:n,onSocialSubmit:this.onSocialSubmit,socialFirstSignupTreatment:d,removeFbSignupOptionTreatment:p}),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(TermsOfServiceFooter,{isGDPR:t.termsModel.isGDPR}))}},SignUpForm.formKey=G.NewAccount,SignUpForm=t=__decorate([observer,__metadata("design:paramtypes",[Object])],SignUpForm)}(em.PureComponent),nO={troubleshootLinkContainer:"troubleshoot_link-module_troubleshootLinkContainer__VzlWA",troubleshootLink:"troubleshoot_link-module_troubleshootLink__Y0LUK"},TroubleshootLink=function(e){var t=e.children,r=__rest(e,["children"]);return em.createElement("div",{className:nO.troubleshootLinkContainer},r.to?em.createElement(Link,__assign$2({className:nO.troubleshootLink},r),t):em.createElement(UnstyledButton,__assign$2({className:nO.troubleshootLink},r),t))},nI={noOutline:"default-module_noOutline__NUC9H"},nx=observer(function(e){var t=e.model,r=e.trackFormShow,n=e.onCallTrigger,o=em.createRef();(0,em.useEffect)(function(){null==r||r(G.ResetPassword)},[r]);var a=(0,em.useCallback)(function(){return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,t.validate()];case 1:return __read$2.apply(void 0,[e.sent(),1])[0]&&n(createTrigger($.ResetPasswordSubmit,t.getData())),[2]}})})},[t,n]);return(0,em.useEffect)(function(){var e;null===(e=o.current)||void 0===e||e.focus()},[]),em.createElement(Form,{onSubmit:a,"aria-labelledby":"passwordResetTitle"},em.createElement(BaseTitle,{linkText:"Back to sign-in",onLinkClick:function(){return n(q.ToSignIn)}},em.createElement("span",{id:"passwordResetTitle",tabIndex:-1,ref:o,className:nI.noOutline},"Password Reset")),em.createElement(MediumText,{color:"neutral60"},"Enter your email, and we’ll send you instructions on how to reset your password."),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement(rp,{qa:"txtResetPasswordEmail",model:t.emailModel,readOnly:t.payload.isLoading()}),em.createElement(VerticalSpacer,{multiplier:2}),t.payload.isError()&&em.createElement(em.Fragment,null,em.createElement(ErrorAlert,null,t.payload.getErrorMessage()||"Unable to send password reset instructions at this time. Please try again."),em.createElement(VerticalSpacer,{multiplier:1})),em.createElement(SubmitAuthButton,{qa:"btnResetPassword",status:t.payload.isLoading()?L.Loading:L.Active,text:"Send me reset instructions"}),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(TroubleshootLink,{to:"",qa:"linkForgotEmail",onClick:function(){return n(q.ToForgotEmail)}},"Forgot email?"))}),BaseContainer=function(e){var t=e.children;return em.createElement("div",{className:nS.mainContainer},t)},ResetPasswordEmailSentForm=function(e){var t=e.trackFormShow,r=e.onCallTrigger,n=em.createRef();return(0,em.useEffect)(function(){null==t||t(G.ResetPasswordEmailSent)},[t]),(0,em.useEffect)(function(){var e;null===(e=n.current)||void 0===e||e.focus()},[]),em.createElement(BaseContainer,null,em.createElement(BaseTitle,{linkText:"Back to sign-in",onLinkClick:function(){return r(q.ToSignIn)}},"Password Reset"),em.createElement(MediumText,{color:"neutral60"},"Enter your email, and we’ll send you instructions on how to reset your password."),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement(SuccessAlert,null,em.createElement(SmallText,null,em.createElement("div",{ref:n,tabIndex:-1,className:nI.noOutline},"If there's a Grammarly account connected to this email address, we’ll email you password reset instructions.",em.createElement("br",null),"If you don’t receive the email, please try again and make sure you enter the email address associated with your Grammarly account."))),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(ButtonBase,{text:"Back to sign-in",onClick:function(){return r(q.ToSignIn)}}),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(TroubleshootLink,{to:"",onClick:function(){return r(q.ToForgotEmail)}},"Forgot email?"))},ForgotEmailForm=function(e){var t=e.supportNewRequestUrl,r=e.trackFormShow,n=e.onCallTrigger,o=em.createRef();return(0,em.useEffect)(function(){null==r||r(G.ForgotEmail)},[r]),(0,em.useEffect)(function(){var e;null===(e=o.current)||void 0===e||e.focus()},[]),em.createElement(BaseContainer,null,em.createElement(BaseTitle,{linkQa:"linkBackToLogin",linkText:"Back to sign-in",onLinkClick:function(){return n(q.ToSignIn)}}),em.createElement("span",{tabIndex:-1,ref:o,className:"forgot_email-module_noOutline__hoesc"},em.createElement(H4,null,"Retrieving the email you used to sign up for Grammarly")),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(MediumText,{color:"neutral60"},em.createElement(MediumText,null,"Search every email account you use for the word “Grammarly” to find any emails we’ve sent you."),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(MediumText,{bold:!0},"You can also try this:"),em.createElement("ul",{className:"forgot_email-module_list__zBRjz"},em.createElement("li",null,"Try logging in with any and all email addresses / passwords you may have used to create an account, or that you regularly use elsewhere."),em.createElement("li",null,"Enter all email addresses you use into our"," ",em.createElement(e_.r,{href:"",onClick:function(e){e.preventDefault(),n(q.ToResetPassword)}},"password reset")," ","form (you must be logged out). If an account exists, you’ll receive an email with further details.")),"If you still can’t locate your Grammarly log-in details, please"," ",em.createElement(e_.r,{href:t,target:"_blank"},"contact support")," ","and provide the following information: last four digits of the credit card number you used for Grammarly, card network type (e.g.,\xa0VISA), the charge date, the charge amount, your PayPal email address (if you paid with PayPal)."))},nR=rf?em.useEffect:em.useLayoutEffect;function _extends$d(){return(_extends$d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var LoaderSmall=({styles:e={},...t})=>em.createElement("svg",_extends$d({width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("path",{d:"M15.948 7.086a8 8 0 10-7.861 8.913l-.016-1.445a6.554 6.554 0 116.44-7.303l1.437-.165z",fill:"#4A6EE0"})),nL=function(e){function Loader(){return null!==e&&e.apply(this,arguments)||this}return __extends$1(Loader,e),Loader.prototype.render=function(){return em.createElement("div",{className:eX("loader-module_container__8zdgw",this.props.className),"data-qa":"loader"},em.createElement("span",{className:"loader-module_preloader__6I6K1"}))},Loader}(em.PureComponent),SmallLoader=function(e){return em.createElement(LoaderSmall,__assign$2({},e,{className:eX("loader-module_spinnerAnimation__YKHq4",e.className)}))},ReCaptchaButton=function(e){var t=e.srcUrl,r=e.siteKey,n=e.onSuccess,o=e.onError,a=e.logger,i=e.action,s=__read$2((0,em.useState)(!1),2),l=s[0],c=s[1],u=(0,em.useCallback)(function(){var e,t=null===(e=window.grecaptcha)||void 0===e?void 0:e.enterprise;a.info("[ReCaptchaButton] successfully loaded reCAPTCHA enterprise instance",{action:i}),null==t||t.render("g-recaptcha",{sitekey:r,callback:"buttonCaptchaSuccess","error-callback":"buttonCaptchaError",action:i}),null==t||t.ready(function(){return c(!0)})},[c,r]),d=(0,em.useCallback)(function(e){a.info("[ReCaptchaButton] user submitted successful response to reCAPTCHA",{action:i}),n(e)},[n]),p=(0,em.useCallback)(function(){a.error("[ReCaptchaButton] reCAPTCHA encountered an error",{action:i}),null==o||o()},[o]);return nR(function(){return a.info("[ReCaptchaButton] initialize component",{action:i}),window.buttonCaptchaOnLoad=u,window.buttonCaptchaSuccess=d,window.buttonCaptchaError=p,function(){delete window.buttonCaptchaOnLoad,delete window.buttonCaptchaSuccess,delete window.buttonCaptchaError}},[]),em.createElement(em.Fragment,null,!rf&&em.createElement(e3.q,null,em.createElement("script",{type:"text/javascript",src:"".concat(t,"?onload=buttonCaptchaOnLoad&render=explicit"),async:!0,defer:!0})),em.createElement("div",{id:"g-recaptcha","data-qa":"g-recaptcha"}),!l&&em.createElement(nL,null))},nV=function(e){function CaptchaForm(){var t=null!==e&&e.apply(this,arguments)||this;return t.formHeadingRef=em.createRef(),t.onSuccess=function(e){return t.props.onSuccess(e)},t}return __extends$1(CaptchaForm,e),CaptchaForm.prototype.componentDidMount=function(){var e,t,r;null===(t=(e=this.props).trackFormShow)||void 0===t||t.call(e,CaptchaForm.formKey),null===(r=this.formHeadingRef.current)||void 0===r||r.focus()},CaptchaForm.prototype.render=function(){var e,t=(e=this.props).action,r=e.supportNewRequestUrl,n=e.siteKey,o=e.srcUrl,a=e.logger;return em.createElement(BaseContainer,null,em.createElement(BaseTitle,null,em.createElement("span",{className:"captcha-module_noOutline__MhzRx",ref:this.formHeadingRef,tabIndex:-1},"Verify that you’re human")),em.createElement(MediumText,{color:"neutral60"},"Please click the checkbox above to prove that you’re not a robot."),em.createElement("div",{className:"captcha-module_captchaButtonWrapper__pplVZ"},em.createElement(ReCaptchaButton,{logger:a.getLogger("captchaButton"),siteKey:n,srcUrl:o,onSuccess:this.onSuccess,action:t})),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement(TroubleshootLink,{to:r,openInNewWindow:!0},"Having trouble?"),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(RecaptchaTermsOfService,null))},CaptchaForm.formKey=G.Captcha,CaptchaForm}(em.PureComponent),InfoAlert=function(e){return em.createElement("div",{className:"alert-module_infoAlertContainer__BquA-"},e.children)},FlowInfo=function(e){var t=e.signInEmailFailureSupportUrl,r=e.error,n=e.socialProvider,o=e.hasEmail;return em.createElement(InfoAlert,null,getSignInMessageByErrCode(r.errCode,{socialProvider:n,hasEmail:o,signInEmailFailureSupportUrl:t}))},TextDivider=function(e){var t=e.text;return em.createElement("div",{style:{alignItems:"center",display:"flex",height:"32px",justifyContent:"center"}},em.createElement("div",{style:{borderBottom:"1px solid ".concat(eh.lV),flex:1,marginRight:"8px"}}),em.createElement(eS._N,null,t),em.createElement("div",{style:{borderBottom:"1px solid ".concat(eh.lV),flex:1,marginLeft:"8px"}}))},nN={supplementaryFlowLinkAlignment:H.SupplementaryFlowLinkAlignment.INLINE},nU={signinEmailInputLabel:"School Email",signinFormTitle:"Grammarly for Education Student Login",signinFormBodyText:"If you’ve already signed up through your school’s Grammarly for Education plan, you can access your account by logging in using your school email address.",supplementaryFlowLinkAlignment:H.SupplementaryFlowLinkAlignment.STACKED},nB={signin:__assign$2({signinEmailInputLabel:"Email",signinFormTitle:"Sign in"},nN),signup:__assign$2({},nN)},nD=__assign$2(__assign$2({},nB),{signin:__assign$2({},nU)}),getAuthFormCustomizations=function(e){return(void 0===e&&(e=H.Props.CustomizationTypes.DEFAULT),e===H.Props.CustomizationTypes.EDU)?__assign$2({},nD):__assign$2({},nB)},nG={textFieldsContainer:"signin-module_textFieldsContainer__Hy9dq",passwordContainer:"signin-module_passwordContainer__EzfyN",show:"signin-module_show__6-aXf",socialFirstTerms:"signin-module_socialFirstTerms__WcxVC",noOutline:"signin-module_noOutline__50kPn",ssoButtonContainer:"signin-module_ssoButtonContainer__u8feF",ssoButton:"signin-module_ssoButton__wdUkr"},NoAccountPrompt=function(e){var t=e.email,r=e.onCreateNewAccount,n=e.onAssignAccountNotExistTreatment;return em.createElement(eE.x,{marginTop:3,height:"auto",borderRadius:1,bgColor:"background-warning-subdued",style:{border:"0.5px solid",borderColor:"var(--color-border-warning-subdued)"}},em.createElement(eb.k,{gap:3,paddingLeft:3,paddingRight:3,paddingTop:2,paddingBottom:2},em.createElement(ew.J,{icon:eC.F,accessibilityLabel:"errorIcon",size:"large"}),em.createElement(eb.k,{direction:"column",wrap:!0},em.createElement(eg.x,{as:"p",variant:"text-small"},"We couldn't find an account for"),em.createElement(eg.x,{as:"p",variant:"text-small",weight:"semibold",className:"index_textEmail__dZJBA"},t),em.createElement(eg.x,{as:"p",variant:"text-small"},"Try another email or"," ",em.createElement(e_.r,{href:"/signup",onClick:function(){(null==n?void 0:n())==="test_signup_prefill"&&(null==r||r(t,ez.Bz.email))}}," ","create an account.")))))},nj=function(e){function SignInForm(t){var r=e.call(this,t)||this;return r.onSubmit=function(){return __awaiter(r,void 0,void 0,function(){var e,t,r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return e=(a=this.props).model,t=a.onCallTrigger,r=a.trackSubmitButtonClick,[4,e.validateEmailFlow()];case 1:return n=(i=__read$2.apply(void 0,[s.sent(),2]))[0],o=i[1],null==r||r({action:"SIGNIN",email:"true"},this.formKey,o),n&&(e.isEmailFlowInitialStep?t(createTrigger($.SignInCheckEmailSubmit,e.getEmailFlowCheckEmailData())):t(createTrigger($.SignInEmailFlowSubmit,e.getEmailFlowSubmitData()))),[2]}})})},r.onSocialSubmit=function(e){var t,n,o=(t=r.props).model,a=t.onCallTrigger,i=t.trackSubmitButtonClick,s=t.showFacebookOutageDisabledModal,l=(n=__read$2(o.validateSocialFlow(),2))[0],c=n[1];if(null==i||i({action:"SIGNIN",socialType:e.type},r.formKey,c),e.type===H.Social.Type.Facebook&&s){o.setShowFacebookLoginDisabledModal(!0);return}l&&a(createTrigger($.SignInSocialFlowStart,o.getSocialFlowStartData(e)))},r.onSupplementaryFlowLinkClick=function(){r.props.onCallTrigger(q.ToSignUp)},r.onTroubleshootLinkClick=function(){return __awaiter(r,void 0,void 0,function(){var e,t,r,n,o,a,i,s,l,c,u;return __generator(this,function(d){switch(d.label){case 0:e=(u=this.props).logger,t=u.onAssignResetPasswordTreatment,r=u.loginResetPasswordInitiateUrl,n=u.loginResetPasswordUrl,o=u.onCallTrigger,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,null==t?void 0:t()];case 2:return a=d.sent(),[3,4];case 3:return i=d.sent(),e.error("Reset password treatment assignment failure",i),[3,4];case 4:if(!a)return[3,10];d.label=5;case 5:return d.trys.push([5,8,,9]),[4,fetch(r,{body:JSON.stringify({name:"reset_password",inputParameters:{returnUrl:location.href,type:"resetPasswordInit"}}),headers:{"Content-Type":"application/json"},method:"POST"})];case 6:return s=d.sent(),e.info("[Password Reset Experiment] initiate endpoint api call success"),[4,s.json()];case 7:return l=d.sent(),window.location.href="".concat(n,"?transaction_id=").concat(l.transactionId),[3,9];case 8:return c=d.sent(),e.error("[Password Reset Experiment] initiate endpoint api call failure",c),[3,9];case 9:return[3,11];case 10:o(q.ToResetPassword),d.label=11;case 11:return[2]}})})},r.formHeadingRef=em.createRef(),r}return __extends$1(SignInForm,e),Object.defineProperty(SignInForm.prototype,"formKey",{get:function(){return this.props.model.emailFlowModel.isInitialStep?G.SignInInit:G.SignInWithPassword},enumerable:!1,configurable:!0}),SignInForm.prototype.componentDidMount=function(){var e,t,r;null===(t=(e=this.props).trackFormShow)||void 0===t||t.call(e,this.formKey),null===(r=this.formHeadingRef.current)||void 0===r||r.focus(),this.props.model.emailFlowModel.isInitialStep&&this.props.model.emailFlowModel.hasEmailValue&&this.props.model.emailFlowModel.emailModel.focus()},SignInForm.prototype.render=function(){var e,t,r,n=this,o=(e=this.props).model,a=e.hideTitle,i=e.hideTitleLink,s=e.titleHeadingHtmlTag,l=e.supplementaryFlowLink,c=e.supplementaryFlowType,u=e.signInEmailFailureSupportUrl,d=e.isSocialSignInFirstExperimentEnabled,p=(r=getAuthFormCustomizations(void 0===(t=e.customizationType)?H.Props.CustomizationTypes.DEFAULT:t).signin).signinFormTitle,m=r.signinFormBodyText,h=r.supplementaryFlowLinkAlignment,g={linkHref:c===H.Props.SupplementaryFlowType.Link?l:void 0,onLinkClick:c===H.Props.SupplementaryFlowType.BuiltIn?this.onSupplementaryFlowLinkClick:void 0},f=null!=d&&d,v=h===H.SupplementaryFlowLinkAlignment.STACKED;return em.createElement("div",{id:"signinFormContainer"},em.createElement(Form,{onSubmit:this.onSubmit,"aria-labelledby":"signInFormTitle"},!a&&em.createElement(BaseTitle,__assign$2({hideLink:i,linkText:"I don’t have an account"},g,{linkQa:"supplementaryFlowLink",headingHtmlTag:s,alignment:h}),em.createElement("span",{id:"signInFormTitle",tabIndex:-1,ref:this.formHeadingRef,className:nG.noOutline},p),v&&em.createElement(VerticalSpacer,{multiplier:1})),o.socialFlowModel.flowErrorNotice&&em.createElement(em.Fragment,null,em.createElement(FlowInfo,{signInEmailFailureSupportUrl:u,error:o.socialFlowModel.flowErrorNotice,hasEmail:o.emailFlowModel.hasEmailValue,socialProvider:o.socialFlowModel.activeProviderType}),em.createElement(VerticalSpacer,{multiplier:1})),o.socialFlowModel.isEnabled&&f&&em.createElement(em.Fragment,null,em.createElement(nw,{copyType:"SIGNIN",isSocialSignInFirstExperimentEnabled:f,isSubmitButtonsDisabled:o.emailFlowModel.payload.isLoading(),model:o.socialFlowModel,onSubmit:this.onSocialSubmit,signInEmailFailureSupportUrl:u}),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(TextDivider,{text:"OR"}),em.createElement(VerticalSpacer,{multiplier:2})),m&&em.createElement(em.Fragment,null,em.createElement(SmallText,{color:"neutral90"},m),em.createElement(VerticalSpacer,{multiplier:1})),em.createElement("div",{className:nG.textFieldsContainer},em.createElement(rp,{model:o.emailFlowModel.emailModel,qa:"txtEmail"}),em.createElement("div",{className:eX(nG.passwordContainer,!o.emailFlowModel.isInitialStep&&o.emailFlowModel.isAccountExist&&nG.show)},em.createElement(rF,{model:o.emailFlowModel.passwordModel,qa:"txtPassword"})),!o.emailFlowModel.isAccountExist&&em.createElement(NoAccountPrompt,{email:o.emailFlowModel.emailModel.value,onCreateNewAccount:this.props.onCreateNewAccount,onAssignAccountNotExistTreatment:this.props.onAssignAccountNotExistTreatment})),o.emailFlowModel.flowError&&em.createElement(em.Fragment,null,em.createElement(SignInFlowErrorAlert,{signInEmailFailureSupportUrl:u,error:o.emailFlowModel.flowError,onGotToResetPassword:this.onTroubleshootLinkClick,isSocialSignInFirstExperimentEnabled:f}),em.createElement(VerticalSpacer,{multiplier:1})),em.createElement(SubmitAuthButton,{text:o.emailFlowModel.isInitialStep?"Continue":"Sign in",status:o.emailFlowSubmitButtonStatus,qa:"btnLogin"}),em.createElement(VerticalSpacer,{multiplier:1.5}),em.createElement(TroubleshootLink,{to:"",qa:"linkForgotPassword",onClick:this.onTroubleshootLinkClick},"Can’t sign in?")),em.createElement(VerticalSpacer,{multiplier:f?4:2}),o.socialFlowModel.isEnabled&&!f&&em.createElement(em.Fragment,null,em.createElement(nw,{signInEmailFailureSupportUrl:u,model:o.socialFlowModel,copyType:"SIGNIN",isSubmitButtonsDisabled:o.emailFlowModel.payload.isLoading(),onSubmit:this.onSocialSubmit,isSocialSignInFirstExperimentEnabled:f}),"test"===this.props.dedicatedSSOSigninTreatment&&em.createElement(VerticalSpacer,{multiplier:1})),"test"===this.props.dedicatedSSOSigninTreatment&&em.createElement("div",{className:nG.ssoButtonContainer},em.createElement(ButtonBase,{color:V.WhiteHighContrastBorder,className:nG.ssoButton,onClick:function(){var e,t;n.props.onCallTrigger(q.ToContinueSSO),null===(t=(e=n.props).trackSubmitButtonClick)||void 0===t||t.call(e,{action:"SIGNIN",email:"false",isSSO:!0},n.formKey,{status:X.Valid})},icon:em.createElement(ew.J,{accessibilityLabel:"sso icon",icon:ek.g,variant:"brand",size:"small"}),text:"".concat(tl.SIGNIN," Single Sign-On"),showArrow:!0})),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement("div",{className:eX(f&&nG.socialFirstTerms)},em.createElement(RecaptchaTermsOfService,null),em.createElement(VerticalSpacer,{multiplier:1.5}),em.createElement(GrammarlyTermsOfServiceSigninLinks,null)))},SignInForm=__decorate([observer,__metadata("design:paramtypes",[Object])],SignInForm)}(em.PureComponent),TextAreaFieldBase=function(e){var t=e.qa,r=e.className,n=e.onChange,o=e.onFocus,a=e.onBlur,i=__rest(e,["qa","className","onChange","onFocus","onBlur"]);return em.createElement("textarea",__assign$2({"data-qa":t,className:eX(rs.input,r),onChange:n,onFocus:o,onBlur:a},i))},nq={inputAndPlaceholderContainer:"default_text_area-module_inputAndPlaceholderContainer__HmBxO",inputAndSuffixContainer:"default_text_area-module_inputAndSuffixContainer__q45Og",input:"default_text_area-module_input__fUuyf",label:"default_text_area-module_label__vG4dm",minimized:"default_text_area-module_minimized__r-WMB",messageContainer:"default_text_area-module_messageContainer__OZaQM",show:"default_text_area-module_show__RmLia",message:"default_text_area-module_message__-c-fw",error:"default_text_area-module_error__J6iLh"},TextAreaFieldDefault=function(e){var t=e.onChange,r=e.onFocus,n=e.onBlur,o=e.label,a=e.validity,i=void 0===a?{status:X.Valid}:a,s=i.status,l=i.message,c=__rest(e,["onChange","onFocus","onBlur","label","validity"]),u=__read$2(em.useState(c.autoFocus),2),d=u[0],p=u[1],m=!d&&(s===X.Invalid||s===X.Required),h=d||!!c.value;return em.createElement("div",{className:eX(m&&nq.error)},em.createElement("div",{className:nq.inputAndPlaceholderContainer},em.createElement("label",{className:eX(nq.label,h&&nq.minimized),htmlFor:c.name},o),em.createElement("div",{className:nq.inputAndSuffixContainer},em.createElement(TextAreaFieldBase,__assign$2({className:nq.input},c,{onChange:function(e){return t(e.target.value)},onFocus:function(e){p(!0),null==r||r(e)},onBlur:function(e){p(!1),null==n||n(e)}})))),em.createElement("div",{className:eX(nq.messageContainer,l&&m&&nq.show)},em.createElement("div",{className:nq.message},l)))},n$=observer(function(e){var t=e.model,r=__rest(e,["model"]);return em.createElement(TextAreaFieldDefault,__assign$2({validity:t.validity,value:t.value,onChange:t.setValue,onBlur:t.onBlur},r))}),nH=observer(function(e){var t=e.model,r=e.trackFormShow,n=e.onCallTrigger,o=(0,em.useCallback)(function(){t.validate()&&n(createTrigger($.SupportRequestSubmit,t.getData()))},[t,n]),a=(0,em.useCallback)(function(){n(q.ToSignIn)},[n]);return(0,em.useEffect)(function(){null==r||r(G.SupportRequest)},[r]),em.createElement(Form,{onSubmit:o},em.createElement(BaseTitle,{linkText:"Back to sign-in",onLinkClick:a}),em.createElement(H4,null,"It will take several business days to get back into your account using Grammarly’s help."),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(MediumText,{color:"neutral60"},"Grammarly wants to make sure that you - and not somebody who stole your password and is pretending to be you - are the one trying to get into your account. This process requires at least 5 days."),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(MediumText,{color:"neutral60"},"If you’re sure you don’t have access to any of your second step verification methods, please give us a brief description of your problem and we will get back to you."),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(n$,{name:"request",rows:5,label:"Please describe your issue",model:t.textModel,autoFocus:!0}),em.createElement(VerticalSpacer,{multiplier:2}),t.payload.isError()&&em.createElement(em.Fragment,null,em.createElement(ErrorAlert,null,"Unable to send support request. Please wait a moment and try again."),em.createElement(VerticalSpacer,{multiplier:1})),em.createElement(SubmitAuthButton,{status:t.payload.isLoading()?L.Loading:L.Active,text:"Submit request"}))}),SupportRequestSentForm=function(e){var t=e.trackFormShow,r=e.onCallTrigger;return(0,em.useEffect)(function(){null==t||t(G.SupportRequestSent)},[t]),em.createElement(BaseContainer,null,em.createElement(BaseTitle,{linkText:"Back to sign-in",onLinkClick:function(){return r(q.ToSignIn)}},"We’ve got your request"),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement(SuccessAlert,null,em.createElement(SmallText,null,"Please allow several business days for one of our representatives to contact you.")),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(ButtonBase,{text:"Back to sign-in",onClick:function(){return r(q.ToSignIn)}}))};function _extends$c(){return(_extends$c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Arrow=({styles:e={},...t})=>em.createElement("svg",_extends$c({"aria-hidden":"true",width:"9",height:"16",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("path",{d:"M1.53 1l6.147 6.994L2.07 14.6",stroke:"#4C7AF1",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}));function _extends$b(){return(_extends$b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var TotpIcon=({styles:e={},...t})=>em.createElement("svg",_extends$b({"aria-hidden":"true",width:"18",height:"25",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("g",{fill:"none",fillRule:"evenodd"},em.createElement("path",{d:"M3.564 1h10.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v17.873c0 .892-.093 1.215-.267 1.54a1.81 1.81 0 01-.756.757c-.326.174-.65.267-1.54.267H3.563c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 01-.757-.756c-.174-.326-.267-.65-.267-1.54V3.563c0-.892.093-1.215.267-1.54a1.81 1.81 0 01.756-.757c.326-.174.65-.267 1.54-.267z",stroke:"#1C1E29",strokeWidth:"2",fill:"#FFF",fillRule:"nonzero"}),em.createElement("path",{d:"M4 2h10a1 1 0 00-1 1 1 1 0 01-1 1H6a1 1 0 01-1-1 1 1 0 00-1-1z",fill:"#1C1E29",fillRule:"nonzero"}),em.createElement("path",{d:"M5.5 12.5V16A1.5 1.5 0 007 17.5h4a1.5 1.5 0 001.5-1.5v-3.5h-7zm1 0h5V11a2.5 2.5 0 00-5 0v1.5z",stroke:"#1C1E29"})));function _extends$a(){return(_extends$a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var BackupIcon=({styles:e={},...t})=>em.createElement("svg",_extends$a({"aria-hidden":"true",width:"25",height:"20",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("g",{transform:"translate(1 1)",fill:"none",fillRule:"evenodd"},em.createElement("path",{stroke:"#1C1E29",strokeWidth:"2",fill:"#FFF",fillRule:"nonzero",d:"M23 3v15H3"}),em.createElement("path",{stroke:"#1C1E29",strokeWidth:"2",fill:"#FFF",fillRule:"nonzero",d:"M0 0h19v14H0z"}),em.createElement("rect",{fill:"#1C1E29",x:"3",y:"5",width:"1",height:"4",rx:".5"}),em.createElement("rect",{fill:"#1C1E29",x:"5",y:"5",width:"1",height:"4",rx:".5"}),em.createElement("rect",{fill:"#1C1E29",x:"7",y:"5",width:"1",height:"4",rx:".5"}),em.createElement("rect",{fill:"#1C1E29",x:"11",y:"5",width:"1",height:"4",rx:".5"}),em.createElement("rect",{fill:"#1C1E29",x:"13",y:"5",width:"1",height:"4",rx:".5"}),em.createElement("rect",{fill:"#1C1E29",x:"15",y:"5",width:"1",height:"4",rx:".5"})));function _extends$9(){return(_extends$9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var SupportIcon=({styles:e={},...t})=>em.createElement("svg",_extends$9({"aria-hidden":"true",width:"22",height:"22",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("g",{transform:"translate(1 1)",fill:"none"},em.createElement("circle",{stroke:"#1C1E29",strokeWidth:"2",fill:"#FFF",cx:"10",cy:"10",r:"10"}),em.createElement("path",{d:"M13.076 7.66c0 1.12-.56 1.876-1.512 2.576-.896.658-.994 1.064-.994 1.918v.35H9.422v-.392c0-1.498.462-1.988 1.568-2.842.56-.434.854-.868.854-1.624 0-.42-.154-.784-.42-1.064-.308-.322-.784-.504-1.288-.504-1.218 0-1.876.91-1.876 2.002H7C7 6.498 8.078 5 10.136 5c1.582 0 2.94.994 2.94 2.66zm-2.352 7.49H9.24v-1.54h1.484v1.54z",fill:"#1C1E29"})));function _extends$8(){return(_extends$8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var PhoneIcon=({styles:e={},...t})=>em.createElement("svg",_extends$8({"aria-hidden":"true",width:"23",height:"24",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("g",{fill:"none",fillRule:"evenodd"},em.createElement("path",{d:"M22 14.933v7L15.838 17H3a2 2 0 01-2-2V3a2 2 0 012-2h17a2 2 0 012 2v11.933z",stroke:"#1C1E29",strokeWidth:"2"}),em.createElement("path",{fill:"#1C1E29",d:"M5 7h13v1H5zm0 3h13v1H5z"})));function _extends$7(){return(_extends$7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var PhoneIconDisabled=({styles:e={},...t})=>em.createElement("svg",_extends$7({"aria-hidden":"true",width:"23",height:"24",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("g",{fill:"none",fillRule:"evenodd"},em.createElement("path",{d:"M22 14.933v7L15.838 17H3a2 2 0 01-2-2V3a2 2 0 012-2h17a2 2 0 012 2v11.933z",stroke:"#A6ADC9",strokeWidth:"2"}),em.createElement("path",{fill:"#A6ADC9",d:"M5 7h13v1H5zm0 3h13v1H5z"})));function _extends$6(){return(_extends$6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var WarningIcon=({styles:e={},...t})=>em.createElement("svg",_extends$6({"aria-hidden":"true",width:"13",height:"11",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("g",{fill:"none",fillRule:"evenodd"},em.createElement("path",{fill:"#F6BC41",d:"M6.5 0L13 11H0z"}),em.createElement("path",{fill:"#FFF",d:"M6 4h1v3H6z"}),em.createElement("path",{stroke:"#FFF",strokeWidth:".5",fill:"#FFF",d:"M6 8h1v1H6z"}))),nW={method:"mode_list-module_method__3Wiwn",iconWrapper:"mode_list-module_iconWrapper__Z0cM8",methodInfo:"mode_list-module_methodInfo__xtSVL",disabledMethod:"mode_list-module_disabledMethod__K9KX1",phoneNumber:"mode_list-module_phoneNumber__xa-rT",mfaMethodsList:"mode_list-module_mfaMethodsList__wKpYF"},onItemClick=function(e){var t,r;e.isDisabled||(null===(t=null==e?void 0:e.tracking)||void 0===t||t.call(e),null===(r=e.action)||void 0===r||r.call(e))},nz=observer(function(e){var t=e.disableSms,r=e.mfaModesEnabled,n=e.phoneNumber,o=e.tracking,a=e.onShowSupport,i=e.onSwitchMode,s=[r.has(H.MfaSettings.Mode.phone)&&{isDisabled:t,key:H.MfaSettings.Mode.phone,Icon:t?PhoneIconDisabled:PhoneIcon,method:H.MfaSettings.Mode.phone,name:em.createElement("span",null,"Get a verification code at ",em.createElement("span",{className:nW.phoneNumber},n)),text:t?em.createElement(em.Fragment,null,em.createElement(WarningIcon,null),"Too many verification codes already sent."):"Standard messaging rates apply",tracking:function(){var e;return null===(e=null==o?void 0:o.trackSmsMethodButtonClick)||void 0===e?void 0:e.call(o)},action:function(){return i(H.MfaSettings.Mode.phone)}},r.has(H.MfaSettings.Mode.totp)&&{key:H.MfaSettings.Mode.totp,Icon:TotpIcon,method:H.MfaSettings.Mode.totp,name:"Verify with an app",text:"Get a verification from an authentication app",tracking:function(){var e;return null===(e=null==o?void 0:o.trackTotpMethodButtonClick)||void 0===e?void 0:e.call(o)},action:function(){return i(H.MfaSettings.Mode.totp)},qa:"useVerificationCode"},{key:H.MfaSettings.Mode.backup,Icon:BackupIcon,name:"Enter a backup code",text:"Use previously saved backup codes to sign in",tracking:function(){var e;return null===(e=null==o?void 0:o.trackBackupCodeMethodButtonClick)||void 0===e?void 0:e.call(o)},action:function(){return i(H.MfaSettings.Mode.backup)},qa:"enterBackupCode"},{key:"support-request",Icon:SupportIcon,name:"Contact Support",text:"Please allow several business days for a response.",tracking:function(){var e;return null===(e=null==o?void 0:o.trackContactSupportMethodButtonClick)||void 0===e?void 0:e.call(o)},action:function(){return a()}}].filter(Boolean);return em.createElement(em.Fragment,null,em.createElement(H5,{textAlign:"center"},"Try another way to sign in"),em.createElement(VerticalSpacer,{multiplier:3}),em.createElement("ul",{"aria-label":"Two-step verification methods",className:nW.mfaMethodsList},s.map(function(e){var t=e.Icon;return e?em.createElement("li",{className:eX(nW.method,e.isDisabled&&nW.disabledMethod),"data-qa":e.qa,key:e.key,onClick:function(){return onItemClick(e)},tabIndex:0},em.createElement("div",{className:nW.iconWrapper},em.createElement(t,null)),em.createElement("div",{className:nW.methodInfo},em.createElement(SmallText,null,e.name),em.createElement(VerticalSpacer,{multiplier:.5}),em.createElement(XSmallText,{color:"neutral50"},e.text)),em.createElement(Arrow,null)):null})))}),nK=function(e){function Progress(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={score:1,isAnimation:!1},t.startAnimation=function(){if(!t.state.isAnimation){var e=t.props.score||100,r=t.props.interval;t.setState({score:1,isAnimation:!0},function(){return t.doAnimation(e,r)})}},t.doAnimation=function(e,r){t.state.score<e?(t.setState(function(e){return{score:e.score+1}}),t.timeoutId=window.setTimeout(function(){return t.doAnimation(e,r)},r/e)):t.setState({isAnimation:!1})},t}return __extends$1(Progress,e),Progress.prototype.componentWillUnmount=function(){this.timeoutId&&clearTimeout(this.timeoutId)},Progress.prototype.render=function(){var e=this.props.radius,t=e*Math.PI;return em.createElement("div",{className:this.props.className},em.createElement("svg",{fill:"none",width:2*e,height:2*e,onClick:this.startAnimation},em.createElement("circle",{stroke:"#EFF0F7",cx:e,cy:e,r:e/2,strokeWidth:e}),em.createElement("circle",{stroke:"#C6CBDE",cx:e,cy:e,r:e/2,strokeWidth:e,strokeDasharray:"".concat(t*this.state.score/100," ").concat(t),transform:"rotate(-90, ".concat(e,", ").concat(e,")")})))},Progress}(em.PureComponent),nZ={tooltip:"base-module_tooltip__voYXG",visible:"base-module_visible__-d6hT",tooltipContainer:"base-module_tooltipContainer__d3vA0",tooltipArrow:"base-module_tooltipArrow__yCq38",tooltipTrigger:"base-module_tooltipTrigger__20Xxv",placementTop:"base-module_placementTop__m-kcR",placementBottom:"base-module_placementBottom__pzMwS"},TooltipArrow=function(e){var t=e.positionPercent;return em.createElement("span",{className:nZ.tooltipArrow,style:{left:"".concat(t,"%")}})},nX=function(e){function TooltipBase(){var t=null!==e&&e.apply(this,arguments)||this;return t.tooltipContainerRef=em.createRef(),t.state={x:0},t}return __extends$1(TooltipBase,e),TooltipBase.prototype.componentDidMount=function(){this.setX()},TooltipBase.prototype.componentDidUpdate=function(){this.setX()},TooltipBase.prototype.setX=function(){var e=this.tooltipContainerRef.current;if(e){var t=this.getXOffset(e.getBoundingClientRect().width);t!==this.state.x&&this.setState({x:t})}},TooltipBase.prototype.getOffsetFromPercent=function(e,t,r){void 0===r&&(r="center");var n=Math.round(e*t/100);return this.getOffsetFromPx(e,n,r)},TooltipBase.prototype.getOffsetFromPx=function(e,t,r){switch(void 0===r&&(r="center"),r){case"left":return 0;case"right":return e-t;case"center":return(e-t)/2}},TooltipBase.prototype.getXOffset=function(e){var t=this.props,r=t.alignment;return t.widthPx?this.getOffsetFromPx(e,this.width,r):this.getOffsetFromPercent(e,this.width,r)},Object.defineProperty(TooltipBase.prototype,"width",{get:function(){var e=this.props,t=e.widthPx,r=e.widthPercent;return t||r||100},enumerable:!1,configurable:!0}),Object.defineProperty(TooltipBase.prototype,"widthWithUnits",{get:function(){return this.props.widthPx?"".concat(this.width,"px"):"".concat(this.width,"%")},enumerable:!1,configurable:!0}),TooltipBase.prototype.render=function(){var e=this.props,t=e.placement,r=e.arrowPositionPercent,n=e.hideArrow,o=e.visible;return em.createElement("div",{className:nZ.tooltipTrigger,ref:this.tooltipContainerRef},this.props.children,em.createElement("span",{style:{width:this.widthWithUnits,left:this.state.x},className:eX(nZ.tooltip,o&&nZ.visible,"top"===t?nZ.placementTop:nZ.placementBottom),role:"tooltip"},!n&&em.createElement(TooltipArrow,{positionPercent:r||50}),this.props.content))},TooltipBase}(em.Component),TooltipDefault=function(e){var t=__read$2(em.useState(!1),2),r=t[0],n=t[1],o=em.useCallback(function(){return n(!0)},[]),a=em.useCallback(function(){return n(!1)},[]);return em.createElement("div",{className:nZ.tooltipContainer,onMouseEnter:o,onMouseLeave:a,onFocus:o,onBlur:a},em.createElement(nX,__assign$2({visible:r},e)))};function _extends$5(){return(_extends$5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var BackupIllustration=({styles:e={},...t})=>em.createElement("svg",_extends$5({"aria-hidden":"true",width:"99",height:"96",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("g",{fill:"none",fillRule:"evenodd"},em.createElement("path",{d:"M53 92c25.405 0 46-16.458 46-46 0-12.21-3-26.1-10.763-34.336C79.849 2.765 66.194 0 53 0 27.595 0 4.497 16.103 7 46s20.595 46 46 46z",fill:"#F9FAFF"}),em.createElement("path",{d:"M76.78 86.357C80.45 74.852 82.522 68.13 83 66.19c.717-2.91-1.498-8.391-6.22-10.623-4.721-2.23-30.184 2.758-27.232 10.623C51.516 71.433 53 74.055 54 74.055V92c4.875-.224 8.95-.777 12.221-1.659 3.273-.881 6.792-2.209 10.56-3.984z",fill:"#E4E6F2"}),em.createElement("path",{d:"M65 52.933l12.489 5.862a7 7 0 013.663 8.56l-7.117 21.241M53 55.936l-3.843 7.866a6 6 0 001.439 7.148L53 73.055v-17.12z",stroke:"#3B3E4D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("g",{transform:"rotate(7 -27.4 63.2)"},em.createElement("rect",{fill:"#FFF",x:"3.465",y:"3.605",width:"72",height:"53",rx:"2"}),em.createElement("path",{stroke:"#3B3E4D",strokeWidth:"2",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",d:"M0 0h72v53H0z"}),em.createElement("g",{transform:"translate(8 8)"},em.createElement("rect",{fill:"#68DEC2",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#F1F2FA",x:"9",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#F1F2FA",x:"42",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#F1F2FA",x:"51",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#F1F2FA",x:"18",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#F1F2FA",x:"33",width:"6",height:"8",rx:"1"}),em.createElement("path",{fill:"#F1F2FA",d:"M27 3h3v2h-3z"})),em.createElement("g",{transform:"translate(8 22)"},em.createElement("rect",{fill:"#F1F2FA",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#68DEC2",x:"9",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#68DEC2",x:"42",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#F1F2FA",x:"51",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#F1F2FA",x:"18",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#68DEC2",x:"33",width:"6",height:"8",rx:"1"}),em.createElement("path",{fill:"#F1F2FA",d:"M27 3h3v2h-3z"})),em.createElement("g",{transform:"translate(8 36)"},em.createElement("rect",{fill:"#F1F2FA",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#F1F2FA",x:"9",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#68DEC2",x:"18",width:"6",height:"8",rx:"1"}),em.createElement("rect",{fill:"#F1F2FA",x:"33",width:"6",height:"8",rx:"1"}),em.createElement("path",{fill:"#F1F2FA",d:"M27 3h3v2h-3z"}))),em.createElement("path",{d:"M58.176 47.864a5.5 5.5 0 015.5 5.5v18.5h-11v-18.5a5.5 5.5 0 015.5-5.5z",fill:"#E4E6F2"}),em.createElement("path",{d:"M53.734 94.21h0A13.398 13.398 0 0153 89.835V51.973C53 49.227 55.178 47 57.865 47c2.686 0 4.864 2.227 4.864 4.973l-.075 15.94A6.883 6.883 0 0065 73.122h0",stroke:"#3B3E4D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),nY={containerCenter:"mfa-module_containerCenter__pcvaq",emailLabel:"mfa-module_emailLabel__wyPdw",illustrationWrapper:"mfa-module_illustrationWrapper__rg7iC",mfaIllustration:"mfa-module_mfaIllustration__nE0R1",backupIllustration:"mfa-module_backupIllustration__fwVFR",resendableMode:"mfa-module_resendableMode__-zC2m",links:"mfa-module_links__4UfbP",link:"mfa-module_link__SpwxL",resendCodeWrapper:"mfa-module_resendCodeWrapper__5WWUu",progress:"mfa-module_progress__aZYad",hide:"mfa-module_hide__jJb0S",disabledLink:"mfa-module_disabledLink__ktX4i",input:"mfa-module_input__RMajP",noOutline:"mfa-module_noOutline__NYgXp"},nJ=observer(function(e){var t=e.model;return em.createElement(em.Fragment,null,em.createElement("div",{className:nY.illustrationWrapper},em.createElement(BackupIllustration,{className:nY.backupIllustration})),em.createElement("input",{"data-qa":"backupCodeInput",className:nY.input,autoFocus:!0,type:"text",pattern:"[A-Za-z0-9]*",autoComplete:"one-time-code",value:t.code,onChange:function(e){return t.setCode(e.target.value)},inputMode:"text",placeholder:"Backup code"}),em.createElement(SmallText,{textAlign:"center"},"Enter one of the backup codes you previously created."),em.createElement(VerticalSpacer,{multiplier:3}),em.createElement("div",{className:nY.containerCenter},em.createElement(CheckboxDefault,{checked:t.isSaveBrowser,label:em.createElement(XSmallText,{color:"neutral50"},"Don’t ask for codes on this browser"),handleChange:t.setIsSaveBrowser,name:"SaveBrowser"})))}),nQ={input:"input_code-module_input__jqKRo",container:"input_code-module_container__nfhtN",third:"input_code-module_third__GIYqy"};(C=ei||(ei={}))[C.BackSpace=8]="BackSpace",C[C.LeftArrow=37]="LeftArrow",C[C.RightArrow=39]="RightArrow";var n0=function(e){function CodeInput(){var t=null!==e&&e.apply(this,arguments)||this;return t.fieldCount=6,t.lockInputs=!1,t.inputs=Array(t.fieldCount).fill(function(){return em.createRef()}).map(function(e){return e()}),t.state={values:Array(t.fieldCount).fill("")},t.updateValues=function(e,r){t.setState(function(n){return{values:t.replaceValues(n.values,e,r)}},function(){t.props.onChange(t.getCode())})},t.replaceValues=function(e,r,n){var o=""===n?[""]:n.substring(0,t.fieldCount-r).split("");return t.splice(e,r,o)},t.splice=function(e,t,r){var n=e.slice();return n.splice.apply(n,__spreadArray([t,r.length],__read$2(r),!1)),n},t.clearCode=function(){t.setState({values:Array(t.fieldCount).fill("")}),t.goto(0)},t.getCode=function(){return t.state.values.join("")},t}return __extends$1(CodeInput,e),CodeInput.prototype.componentDidUpdate=function(e){this.props.shouldClearCode&&!e.shouldClearCode&&this.clearCode()},CodeInput.prototype.goto=function(e){var t=this.inputs[Math.max(0,Math.min(this.fieldCount-1,e))];t.current.focus(),t.current.select()},CodeInput.prototype.handleChange=function(e,t){if(!this.lockInputs){var r=e.target.value.replace(/[^\d]/g,"");this.updateValues(t,r),this.goto(Math.min(t+r.length,this.fieldCount))}},CodeInput.prototype.handleKeyDown=function(e,t){if(!this.lockInputs){var r=e.keyCode;r===ei.BackSpace?(e.preventDefault(),this.updateValues(t,""),this.goto(t-1)):r===ei.LeftArrow?(e.preventDefault(),this.goto(t-1)):r===ei.RightArrow&&(e.preventDefault(),this.goto(t+1))}},CodeInput.prototype.render=function(){var e=this;return em.createElement("div",{className:nQ.container},this.inputs.map(function(t,r){return em.createElement("input",{"aria-invalid":e.props.invalid,"aria-labelledby":"codeInputErrorMsg","aria-label":"Enter a ".concat(e.fieldCount," digit code"),autoComplete:"one-time-code",autoFocus:0===r,className:eX(nQ.input,2===r&&nQ.third),"data-qa":"txtCodes".concat(r),disabled:e.props.disabled,inputMode:"numeric",key:"input_".concat(r),onChange:function(t){return e.handleChange(t,r)},onFocus:function(e){return e.target.select()},onKeyDown:function(t){return e.handleKeyDown(t,r)},pattern:"[0-9]*",ref:t,type:"text",value:e.state.values[r]})}))},CodeInput}(em.Component);function _extends$4(){return(_extends$4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var EmailVerification=({styles:e={},...t})=>em.createElement("svg",_extends$4({"aria-hidden":"true",width:"106",height:"98",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("g",{fill:"none",fillRule:"evenodd"},em.createElement("path",{d:"M103.472 39.48C87.095-4.36 50.952-4.36 25.564 4.94.176 14.241-7.751 42 8.378 78.146c19.558 43.833 111.47 5.173 95.094-38.667z",fill:"#F9FAFF"}),em.createElement("path",{d:"M94.378 72.146h-82v-44a4 4 0 014-4h74a4 4 0 014 4v30m0 3.978v2.022",stroke:"#3B3E4D",strokeWidth:"2",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("g",{transform:"translate(42.095 38.98)"},em.createElement("path",{stroke:"#3B3E4D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4.5l7.025 5L18 4.536"}),em.createElement("rect",{stroke:"#3B3E4D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",y:".5",width:"23",height:"16",rx:"2"}),em.createElement("rect",{fill:"#68DEC2",style:{mixBlendMode:"multiply"},x:"3",y:"4.5",width:"23",height:"16",rx:"2"})),em.createElement("path",{d:"M12.942 78.146h-2.564a2 2 0 01-2-2v-2a2 2 0 012-2h86a2 2 0 012 2v2a2 2 0 01-2 2H20.416",stroke:"#3B3E4D",strokeWidth:"2",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"})));function _extends$3(){return(_extends$3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var MfaIllustration=({styles:e={},...t})=>em.createElement("svg",_extends$3({"aria-hidden":"true",width:"93",height:"93",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("g",{fill:"none",fillRule:"evenodd"},em.createElement("path",{d:"M47 92c25.405 0 46-16.458 46-46 0-12.21-3-26.1-10.763-34.336C73.849 2.765 60.194 0 47 0 21.595 0-1.503 16.103 1 46s20.595 46 46 46z",fill:"#F9FAFF"}),em.createElement("path",{d:"M81 78.434c-3.854-5.034-7.074-10.771-8.166-15.582-.678-2.985.06-10.923 1.2-17.378.695-3.946 2.147-7.872 1.748-8.213-1.052-.9-4.91-1.668-9.282 3.087-4.372 4.754-37.075-7.956-38.122-9.088-.698-.754-2.157-2.206-4.378-4.354h-2.442l-1.515 1.205-.56 2.438 1.212 3.343L24 37.982l.378 8.328v19.75c.852 3.845 2.732 6.988 5.64 9.427 2.907 2.44 7.133 3.007 12.68 1.702 7.406 5.337 12.252 9.924 14.538 13.76C67.358 88.903 75.214 84.833 81 78.434z",fill:"#E4E6F2"}),em.createElement("path",{d:"M35 10h25a7 7 0 017 7v52a8 8 0 01-8 8H35a7 7 0 01-7-7V17a7 7 0 017-7z",fill:"#FFF",fillRule:"nonzero"}),em.createElement("path",{d:"M57.715 92a101.007 101.007 0 00-4.507-5.523c-1.36-1.532-3.052-3.161-5.077-4.888a100.142 100.142 0 00-5.844-4.587m27.379-40.683c5.098-1.223 3.02.685 1.213 12.863-1.807 12.177-.5 15.02 1.358 19.244.531 1.208 1.813 3.164 3.845 5.869 1.13 1.503 2.769 3.542 4.918 6.116",stroke:"#3B3E4D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("path",{d:"M29.348 30.962V15.178a6 6 0 016-6h23a6 6 0 016 6v56a6 6 0 01-6 6h-23a5.981 5.981 0 01-4.257-1.772"}),em.createElement("path",{d:"M24.4 38.328l-4.29-5.237a4.287 4.287 0 01.04-5.483 3.256 3.256 0 014.806-.186c1.547 1.568 2.607 2.5 3.38 3.284M28.378 43V14.936a6 6 0 016-6h23a6 6 0 016 6v56a6 6 0 01-6 6h-23c-2.173 0-6 .525-6-7.075v-2.183",stroke:"#3B3E4D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("path",{d:"M45.378 33.936h5a6 6 0 016 6v12a5 5 0 01-5 5h-4a5 5 0 01-5-5v-15a3 3 0 013-3z",fill:"#68DEC2",style:{mixBlendMode:"multiply"}}),em.createElement("path",{d:"M46.378 32.936h0a4 4 0 014 4v5h-8v-5a4 4 0 014-4z",stroke:"#3B3E4D",strokeWidth:"2",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("path",{d:"M24.378 46.936c.131-2.003 1.05-3.005 2.76-3.005h3.686c1.835.267 2.752 1.769 2.752 4.505 0 1.933-1.44 3.5-3.219 3.5h-3.22",stroke:"#3B3E4D",strokeWidth:"2",fill:"#E4E6F2",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("path",{d:"M24.378 54.936c.131-2.003 1.05-3.005 2.76-3.005h3.686c1.835.267 2.752 1.769 2.752 4.505 0 1.933-1.44 3.5-3.219 3.5h-3.22m.001 0h3.686c1.835.267 2.752 1.768 2.752 4.505 0 1.933-1.44 3.5-3.219 3.5h-3.22c-1.523 0-2.759-1.344-2.759-3v-2",stroke:"#3B3E4D",strokeWidth:"2",fill:"#E4E6F2",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("path",{d:"M39.878 14.436h11.184",stroke:"#3B3E4D",strokeWidth:"2",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("path",{d:"M40.378 41.936h12a1 1 0 011 1v6a4 4 0 01-4 4h-6a4 4 0 01-4-4v-6a1 1 0 011-1z",stroke:"#3B3E4D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),n1=observer(function(e){var t=e.model,r=t.currentMode===H.MfaSettings.Mode.email;return em.createElement(em.Fragment,null,em.createElement("div",{className:nY.illustrationWrapper},r?em.createElement(EmailVerification,{className:nY.mfaIllustration}):em.createElement(MfaIllustration,{className:nY.mfaIllustration})),em.createElement("div",{className:nY.containerCenter},em.createElement(n0,{onChange:t.setCode})),em.createElement(SmallText,{textAlign:"center"},t.isResendableCode?em.createElement(em.Fragment,null,"Verification code was sent to"," ",em.createElement("span",{className:nY.resendableMode},em.createElement(SpanCustomText,{color:"green60"},r?t.email:t.phoneNumber),"."),em.createElement("br",null),"Enter the code above to continue."):"Enter verification code from Authenticator App."),em.createElement(VerticalSpacer,{multiplier:5}),!r&&em.createElement("div",{className:nY.containerCenter},em.createElement(eA.XZ,{isSelected:t.isSaveBrowser,onChange:t.setIsSaveBrowser,name:"SaveBrowser"},em.createElement(eg.x,{as:"span",variant:"text-xsmall",color:"base-subdued"},"Don't ask again on this device"))))}),n2=observer(function(e){var t=e.model,r=e.tracking,n=e.supportNewRequestUrl,o=em.createRef(),a=t.currentMode===H.MfaSettings.Mode.email,i=t.currentMode===H.MfaSettings.Mode.backup;return(0,em.useEffect)(function(){return t.startCountdown(o),function(){return t.clearTimer()}},[t,t.currentView]),em.createElement(Form,{onSubmit:t.onSubmitCode},i?em.createElement(nJ,{model:t}):em.createElement(n1,{model:t}),em.createElement(VerticalSpacer,{multiplier:2}),t.errorMsg&&em.createElement(em.Fragment,null,em.createElement(ErrorAlert,null,t.errorMsg),em.createElement(VerticalSpacer,{multiplier:2})),em.createElement(SubmitAuthButton,{qa:"btnLogin",text:a?"Next":"Sign in securely",status:t.codeSubmitButtonStatus}),em.createElement("div",{className:nY.links},t.isResendableCode&&em.createElement("div",{className:nY.resendCodeWrapper},em.createElement(nK,{ref:o,radius:8,interval:t.intervalBetweenSMS,className:t.disableResend?nY.progress:nY.hide}),em.createElement(TooltipDefault,{placement:"top",widthPx:170,content:t.disableResend?"Please wait 30 seconds to resend the code.":"Click to resend the code."},em.createElement(Link,{to:"",className:t.disableResend?nY.disabledLink:nY.link,onClick:function(e){var n;e.preventDefault(),null===(n=null==r?void 0:r.trackResendSMSCodeButtonClick)||void 0===n||n.call(r),t.resendCode(o)}},"Resend the code")),em.createElement(em.Fragment,null,"\xa0 \xb7 \xa0")),a?em.createElement(Link,{className:nY.link,onClick:function(){var e;null===(e=null==r?void 0:r.trackEmailVerificationContactSupportButtonClick)||void 0===e||e.call(r)},to:n,openInNewWindow:!0},"Contact support"):em.createElement(Link,{to:"",testId:"tryAnotherWay",className:nY.link,onClick:function(e){var n;e.preventDefault(),null===(n=null==r?void 0:r.trackTryAnotherWayMfaButtonClick)||void 0===n||n.call(r),t.setView(ee.OtherMethods)}},"Try another way")))}),n3=function(e){var t;function MfaForm(t){var r=e.call(this,t)||this;return r.progress=em.createRef(),r.onSwitchMode=function(e){r.props.model.switchMode(e)},r.onBackToSignIn=function(){r.props.onCallTrigger(q.ToSignIn)},r.onSupportRequest=function(){r.props.onCallTrigger(q.ToSupportRequest)},r.formHeadingRef=em.createRef(),r}return __extends$1(MfaForm,e),t=MfaForm,MfaForm.prototype.componentDidMount=function(){var e,r,n;null===(r=(e=this.props).trackFormShow)||void 0===r||r.call(e,t.formKey),null===(n=this.formHeadingRef.current)||void 0===n||n.focus()},MfaForm.prototype.render=function(){var e=this.props.model;return em.createElement(BaseContainer,null,em.createElement(BaseTitle,{linkText:"Back to sign-in",onLinkClick:this.onBackToSignIn},em.createElement("span",{id:"mfaFormTitle",tabIndex:-1,ref:this.formHeadingRef,className:nY.noOutline},"Two-Step Verification")),em.createElement(SmallText,{color:"neutral50",textAlign:"center"},em.createElement("span",{className:nY.emailLabel,title:e.email},"You’re signing in as ",e.email)),em.createElement(VerticalSpacer,{multiplier:5}),e.currentView===ee.Code?this.renderCodeForm():this.renderOtherMethods())},MfaForm.prototype.renderCodeForm=function(){var e,t=(e=this.props).model,r=e.tracking,n=e.supportNewRequestUrl;return em.createElement(n2,{model:t,tracking:r,supportNewRequestUrl:n})},MfaForm.prototype.renderOtherMethods=function(){var e,t=(e=this.props).model,r=e.tracking;return em.createElement(nz,{mfaModesEnabled:t.mfaModesEnabled,phoneNumber:t.phoneNumber,disableSms:t.disableSms,tracking:r,onSwitchMode:this.onSwitchMode,onShowSupport:this.onSupportRequest})},MfaForm.formKey=G.MFA,MfaForm=t=__decorate([observer,__metadata("design:paramtypes",[Object])],MfaForm)}(em.PureComponent),n5=observer(function(e){var t=e.model;return em.createElement(em.Fragment,null,em.createElement("div",{className:"signup_email_verification-module_containerCenter__L1WBG"},em.createElement(n0,{disabled:!t.canSubmitSignUpWithCode,onChange:t.onSetCode,shouldClearCode:t.shouldClearCodeInput,invalid:!!t.errorMsg})),t.errorMsg&&em.createElement(XSmallText,{color:"red60",textAlign:"center","aria-live":"polite"},em.createElement("span",{id:"codeInputErrorMsg"},t.errorMsg)))}),n4={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0},unmounted:{opacity:0}},n6=function(e){function SwitchComponentItem(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(){return em.createElement(em.Fragment,null,t.props.children)},t}return __extends$1(SwitchComponentItem,e),SwitchComponentItem}(em.Component);function SwitchComponent(e){var t=e.children,r=e.active,n=e.duration,o=void 0===n?100:n,a=e.onSwitchComplete,i=em.Children.toArray(t).find(function(e){var t;return e===r||e.type===n6&&(null===(t=null==e?void 0:e.props)||void 0===t?void 0:t.name)===r})||null,s={transition:"opacity ".concat(o,"ms ease-in-out"),opacity:0};return em.createElement(nd,null,em.createElement(ni,{in:!1,key:r,onEnter:function(){a&&setTimeout(function(){return a(r)},o)},addEndListener:function(e,t){return e.addEventListener("transitionend",t,!1)}},function(e){return em.createElement("div",{style:__assign$2(__assign$2({},s),n4[e])},i)}))}function _extends$2(){return(_extends$2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Check=({styles:e={},...t})=>em.createElement("svg",_extends$2({width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("path",{d:"M1.333 8.519l4.103 4.148 9.23-9.334",stroke:"#4A6EE0",strokeWidth:"1.5",strokeLinecap:"round"})),InteractiveLink=function(e){var t=e.state,r=e.onComplete,n=e.children,o=e.duration,a=e.outerClassName;return em.createElement("span",{className:eX("interactive_link-module_linkWrapper__Rbodw",a)},em.createElement(SwitchComponent,{duration:void 0===o?400:o,active:void 0===t?"default":t,onSwitchComplete:function(e){"complete"===e&&r&&r()}},em.createElement(n6,{name:"default"}),em.createElement(n6,{name:"loading"},em.createElement(SmallLoader,null),em.createElement(em.Fragment,null,"\xa0"),em.createElement(em.Fragment,null,"\xa0")),em.createElement(n6,{name:"complete"},em.createElement(Check,null),em.createElement(em.Fragment,null,"\xa0"),em.createElement(em.Fragment,null,"\xa0"))),n)},n7=observer(function(e){var t=e.model,r=e.tracking,n=e.supportUrl,o=e.label;return em.createElement("div",{className:"resend_verification-module_links__AOYfL"},em.createElement(SwitchComponent,{active:t.currentResendVerificationView,duration:300},em.createElement(n6,{name:et.ResendVerification},em.createElement("div",{className:"resend_verification-module_resendCodeWrapper__K7f4-"},em.createElement(n9,{model:t,tracking:r,label:o}))),em.createElement(n6,{name:et.ContactSupport},em.createElement("div",{className:"resend_verification-module_contactSupport__ROtgj"},em.createElement(SmallText,null,"Need help?",em.createElement(em.Fragment,null,"\xa0")),em.createElement(TroubleshootLink,{onClick:function(){var e;null===(e=null==r?void 0:r.trackContactSupportButtonClick)||void 0===e||e.call(r)},to:n,openInNewWindow:!0},"Contact support.")))))}),n9=observer(function(e){var t=e.model,r=e.label,n=e.tracking;return em.createElement(InteractiveLink,{onComplete:function(){return setTimeout(function(){return t.onShowContactSupport()},300)},duration:300,state:{visible:"default",loading:"loading",hidden:"complete"}[t.resendVerificationState]},em.createElement(TroubleshootLink,{to:"",onClick:function(){var e;null===(e=null==n?void 0:n.trackResendButtonClick)||void 0===e||e.call(n),t.onResendVerificationClick()}},r))}),BackButton=function(e){var t=e.onClick;return em.createElement(UnstyledButton,{className:"signup_email_verification-module_backButton__hBhI4",onClick:t},em.createElement(ArrowIcon,{direction:N.left,color:"blue50"}),em.createElement(SmallText,{bold:!0,color:"blue50"},"Back"))},n8=observer(function(e){var t=e.handleBackButtonClick,r=e.email,n=em.createRef();return(0,em.useEffect)(function(){var e;null===(e=n.current)||void 0===e||e.focus()},[]),em.createElement(em.Fragment,null,em.createElement(BackButton,{onClick:t}),em.createElement(VerticalSpacer,{multiplier:3}),em.createElement(BaseTitle,null,em.createElement("span",{id:"signupEmailVerificationHeader",tabIndex:-1,ref:n,className:"index_noOutline__ZNf8b"},"Verify your email")),em.createElement(ru,{className:tc,disabled:!0,name:"email",type:"text",label:"Email",value:r}))}),Divider=function(){return em.createElement("div",{className:"signup_email_verification-module_dividerContainer__oTFh8"},em.createElement("hr",null),em.createElement("span",{className:"signup_email_verification-module_or__8S7jY"},"OR"),em.createElement("hr",null))},oe=observer(function(e){var t=e.signInEmailFailureSupportUrl,r=e.socialFlowModel,n=e.isSocialButtonsDisabled,o=e.handleSocialSubmit;return r.isEnabled?em.createElement(em.Fragment,null,em.createElement(Divider,null),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(nw,{signInEmailFailureSupportUrl:t,model:r,copyType:"SIGNUP",isSubmitButtonsDisabled:n,onSubmit:function(e){return o(e)}})):null}),ot=observer(function(e){var t=e.model,r=e.tracking,n=e.supportUrl;return em.createElement(Form,{"aria-labelledby":"signupEmailVerificationHeader",onSubmit:t.onSubmitCode},em.createElement(SmallText,{textAlign:"center"},"Please enter the 6-digit verification code we sent to the above email. This code expires within 15 minutes."),em.createElement(n5,{model:t}),em.createElement(VerticalSpacer,{multiplier:2}),t.showTryAgainSubmit&&em.createElement(SubmitAuthButton,{qa:"btnLogin",text:"Try Again",status:t.codeSubmitButtonStatus}),em.createElement(n7,{model:t.resendVerificationViewModel,tracking:r,supportUrl:n,label:"Resend the code"}))}),or=observer(function(e){var t=e.signInEmailFailureSupportUrl,r=e.model,n=e.tracking,o=e.supportUrl,a=e.trackFormShow;return(0,em.useEffect)(function(){null==a||a(G.SignUpEmailVerification)},[]),em.createElement(BaseContainer,null,em.createElement(n8,{email:r.email,handleBackButtonClick:r.handleBackButtonClick}),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(ot,{model:r,tracking:n,supportUrl:o}),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(oe,{signInEmailFailureSupportUrl:t,socialFlowModel:r.socialFlowModel,handleSocialSubmit:function(e){return r.handleSocialSubmit(e,G.SignUpEmailVerification)},isSocialButtonsDisabled:!r.canSubmitSocial}),r.resendCodeToast&&em.createElement("div",{style:{position:"fixed",bottom:"1rem",right:"1rem",zIndex:"1000"}},em.createElement(eM.F,{text:"A new code has been sent",variant:"success",onClose:function(){r.onSetResendCodeToast(!1)}})))}),on=function(){function SecureSignInViewModel(e){this.user=e}return Object.defineProperty(SecureSignInViewModel.prototype,"showEmailFlow",{get:function(){return this.user.loginProviders.includes(H.LoginType.email)},enumerable:!1,configurable:!0}),Object.defineProperty(SecureSignInViewModel.prototype,"showSocialFlow",{get:function(){return this.user.loginProviders.includes(H.LoginType.google)||this.user.loginProviders.includes(H.LoginType.facebook)||this.user.loginProviders.includes(H.LoginType.apple)},enumerable:!1,configurable:!0}),Object.defineProperty(SecureSignInViewModel.prototype,"showSSOFlow",{get:function(){return this.user.loginProviders.includes(H.LoginType.sso)},enumerable:!1,configurable:!0}),SecureSignInViewModel}(),oo=function(e){function SecureSignInForm(t){var r=e.call(this,t)||this;return r.formKey=G.SecureSignIn,r.onEmailSubmit=function(){return __awaiter(r,void 0,void 0,function(){var e,t,r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return e=(a=this.props).model,t=a.onCallTrigger,r=a.trackSubmitButtonClick,[4,e.validateEmailFlow()];case 1:return n=(i=__read$2.apply(void 0,[s.sent(),2]))[0],o=i[1],null==r||r({action:"SIGNIN",email:"true"},this.formKey,o),n&&t(createTrigger($.SignInEmailFlowSubmit,e.getEmailFlowSubmitData())),[2]}})})},r.onSocialSubmit=function(e){var t,n,o=(t=r.props).model,a=t.onCallTrigger,i=t.trackSubmitButtonClick,s=(n=__read$2(o.validateSocialFlow(),2))[0],l=n[1];null==i||i({action:"SIGNIN",socialType:e.type},r.formKey,l),s&&a(createTrigger($.SignInSocialFlowStart,o.getSocialFlowStartData(e)))},r.onSSOSubmit=function(){var e,t;null===(t=(e=r.props).trackSubmitButtonClick)||void 0===t||t.call(e,{action:"SIGNIN",email:"",isSSO:!0},r.formKey,{}),r.props.onCallTrigger(createTrigger($.SignInCheckEmailSubmit,{email:r.props.user.email}))},r.goToSignUp=function(){r.props.onCallTrigger(q.ToSignUp)},r.onTroubleshootLinkClick=function(){r.props.onCallTrigger(q.ToResetPassword)},r.secureSignInViewModel=new on(t.user),r}return __extends$1(SecureSignInForm,e),SecureSignInForm.prototype.componentDidMount=function(){var e,t;null===(t=(e=this.props).trackFormShow)||void 0===t||t.call(e,this.formKey)},SecureSignInForm.prototype.render=function(){var e,t=(e=this.props).model,r=e.signInEmailFailureSupportUrl;return em.createElement(Form,{onSubmit:this.onEmailSubmit},em.createElement(BaseTitle,null,"Verify that it's you"),t.emailFlowModel.flowError&&em.createElement(em.Fragment,null,em.createElement(SignInFlowErrorAlert,{signInEmailFailureSupportUrl:r,error:t.emailFlowModel.flowError,onGotToResetPassword:this.onTroubleshootLinkClick}),em.createElement(VerticalSpacer,{multiplier:1})),t.socialFlowModel.flowErrorNotice&&em.createElement(em.Fragment,null,em.createElement(FlowInfo,{signInEmailFailureSupportUrl:r,error:t.socialFlowModel.flowErrorNotice,hasEmail:t.emailFlowModel.hasEmailValue,socialProvider:t.socialFlowModel.activeProviderType}),em.createElement(VerticalSpacer,{multiplier:1})),this.secureSignInViewModel.showEmailFlow&&em.createElement(em.Fragment,null,em.createElement(ru,{disabled:!0,name:"email",type:"text",label:"Email",value:t.emailFlowModel.emailModel.value}),em.createElement(VerticalSpacer,{multiplier:1}),em.createElement(rF,{model:t.emailFlowModel.passwordModel,qa:"txtPassword"}),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(SubmitAuthButton,{text:"Next",status:t.emailFlowSubmitButtonStatus,qa:"btnLogin"}),em.createElement(VerticalSpacer,{multiplier:1.5}),em.createElement(TroubleshootLink,{to:"",qa:"linkForgotPassword",onClick:this.onTroubleshootLinkClick},"Can’t sign in?"),em.createElement(VerticalSpacer,{multiplier:2})),this.secureSignInViewModel.showSSOFlow&&em.createElement(em.Fragment,null,em.createElement(SSOAuthButton,{copyType:"CONTINUE",onClick:this.onSSOSubmit,showArrow:!0}),em.createElement(VerticalSpacer,{multiplier:1})),this.secureSignInViewModel.showSocialFlow&&t.socialFlowModel.isEnabled&&em.createElement(em.Fragment,null,em.createElement(nw,{signInEmailFailureSupportUrl:r,model:t.socialFlowModel,copyType:"CONTINUE",isSubmitButtonsDisabled:t.emailFlowModel.payload.isLoading(),onSubmit:this.onSocialSubmit}),em.createElement(VerticalSpacer,{multiplier:1})),em.createElement(VerticalSpacer,{multiplier:1}),em.createElement(RecaptchaTermsOfService,null),em.createElement(VerticalSpacer,{multiplier:1.5}),em.createElement(GrammarlyTermsOfServiceSigninLinks,null))},SecureSignInForm=__decorate([observer,__metadata("design:paramtypes",[Object])],SecureSignInForm)}(em.PureComponent),FacebookOutagePopupModal=function(e){var t=e.show,r=e.onRedirectToFacebook,n=e.onCloseHandler,o=__read$2((0,em.useState)(10),2),a=o[0],i=o[1];return(0,em.useEffect)(function(){if(t){var e=setInterval(function(){i(function(e){return e-1}),0===a&&r()},1e3);return function(){clearInterval(e)}}},[t]),(0,em.useEffect)(function(){0===a&&r()},[a]),em.createElement(nm,{className:n_.modalContainer,closeByIcon:!0,closeByClickOutside:!0,show:t,onClose:function(){n(),i(10)}},em.createElement(SmallText,null,"We’re currently working through an intermittent failure that is preventing our users from signing in with Facebook."),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(SmallText,null,"If you already have an account but haven’t set a password, you can do so by"," ",em.createElement(Link,{variant:"primary",to:"https://www.grammarly.com/resetpassword"},"resetting your password"),"."),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(SmallText,{textAlign:"center"},"Redirecting in ",a," seconds ..."))},SocialAccountLinkingButton=function(e){switch(e.provider){case H.Social.Type.Google:return tr;case H.Social.Type.Facebook:return tt;case H.Social.Type.Apple:return te;default:return null}};function _extends$1(){return(_extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var SuccessIcon=({styles:e={},...t})=>em.createElement("svg",_extends$1({"aria-hidden":"true",width:"53",height:"53",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("path",{d:"M24 52.814c13.255 0 24-10.591 24-23.657C48 16.092 37.255 5.5 24 5.5S0 16.092 0 29.157c0 13.066 10.745 23.657 24 23.657z",fill:"#B1F0E8"}),em.createElement("path",{d:"M28 48.814c13.255 0 24-10.591 24-23.657C52 12.092 41.255 1.5 28 1.5S4 12.092 4 25.157c0 13.066 10.745 23.657 24 23.657z",fill:"#fff",stroke:"#1C1C1C",strokeWidth:"1.1",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("path",{d:"M16.403 25.157l8.269 8.15 16.437-16.202",stroke:"#1C1C1C",strokeWidth:"1.1",strokeLinecap:"round"})),LinkingSuccess=function(e){var t=e.provider,r=e.onRedirect;return(0,em.useEffect)(function(){var e=setTimeout(function(){r&&r()},3e3);return function(){return clearTimeout(e)}},[r]),em.createElement(eb.k,{align:"center",direction:"column",height:"340px",justify:"center"},em.createElement(eb.k,{borderRadius:2,marginRight:12,marginLeft:12,marginBottom:5,align:"center",direction:"column"},em.createElement(eb.k,{direction:"column",gap:3,align:"center"},em.createElement(SuccessIcon,null),em.createElement(eb.k,{direction:"column"},em.createElement(eF.X,{as:"h2",align:"center",variant:"heading-small","aria-live":"polite"},"Your ",t.charAt(0).toUpperCase()+t.slice(1)," account is connected")),em.createElement(eg.x,{align:"center",variant:"text-small",as:"p","aria-live":"polite"},"We’re redirecting you back to Grammarly."),em.createElement(eg.x,{align:"center",variant:"text-small",as:"p",color:"base-subdued","aria-live":"polite"},"If you weren’t redirected,"," ",em.createElement(e_.r,{variant:"secondary",href:"",onClick:function(e){e.preventDefault(),r()}},"click here"),"."))))},oa=(0,em.createContext)(void 0),useAuthApi=function(){var e=(0,em.useContext)(oa);if(void 0===e)throw Error("useAuthApi must be used within a AuthApiProvider");return e},SocialAccountLinking=function(e){var t=e.api,r=e.provider,n=e.email,o=e.token,a=e.onNavToSignIn,i=e.onAuthSuccess,s=e.tracker,l=e.supportNewRequestUrl,c=useAuthApi(),u=em.useRef(null),d=__read$2((0,em.useState)(""),2),p=d[0],m=d[1],h=__read$2((0,em.useState)(!1),2),g=h[0],f=h[1],v=__read$2((0,em.useState)(void 0),2),y=v[0],_=v[1],S=__read$2((0,em.useState)(!1),2),E=S[0],b=S[1],w=__read$2((0,em.useState)(!1),2),C=w[0],k=w[1],A=__read$2((0,em.useState)(!1),2),M=A[0],F=A[1],T=__read$2((0,em.useState)(!1),2),P=T[0],O=T[1],I=__read$2((0,em.useState)(null),2),x=I[0],R=I[1];(0,em.useEffect)(function(){var e;null===(e=null==s?void 0:s.trackFormShow)||void 0===e||e.call(s,G.SocialAccountLinking)},[s]),(0,em.useEffect)(function(){focusCodeInput()},[]),(0,em.useEffect)(function(){var e=setTimeout(function(){b(!1)},3e3);return function(){return clearTimeout(e)}},[E]),(0,em.useEffect)(function(){var e=setTimeout(function(){k(!1)},3e3);return function(){return clearTimeout(e)}},[E]);var focusCodeInput=function(){null!==u.current&&u.current.focus()};return P&&x?em.createElement(LinkingSuccess,{provider:r,onRedirect:function(){i({action:x.action,socialType:r},x.user)}}):em.createElement(eb.k,{style:{minHeight:"340px"},direction:"column"},em.createElement(eb.k,{gap:8,wrap:!0,direction:"row",marginBottom:5,justify:"space-between",align:"center"},em.createElement(SocialAccountLinkingButton,{provider:r}),em.createElement(e_.r,{href:"",onClick:function(){var e,t;null===(t=null===(e=null==s?void 0:s.socialAccountLinkingTracking)||void 0===e?void 0:e.trackBackButtonClick)||void 0===t||t.call(e),a()},variant:"primary"},em.createElement(eg.x,{as:"p",variant:"text-small"},"Back to sign-in"))),em.createElement("form",{onSubmit:function(e){return __awaiter(void 0,void 0,void 0,function(){var n,a,i,l,c,u,d;return __generator(this,function(m){switch(m.label){case 0:e.preventDefault(),f(!0),n={action:"SIGNIN",socialType:r},m.label=1;case 1:if(m.trys.push([1,3,4,5]),p.length<6)return _("Enter your 6-digit code."),focusCodeInput(),[2];return null===(c=null==s?void 0:s.trackAttempt)||void 0===c||c.call(s,n,G.SocialAccountLinking),[4,t.signup({social_linking:{access_token:o,code:p}})];case 2:return R(m.sent()),O(!0),null===(u=null==s?void 0:s.trackSuccess)||void 0===u||u.call(s,n,G.SocialAccountLinking),[3,5];case 3:return a=m.sent(),null===(d=null==s?void 0:s.trackFail)||void 0===d||d.call(s,a,n,G.SocialAccountLinking),i=H.Error.AuthCommonError.create(a),H.Error.matchErrCode(i.errCode,((l={})[H.Error.ApiErrorCode.SocialEmailVerificationCode]=function(){_("6-digit code is invalid."),focusCodeInput()},l.default=function(){b(!0)},l)),[3,5];case 4:return f(!1),[7];case 5:return[2]}})})}},em.createElement(eb.k,{gap:3,marginBottom:5,direction:"column",width:"344px"},em.createElement(eF.X,{as:"h2",variant:"heading-small"},"Sign in securely by connecting your ",r," and Grammarly accounts"),em.createElement(eg.x,{as:"p",variant:"text-small",color:"base-subdued"},"You already have a Grammarly account with ",n,". To connect your Facebook account to this Grammarly account, please enter the code sent to your email. The code consists of numbers from 0-9.")),em.createElement(eb.k,{direction:"column",justify:"space-between"},em.createElement(eb.k,{marginBottom:5},em.createElement(eT.n,{errorMessage:y,onChange:function(e){e.length>6||(_(void 0),m(e))},ref:u,label:"6-digit code",value:p}))),em.createElement(eb.k,{direction:"column",gap:3},em.createElement(eP.z,{text:"Connect account",size:"medium",width:"full",type:"submit",isDisabled:g}),em.createElement(eb.k,{justify:"start",align:"center",gap:2,height:"30px"},M?em.createElement(em.Fragment,null,em.createElement(eg.x,{variant:"text-small",as:"p",color:"base-subdued"},"Problems receiving the code?"),em.createElement(e_.r,{href:l,onClick:function(){var e,t;null===(t=null===(e=null==s?void 0:s.socialAccountLinkingTracking)||void 0===e?void 0:e.trackContactSupportButtonClick)||void 0===t||t.call(e)},variant:"primary",target:"_blank"},em.createElement(eg.x,{as:"p",variant:"text-small"},"Contact support"))):em.createElement(em.Fragment,null,em.createElement(eg.x,{variant:"text-small",as:"p",color:"base-subdued"},"Didn’t receive a code?"),em.createElement(eb.k,null,em.createElement(eP.z,{text:"Resend code",size:"medium",variant:"ghost",onClick:function(){return __awaiter(void 0,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:null===(t=null===(e=null==s?void 0:s.socialAccountLinkingTracking)||void 0===e?void 0:e.trackResendCodeButtonClick)||void 0===t||t.call(e),r.label=1;case 1:return r.trys.push([1,3,4,5]),f(!0),[4,c.resendSocialLinkingVerificationCode(o)];case 2:return r.sent(),k(!0),F(!0),[3,5];case 3:return r.sent(),b(!0),[3,5];case 4:return f(!1),[7];case 5:return[2]}})})},isDisabled:g})))))),E&&em.createElement("div",{style:{position:"fixed",bottom:"1rem",right:"1rem",zIndex:"1000"}},em.createElement(eM.F,{text:"Something went wrong. Please try again later.",variant:"critical",onClose:function(){b(!1)}})),C&&em.createElement("div",{style:{position:"fixed",bottom:"1rem",right:"1rem",zIndex:"1000"}},em.createElement(eM.F,{text:"A new code has been sent",variant:"success",onClose:function(){k(!1)}})))},oi={list:"ButtonGroup-module_list__TZkAo",listItem:"ButtonGroup-module_listItem__ckp4N",classic:"ButtonGroup-module_classic__hkLZo",modern:"ButtonGroup-module_modern__qpcJF",icon:"ButtonGroup-module_icon__AMm0O"},ButtonGroup=function(e){var t=e.children,r=e.variant,n=void 0===r?"classic":r;return em.createElement("div",{className:"".concat(oi.list," ").concat("modern"===n?oi.modern:oi.classic),role:"group"},t)},ButtonGroupButton=function(e){var t=e.iconStart,r=e.iconEnd,n=e.label,o=e.onClick,a=e.weight,i=e.iconStartVariant,s=e.iconStartSize,l=e.paddingLeft,c=e.paddingRight;return em.createElement("button",{className:oi.listItem,onClick:o,style:{paddingLeft:void 0===l?"0px":l,paddingRight:void 0===c?"0px":c}},em.createElement(eb.k,{gap:3,width:"100%",align:"center"},em.createElement(ew.J,{size:void 0===s?"large":s,icon:t,accessibilityLabel:"",variant:void 0===i?"default":i}),em.createElement(eg.x,{variant:"text-medium",as:"p",weight:a},n),r&&em.createElement("span",{className:oi.icon},em.createElement(ew.J,{size:"small",icon:r,accessibilityLabel:""}))))},MfaModeSelection=function(e){var t=e.otherModes,r=e.lastDigits,n=e.onChange,o=e.onNavToSupportRequest,a=e.onBackToMfaInput;return em.createElement(em.Fragment,null,em.createElement(eb.k,{marginBottom:6},em.createElement(eF.X,{as:"h2",variant:"heading-small"},"Choose a verification method")),em.createElement(eb.k,{gap:4,wrap:!0,marginBottom:6},em.createElement(ButtonGroup,{variant:"classic"},t.includes(H.MfaSettings.Mode.phone)&&em.createElement(ButtonGroupButton,{iconEnd:eO.M,iconStart:eI.C,iconStartVariant:"brand",label:"Phone number ending in ••".concat(r),onClick:function(){return n(H.MfaSettings.Mode.phone)},paddingLeft:"var(--space-4)",paddingRight:"var(--space-4)",weight:"medium"}),t.includes(H.MfaSettings.Mode.totp)&&em.createElement(ButtonGroupButton,{iconEnd:eO.M,iconStart:ex.e,iconStartVariant:"brand",label:"Authenticator app",onClick:function(){return n(H.MfaSettings.Mode.totp)},paddingLeft:"var(--space-4)",paddingRight:"var(--space-4)",weight:"medium"}),t.includes(H.MfaSettings.Mode.backup)&&em.createElement(ButtonGroupButton,{iconEnd:eO.M,iconStart:eR.y,iconStartVariant:"brand",label:"Backup code",onClick:function(){return n(H.MfaSettings.Mode.backup)},paddingLeft:"var(--space-4)",paddingRight:"var(--space-4)",weight:"medium"}))),em.createElement(ButtonGroup,{variant:"modern"},em.createElement(ButtonGroupButton,{iconStart:eL.N,iconEnd:eO.M,label:"Contact support",onClick:function(){return o()}}),em.createElement(ButtonGroupButton,{iconStart:eV.n,iconEnd:eO.M,label:"Back",onClick:function(){return a()}})))};(k=es||(es={})).MFA_INPUT="MFA_INPUT",k.MFA_MODE_SELECTION="MFA_MODE_SELECTION";var MfaSocialAccountLinking=function(e){var t=e.api,r=e.lastDigits,n=e.token,o=e.modes,a=e.provider,i=e.onNavToSupportRequest,s=e.onNavToSignIn,l=e.onAuthSuccess,c=e.tracker,u=e.action,d=useAuthApi(),p=__read$2((0,em.useState)(!1),2),m=p[0],h=p[1],g=__read$2((0,em.useState)(es.MFA_INPUT),2),f=g[0],v=g[1],y=__read$2((0,em.useState)(o[0]),2),_=y[0],S=y[1],E=__read$2((0,em.useState)(void 0),2),b=E[0],w=E[1],C=__read$2((0,em.useState)(""),2),k=C[0],A=C[1],M=__read$2((0,em.useState)(!1),2),F=M[0],T=M[1],P=__read$2((0,em.useState)(!1),2),O=P[0],I=P[1],x=__read$2((0,em.useState)(!1),2),R=x[0],L=x[1];(0,em.useEffect)(function(){var e=setTimeout(function(){I(!1)},3e3);return function(){return clearTimeout(e)}},[O]);var handleResendCode=function(){return __awaiter(void 0,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:null===(t=null===(e=null==c?void 0:c.socialAccountMfaLinkingTracking)||void 0===e?void 0:e.trackResendCodeButtonClick)||void 0===t||t.call(e),r.label=1;case 1:return r.trys.push([1,3,4,5]),h(!0),[4,d.resendSocialVerificationSmsCode(n)];case 2:return r.sent(),L(!0),[3,5];case 3:return r.sent(),I(!0),[3,5];case 4:return h(!1),[7];case 5:return[2]}})})};return f===es.MFA_MODE_SELECTION?em.createElement(MfaModeSelection,{otherModes:o.filter(function(e){return e!==_}),onChange:function(e){A(""),S(e),v(es.MFA_INPUT),e===H.MfaSettings.Mode.phone&&handleResendCode()},onNavToSupportRequest:function(){return i()},onBackToMfaInput:function(){return v(es.MFA_INPUT)},lastDigits:r}):em.createElement("div",null,em.createElement(eb.k,{direction:"column"},em.createElement("form",{onSubmit:function(e){return __awaiter(void 0,void 0,void 0,function(){var r,o,i,s,d,p,m,g,f;return __generator(this,function(v){switch(v.label){case 0:e.preventDefault(),h(!0),r={action:null!=u?u:"SIGNIN",socialType:a},v.label=1;case 1:if(v.trys.push([1,6,7,8]),k.length<8&&_==H.MfaSettings.Mode.backup)return w("Enter your 8-digit backup code."),[2];if(k.length<6)return w("Enter your 6-digit code."),[2];if(null===(m=null==c?void 0:c.trackAttempt)||void 0===m||m.call(c,r,G.MfaSocialAccountLinking),o={access_token:n,code:k,rememberDevice:F,mode:_},i=void 0,"SIGNIN"!==u)return[3,3];return[4,t.loginGeneric({social_login:o})];case 2:return i=v.sent(),[3,5];case 3:return[4,t.signup({social_linking:o})];case 4:i=v.sent(),v.label=5;case 5:return null===(g=null==c?void 0:c.trackSuccess)||void 0===g||g.call(c,r,G.MfaSocialAccountLinking),l(r,i.user),[3,8];case 6:return s=v.sent(),null===(f=null==c?void 0:c.trackFail)||void 0===f||f.call(c,s,r,G.MfaSocialAccountLinking),d=H.Error.AuthCommonError.create(s),H.Error.matchErrCode(d.errCode,((p={})[H.Error.ApiErrorCode.SocialEmailVerificationCode]=function(){_===H.MfaSettings.Mode.backup?w("8-digit code is invalid."):w("6-digit code is invalid.")},p.default=function(){I(!0)},p)),[3,8];case 7:return h(!1),[7];case 8:return[2]}})})}},em.createElement(eb.k,{gap:3,marginBottom:6,direction:"column"},em.createElement(eb.k,{justify:"space-between"},em.createElement(eF.X,{as:"h2",variant:"heading-large"},_===H.MfaSettings.Mode.phone&&"Check your phone",_===H.MfaSettings.Mode.totp&&"Authenticator app verification",_===H.MfaSettings.Mode.backup&&"Enter your backup code")),em.createElement(eg.x,{as:"p",variant:"text-medium",color:"base-default"},_===H.MfaSettings.Mode.phone&&"Enter the verification code sent to your phone ending in ••".concat(r),_===H.MfaSettings.Mode.totp&&"Enter the verification code from your authenticator app.",_===H.MfaSettings.Mode.backup&&"Enter an unused 8-digit backup code you saved when setting up two-factor authentication.")),em.createElement(eb.k,{marginBottom:_===H.MfaSettings.Mode.backup?6:3},_===H.MfaSettings.Mode.backup?em.createElement(eT.n,{label:"Backup code",size:"large",onChange:function(e){w(void 0),A(e)},errorMessage:b}):em.createElement(eN.B,{type:"number",legend:"".concat(_," code"),size:"large",value:k,onChange:function(e){w(void 0),A(e)},errorMessage:b})),em.createElement(eb.k,{marginBottom:6,align:"center"},em.createElement(eA.XZ,{isSelected:F,onChange:function(e){return T(e)}},"Don't ask again on this device")),em.createElement(eb.k,{marginBottom:6},em.createElement(eP.z,{text:"Sign in securely",size:"large",width:"full",type:"submit",isDisabled:!1,isLoading:m})),_===H.MfaSettings.Mode.phone&&em.createElement(eb.k,{marginBottom:3,align:"center",gap:1},em.createElement(eg.x,{variant:"text-medium",as:"p"},"Didn't receive the code?"),em.createElement(eP.z,{text:"Resend code",size:"large",width:"fixed",isDisabled:!1,variant:"ghost",onClick:function(){return handleResendCode()}})),em.createElement(eb.k,{direction:"column",gap:3},em.createElement(ButtonGroup,{variant:"modern"},!!o.filter(function(e){return e!==_}).length&&em.createElement(ButtonGroupButton,{iconEnd:eO.M,iconStart:eU.a,label:"Choose another method",onClick:function(){var e,t;null===(t=null===(e=null==c?void 0:c.socialAccountMfaLinkingTracking)||void 0===e?void 0:e.trackChooseAnotherMethodButtonClick)||void 0===t||t.call(e),v(es.MFA_MODE_SELECTION)}}),em.createElement(ButtonGroupButton,{iconEnd:eO.M,iconStart:eL.N,label:"Contact support",onClick:function(){var e,t;null===(t=null===(e=null==c?void 0:c.socialAccountMfaLinkingTracking)||void 0===e?void 0:e.trackContactSupportButtonClick)||void 0===t||t.call(e),i()}}),em.createElement(ButtonGroupButton,{iconStart:eV.n,iconEnd:eO.M,label:"Back to sign in",onClick:function(){var e,t;null===(t=null===(e=null==c?void 0:c.socialAccountMfaLinkingTracking)||void 0===e?void 0:e.trackBackButtonClick)||void 0===t||t.call(e),s()}})))),O&&em.createElement("div",{style:{position:"fixed",bottom:"1rem",right:"1rem",zIndex:"1000"}},em.createElement(eM.F,{text:"Something went wrong. Please try again later.",variant:"critical",onClose:function(){I(!1)}})),R&&em.createElement("div",{style:{position:"fixed",bottom:"1rem",right:"1rem",zIndex:"1000"}},em.createElement(eM.F,{text:"A new code has been sent to your phone ending in ••".concat(r),variant:"success",onClose:function(){L(!1)}}))))};function useGoogleOAuthRedirect(e){var t=(0,em.useRef)(new rN(e.oAuthConfig)),r=(0,em.useRef)(rG.get(e.cookieDomain)),n={action:e.authAction,socialType:H.Social.Type.Google};return{getSocialRedirectUrl:(0,em.useCallback)(function(){try{null===(o=e.onBeforeSocialRedirect)||void 0===o||o.call(e,n,r.current.appendToState)}catch(e){}var o,a=r.current.saveState({context:n,initFlowUIState:{formKey:e.formKey}});return t.current.getOAuthProviderUrl({stateKey:a})},[])}}function useSocialOAuthRedirect(e){var t=(0,em.useRef)(new rN(e.oAuthConfig.google)),r=(0,em.useRef)(new rU(e.oAuthConfig.facebook)),n=(0,em.useRef)(new rV(e.oAuthConfig.apple)),o=(0,em.useRef)(rG.get(e.cookieDomain));return{getSocialOAuthRedirectUrl:(0,em.useCallback)(function(a,i){var s,l={action:e.authAction,socialType:a};try{null===(s=e.onBeforeSocialRedirect)||void 0===s||s.call(e,l,o.current.appendToState)}catch(e){}var c=o.current.saveState({context:l,initFlowUIState:{formKey:e.formKey}});switch(a){case H.Social.Type.Google:return t.current.getOAuthProviderUrl({stateKey:c,loginHint:i});case H.Social.Type.Apple:return n.current.getOAuthProviderUrl({stateKey:c});case H.Social.Type.Facebook:return r.current.getOAuthProviderUrl({stateKey:c})}},[])}}var redirectToSSOProvider=function(e){var t=generateRandomString(30);document.location.href=composeUrl(e,{originalLocation:btoa(composeUrl(document.URL,{is_sso:!0,stateKey:t}))})},WelcomeBack=function(e){var t,r,n=e.treatmentGroup,o=e.email,a=e.authInfo,i=e.onNavToSignIn,s=e.cookieDomain,l=e.socialOAuthConfig,c=e.onBeforeSocialRedirect,u=e.tracker,d=__read$2((0,em.useState)(!1),2),p=d[0],m=d[1];(0,em.useEffect)(function(){var e;null===(e=null==u?void 0:u.trackFormShow)||void 0===e||e.call(u,G.WelcomeBack)},[]),(0,em.useEffect)(function(){var e=setTimeout(function(){m(!1)},3e3);return function(){return clearTimeout(e)}},[p]);var h=useSocialOAuthRedirect({cookieDomain:s,oAuthConfig:l,authAction:"SIGNIN",formKey:G.SignInInit,onBeforeSocialRedirect:c}).getSocialOAuthRedirectUrl,g=(r=a.loginType)===H.LoginType.google?H.Social.Type.Google:r===H.LoginType.facebook?H.Social.Type.Facebook:r===H.LoginType.apple?H.Social.Type.Apple:void 0;return em.createElement("div",null,em.createElement(eb.k,{direction:"column"},em.createElement(eb.k,{marginBottom:3,justify:"space-between"},em.createElement(eF.X,{as:"h2",variant:"heading-large"},"Welcome back")),em.createElement(eb.k,{gap:6,direction:"column"},em.createElement(eg.x,{as:"p",variant:"text-medium",color:"base-default"},"Your ",a.loginType===H.LoginType.sso?"organization":g," account is connected to this Grammarly account. Sign in using the email ",em.createElement(eb.k,null),em.createElement(eg.x,{as:"p",weight:"semibold",className:"index_textEmail__p2ZNO"},o)),em.createElement(eb.k,{direction:"column",gap:6},em.createElement(ButtonGroup,{variant:"classic"},em.createElement(ButtonGroupButton,{iconEnd:eO.M,iconStart:(t=a.loginType)===H.LoginType.google?eB.n:t===H.LoginType.facebook?eD.r:t===H.LoginType.apple?eG.W:ek.g,iconStartVariant:"brand",label:"Continue with ".concat(a.loginType===H.LoginType.sso?"Single Sign-On":g," "),onClick:function(){var e,t;null===(e=null==u?void 0:u.trackSubmitButtonClick)||void 0===e||e.call(u,{action:"SIGNIN",email:"true"},G.WelcomeBack);try{if(a.loginType===H.LoginType.sso&&"welcome_back"===n){var r=a.ssoLoginURL;null===(t=null==u?void 0:u.trackAttempt)||void 0===t||t.call(u,{action:"SIGNIN",email:o},G.WelcomeBack),redirectToSSOProvider(r)}else if(g){var i=void 0;i="welcome_back_login_hint"===n?h(g,o):h(g),window.location.assign(i)}}catch(e){m(!0)}},paddingLeft:"var(--space-4)",paddingRight:"var(--space-4)",weight:"medium"})),em.createElement(ButtonGroup,{variant:"modern"},em.createElement(ButtonGroupButton,{iconStart:eV.n,iconStartSize:"medium",label:"Back",onClick:function(){var e;null===(e=null==u?void 0:u.trackBackButtonClick)||void 0===e||e.call(u,G.ContinueSSO),i()}}))))),p&&em.createElement("div",{style:{position:"fixed",bottom:"1rem",right:"1rem",zIndex:"1000"}},em.createElement(eM.F,{text:"Something went wrong. Please try again later.",variant:"critical",onClose:function(){m(!1)}})))},ContinueSSO=function(e){var t=e.onNavToSignIn,r=e.tracker,n=e.api,o=__read$2((0,em.useState)(!1),2),a=o[0],i=o[1],s=__read$2((0,em.useState)(""),2),l=s[0],c=s[1],u=em.useRef(l),d=__read$2((0,em.useState)(void 0),2),p=d[0],m=d[1],h=__read$2((0,em.useState)(!1),2),g=h[0],f=h[1];(0,em.useEffect)(function(){var e,t;null===(e=null==r?void 0:r.trackFormShow)||void 0===e||e.call(r,G.ContinueSSO),null===(t=document.getElementById("ssoEmail"))||void 0===t||t.addEventListener("keydown",function(e){"Enter"===e.key&&handleSubmit()})},[]),(0,em.useEffect)(function(){var e=setTimeout(function(){f(!1)},3e3);return function(){return clearTimeout(e)}},[g]);var handleSubmit=function(){return __awaiter(void 0,void 0,void 0,function(){var e,t,o,a,s,l,c;return __generator(this,function(d){switch(d.label){case 0:if(e=u.current,null===(s=null==r?void 0:r.trackSubmitButtonClick)||void 0===s||s.call(r,{action:"SIGNIN",email:"true"},G.ContinueSSO),e)return[3,1];return m("Email is required"),[3,7];case 1:if(rg.emailRegex.test(e))return[3,2];return m("Please enter a valid e-mail address."),[3,7];case 2:i(!0),d.label=3;case 3:return d.trys.push([3,5,6,7]),[4,n.getAuthInfo(e)];case 4:return o=(t=d.sent()).loginType,null===(l=null==r?void 0:r.trackAuthInfoRequestSuccess)||void 0===l||l.call(r,G.ContinueSSO,o),o===H.LoginType.sso?redirectToSSOProvider(t.ssoLoginURL):m("Your email is not associated with an SSO account."),[3,7];case 5:return a=d.sent(),f(!0),null===(c=null==r?void 0:r.trackFail)||void 0===c||c.call(r,a,{action:"SIGNIN",email:e},G.ContinueSSO),[3,7];case 6:return i(!1),[7];case 7:return[2]}})})};return em.createElement("div",null,em.createElement(eb.k,{direction:"column"},em.createElement(eb.k,{marginBottom:3,justify:"space-between"},em.createElement(eF.X,{as:"h2",variant:"heading-large"},"Continue with Single Sign-On")),em.createElement(eb.k,{gap:6,direction:"column"},em.createElement(eg.x,{as:"p",variant:"text-medium",color:"base-default"},"Your organization uses single sign-on with Grammarly. Sign in using your SSO credentials."),em.createElement(eb.k,{direction:"column",gap:3},em.createElement(eT.n,{id:"ssoEmail",label:"Work or school email",isRequired:!0,size:"large",type:"email",onChange:function(e){u.current=e,c(e),m(void 0)},value:l,errorMessage:p}),em.createElement(eP.z,{text:"Continue with work email",size:"large",width:"full",onClick:handleSubmit,isLoading:a})),em.createElement(eb.k,{direction:"column",gap:6},em.createElement(ButtonGroup,{variant:"modern"},em.createElement(ButtonGroupButton,{iconStart:eV.n,iconStartSize:"medium",label:"Back to sign in",onClick:function(){var e;null===(e=null==r?void 0:r.trackBackButtonClick)||void 0===e||e.call(r,G.ContinueSSO),t()}}))))),g&&em.createElement("div",{style:{position:"fixed",bottom:"1rem",right:"1rem",zIndex:"1000"}},em.createElement(eM.F,{text:"Something went wrong. Please try again later.",variant:"critical",onClose:function(){f(!1)}})))},os=function(e){function AuthMainForm(){return null!==e&&e.apply(this,arguments)||this}return __extends$1(AuthMainForm,e),AuthMainForm.prototype.handleNavigationToSignin=function(){this.props.supplementaryFlowLink&&this.props.supplementaryFlowType===H.Props.SupplementaryFlowType.Link?window.location.href=this.props.supplementaryFlowLink:this.props.model.onCallTrigger(q.ToSignIn)},AuthMainForm.prototype.render=function(){return this.renderCurrentStep()},AuthMainForm.prototype.renderCurrentStep=function(){switch(this.props.model.currentView){case G.SignInInit:case G.SignInWithPassword:return this.renderSignIn();case G.SignInEmailPermissionPopup:return this.renderSignIn(!0);case G.SecureSignIn:return this.renderSecureSignIn();case G.ExplicitTermsOfServicePopup:return this.renderSignIn(!1,!0);case G.NewAccount:return this.renderNewAccount();case G.SignUpEmailPermissionPopup:return this.renderNewAccount(!0);case G.ResetPassword:return this.renderResetPassword();case G.ResetPasswordEmailSent:return this.renderResetPasswordEmailSent();case G.ForgotEmail:return this.renderForgotEmail();case G.Captcha:return this.renderCaptcha();case G.MFA:return this.renderMFA();case G.SignUpEmailVerification:return this.renderEmailVerification();case G.SupportRequest:return this.renderSupportRequest();case G.SupportRequestSent:return this.renderSupportRequestSent();case G.SocialAccountLinking:return this.renderSocialAccountLinking();case G.MfaSocialAccountLinking:return this.renderMfaSocialAccountLinking();case G.WelcomeBack:return this.renderWelcomeBack();case G.ContinueSSO:return this.renderContinueSSO()}},AuthMainForm.prototype.renderSecureSignIn=function(){var e,t=(e=this.props).model,r=e.config;return t.currentUser?em.createElement(oo,{model:t.signInViewModel,user:t.currentUser,trackFormShow:t.onTrackFormShow,trackSubmitButtonClick:t.onAuthSubmitClick,onCallTrigger:t.onCallTrigger,signInEmailFailureSupportUrl:r.signInEmailFailureSupportUrl}):null},AuthMainForm.prototype.renderSignIn=function(e,t){var r,n,o,a=(r=this.props).model,i=r.supplementaryFlowType,s=r.supplementaryFlowLink,l=r.hideTitle,c=r.hideTitleLink,u=r.titleHeadingHtmlTag,d=r.config,p=r.isSocialSignInFirstExperimentEnabled,m=r.customizationType,h=r.logger,g=r.onAssignResetPasswordTreatment,f=r.dedicatedSSOSigninTreatment,v=r.onAssignAccountNotExistTreatment,y=r.onCreateNewAccount;return em.createElement(em.Fragment,null,em.createElement(FacebookPermissionsModal,{formKey:G.SignInEmailPermissionPopup,show:!!e,trackFormShow:a.onTrackFormShow,onCloseHandler:function(){return a.onCallTrigger(q.ToSignIn)},onOpenFacebookSettings:function(){a.onCallTrigger(createTrigger($.SignInSocialFlowStart,a.signInViewModel.getSocialFlowStartData(a.signInViewModel.socialFlowModel.getProviderByType(H.Social.Type.Facebook),!0)))}}),em.createElement(ExplicitTermsOfServiceModal,{show:!!t,model:a.signUpViaSignInViewModel,trackFormShow:a.onTrackFormShow,trackSubmitButtonClick:a.onAuthSubmitClick,trackToSLinkFollow:a.track.trackToSLinkFollow,onCallTrigger:a.onCallTrigger,onCloseHandler:function(){return a.onCallTrigger(q.ToSignIn)}}),em.createElement(FacebookOutagePopupModal,{show:a.signInViewModel.showFacebookLoginDisabledModal,onRedirectToFacebook:function(){var e=a.signInViewModel.socialFlowModel.getProviderByType(H.Social.Type.Facebook);e&&a.onCallTrigger(createTrigger($.SignUpSocialFlowStart,a.signUpViewModel.getSocialFlowStartData(e)))},onCloseHandler:function(){return a.signInViewModel.setShowFacebookLoginDisabledModal(!1)}}),em.createElement(nj,{model:a.signInViewModel,hideTitle:l,hideTitleLink:c,titleHeadingHtmlTag:u,supplementaryFlowType:i,supplementaryFlowLink:s,trackFormShow:a.onTrackFormShow,trackSubmitButtonClick:a.onAuthSubmitClick,onCallTrigger:a.onCallTrigger,showFacebookOutageDisabledModal:d.showFacebookOutageDisabledModal,signInEmailFailureSupportUrl:d.signInEmailFailureSupportUrl,isSocialSignInFirstExperimentEnabled:p,customizationType:m,loginResetPasswordUrl:(null===(n=null==d?void 0:d.funnel)||void 0===n?void 0:n.loginResetPassword)||"https://login.grammarly.com/reset-password",loginResetPasswordInitiateUrl:(null===(o=null==d?void 0:d.funnel)||void 0===o?void 0:o.loginResetPasswordInitiate)||"https://login.grammarly.com/api/v1/flow/initiate",onAssignResetPasswordTreatment:g,dedicatedSSOSigninTreatment:f,onAssignAccountNotExistTreatment:v,logger:h,onCreateNewAccount:y}))},AuthMainForm.prototype.renderNewAccount=function(e){var t,r=(t=this.props).model,n=t.supplementaryFlowType,o=t.supplementaryFlowLink,a=t.formTitle,i=t.hideTitle,s=t.hideTitleLink,l=t.titleHeadingHtmlTag,c=t.onAssignEmailVerificationTreatment,u=t.socialFirstSignupTreatment,d=t.config,p=t.showLastName,m=t.removeFbSignupOptionTreatment;return em.createElement(em.Fragment,null,em.createElement(FacebookPermissionsModal,{formKey:G.SignUpEmailPermissionPopup,show:!!e,trackFormShow:r.onTrackFormShow,onCloseHandler:function(){return r.onCallTrigger(q.ToSignUp)},onOpenFacebookSettings:function(){r.onCallTrigger(createTrigger($.SignUpSocialFlowStart,r.signUpViewModel.getSocialFlowStartData(r.signUpViewModel.socialFlowModel.getProviderByType(H.Social.Type.Facebook),!0)))}}),em.createElement(nP,{showLastName:p,model:r.signUpViewModel,title:null==a?void 0:a.signupFormTitle,hideTitle:i,hideTitleLink:s,titleHeadingHtmlTag:l,supplementaryFlowType:n,supplementaryFlowLink:o,trackToSLinkFollow:r.track.trackToSLinkFollow,trackFormShow:r.onTrackFormShow,trackSubmitButtonClick:r.onAuthSubmitClick,onCallTrigger:r.onCallTrigger,onAssignEmailVerificationTreatment:c,socialFirstSignupTreatment:u,showFacebookOutageDisabledModal:d.showFacebookOutageDisabledModal,signInEmailFailureSupportUrl:d.signInEmailFailureSupportUrl,removeFbSignupOptionTreatment:m}))},AuthMainForm.prototype.renderMFA=function(){var e,t=(e=this.props).model,r=e.config;return em.createElement(n3,{model:t.mfaViewModel,trackFormShow:t.onTrackFormShow,tracking:t.track.mfaTracking,supportNewRequestUrl:r.supportNewRequestUrl,onCallTrigger:t.onCallTrigger})},AuthMainForm.prototype.renderEmailVerification=function(){var e,t=(e=this.props).model,r=e.config,n={trackFormShow:t.onTrackFormShow,tracking:t.track.signupEmailVerificationTracking,supportUrl:r.signUpEmailVerificationSupportUrl};return em.createElement(or,__assign$2({signInEmailFailureSupportUrl:r.signInEmailFailureSupportUrl,model:t.emailVerificationViewModel},n))},AuthMainForm.prototype.renderCaptcha=function(){var e,t=this,r=(e=this.props).model,n=e.config,o=e.isGoogleDomainNotAvailable,a=e.logger;return em.createElement(nV,{supportNewRequestUrl:n.supportNewRequestUrl,action:r.captchaActionType,siteKey:n.recaptcha.visibleEnterprise.siteKey,srcUrl:o?n.recaptcha.visible.urlGlobal:n.recaptcha.visible.url,trackFormShow:this.props.model.onTrackFormShow,logger:a,onSuccess:function(e){t.props.model.onCallTrigger(createTrigger($.CaptchaSubmit,{token:e,action:r.captchaActionType}))}})},AuthMainForm.prototype.renderResetPassword=function(){return em.createElement(nx,{model:this.props.model.resetPasswordViewModel,trackFormShow:this.props.model.onTrackFormShow,onCallTrigger:this.props.model.onCallTrigger})},AuthMainForm.prototype.renderResetPasswordEmailSent=function(){return em.createElement(ResetPasswordEmailSentForm,{trackFormShow:this.props.model.onTrackFormShow,onCallTrigger:this.props.model.onCallTrigger})},AuthMainForm.prototype.renderForgotEmail=function(){return em.createElement(ForgotEmailForm,{supportNewRequestUrl:this.props.config.supportNewRequestUrl,trackFormShow:this.props.model.onTrackFormShow,onCallTrigger:this.props.model.onCallTrigger})},AuthMainForm.prototype.renderSupportRequest=function(){return em.createElement(nH,{model:this.props.model.supportRequestViewModel,trackFormShow:this.props.model.onTrackFormShow,onCallTrigger:this.props.model.onCallTrigger})},AuthMainForm.prototype.renderSupportRequestSent=function(){return em.createElement(SupportRequestSentForm,{trackFormShow:this.props.model.onTrackFormShow,onCallTrigger:this.props.model.onCallTrigger})},AuthMainForm.prototype.renderSocialAccountLinking=function(){var e=this.props.model.socialAccountLinkingData,t=e.email,r=e.token,n=e.provider;if(!t||!r||!n){this.props.model.onCallTrigger(q.ToSignIn);return}return em.createElement(SocialAccountLinking,{tracker:{trackFormShow:this.props.tracker.trackFormShow,trackSuccess:this.props.tracker.trackSuccess,trackFail:this.props.tracker.trackFail,trackAttempt:this.props.tracker.trackAttempt},api:this.props.api,provider:n,email:t,token:r,onNavToSignIn:this.handleNavigationToSignin,onAuthSuccess:this.props.onAuthSuccess,supportNewRequestUrl:this.props.config.supportNewRequestUrl})},AuthMainForm.prototype.renderMfaSocialAccountLinking=function(){var e=this,t=this.props.model.mfaSocialAccountLinkingData,r=t.token,n=t.modes,o=t.lastDigits,a=t.provider,i=t.action;return r&&n&&a?em.createElement(MfaSocialAccountLinking,{tracker:{trackFormShow:this.props.tracker.trackFormShow,trackSuccess:this.props.tracker.trackSuccess,trackFail:this.props.tracker.trackFail,trackAttempt:this.props.tracker.trackAttempt},api:this.props.api,lastDigits:o,token:r,modes:n.concat([H.MfaSettings.Mode.backup]),onNavToSupportRequest:function(){return e.props.model.onCallTrigger(q.ToSupportRequest)},onNavToSignIn:function(){return e.handleNavigationToSignin()},onAuthSuccess:this.props.onAuthSuccess,provider:a,action:i}):(this.props.model.onCallTrigger(q.ToSignIn),this.renderSignIn())},AuthMainForm.prototype.renderWelcomeBack=function(){var e,t=this,r=(e=this.props.model).authInfoData,n=e.welcomeBackExperimentTreatmentGroup;return r.isValue()&&em.createElement(WelcomeBack,{treatmentGroup:n,email:this.props.model.signInViewModel.emailFlowModel.emailModel.value,authInfo:r.value,onNavToSignIn:function(){t.props.model.onCallTrigger(q.ToSignIn)},cookieDomain:this.props.config.cookieDomain,socialOAuthConfig:this.props.config.socialOAuth,onBeforeSocialRedirect:this.props.onBeforeSocialRedirect,tracker:{trackFormShow:this.props.tracker.trackFormShow,trackAttempt:this.props.tracker.trackAttempt,trackSubmitButtonClick:this.props.tracker.trackSubmitButtonClick,trackBackButtonClick:this.props.tracker.trackBackButtonClick}})},AuthMainForm.prototype.renderContinueSSO=function(){var e=this;return em.createElement(ContinueSSO,{onNavToSignIn:function(){e.props.model.onCallTrigger(q.ToSignIn)},api:this.props.api,tracker:this.props.tracker})},AuthMainForm=__decorate([observer],AuthMainForm)}(em.PureComponent),ol={hide:"enterprise-module_hide__u3P5o"},noOp=function(){},oc=function(){function CaptchaDomHelper(e){var t=this;this.config=e,this.getOnCaptchaLoad=function(e){return function(){t.suppressCaptchaErrors(),t.hideCaptchaBadges(),null==e||e("onLoad")}}}return CaptchaDomHelper.prototype.addOnLoadHook=function(e){rf||(window[CaptchaDomHelper.onLoadFnName]=this.getOnCaptchaLoad(e))},CaptchaDomHelper.prototype.getSrcUrl=function(){var e,t=(e=this.config).srcUrl,r=e.siteKey;return"".concat(t,"?onload=").concat(encodeURIComponent(CaptchaDomHelper.onLoadFnName),"&render=").concat(encodeURIComponent(r))},CaptchaDomHelper.prototype.hasScript=function(){return!rf&&!!this.captchaScriptElement},CaptchaDomHelper.prototype.hasStyle=function(){return!rf&&!!document.querySelector('style[data-key="captcha-style"]')},Object.defineProperty(CaptchaDomHelper.prototype,"captchaBadges",{get:function(){for(var e=document.getElementsByClassName("grecaptcha-badge"),t=[],r=0;r<e.length;r++){var n=e.item(r);n&&t.push(n)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(CaptchaDomHelper.prototype,"captchaScriptElement",{get:function(){return document.querySelector('script[data-key="captcha"]')},enumerable:!1,configurable:!0}),CaptchaDomHelper.prototype.hideCaptchaBadges=function(){this.captchaBadges.forEach(function(e){e&&e.classList.add(ol.hide)})},CaptchaDomHelper.prototype.suppressCaptchaErrors=function(){var e=this;this.captchaBadges.forEach(function(t){t&&(e.suppressIframeErrors(t),t.parentNode&&e.suppressIframeErrors(t.parentNode))})},CaptchaDomHelper.prototype.suppressIframeErrors=function(e){var t=e.querySelector("iframe");t&&!t.onerror&&(t.onerror=noOp)},CaptchaDomHelper.onLoadFnName="captchaOnLoad",CaptchaDomHelper}(),ou=null,od=null;function injectCaptchaEnterprise(e){return function(t){var r,n,o,a=t.enterpriseConfig,i=t.isGoogleDomainNotAvailable,s=t.logger,l=__rest(t,["enterpriseConfig","isGoogleDomainNotAvailable","logger"]),c=__read$2((r={srcUrl:i?a.urlGlobal:a.url,siteKey:a.siteKey},(n=s.getLogger("captcha")).context.add({recaptchaLibraryUrl:r.srcUrl}),(!ou||rf)&&(ou=new oc(r)),(!od||rf)&&(od=new rk(r.siteKey,n)),o=ou.hasScript(),(0,em.useEffect)(function(){return(null==od?void 0:od.init())||null==ou||ou.addOnLoadHook(null==od?void 0:od.onCaptchaLoad),function(){null==od||od.cleanup()}},[ou,od,o]),[ou,od]),2),u=c[0],d=c[1];return em.createElement(em.Fragment,null,em.createElement(e3.q,null,!u.hasScript()&&em.createElement("script",{"data-key":"captcha",type:"text/javascript",src:u.getSrcUrl(),defer:!0,async:!0}),em.createElement("style",{"data-key":"captcha-style",type:"text/css"},".grecaptcha-badge { visibility: hidden; }")),em.createElement(e,__assign$2({},l,{logger:s,captchaEnterprise:d})))}}var op=new(function(){function SSOService(){}return Object.defineProperty(SSOService.prototype,"isContinueFlow",{get:function(){return!rf&&"true"===parseQuery(document.location.search).is_sso},enumerable:!1,configurable:!0}),Object.defineProperty(SSOService.prototype,"isUserCreated",{get:function(){return!rf&&"true"===parseQuery(document.location.search).sso_user_created},enumerable:!1,configurable:!0}),SSOService.prototype.isAutoStartFlow=function(e,t){return!!(!e.anonymous&&1===e.loginProviders.length&&"SSO"===e.loginProviders[0]&&t===G.SecureSignIn)},SSOService.prototype.getAuthActionType=function(){return this.isUserCreated?"SIGNUP":"SIGNIN"},SSOService.prototype.getRedirectLink=function(e,t){return composeUrl(e,{originalLocation:btoa(composeUrl(document.URL,{is_sso:!0,stateKey:t}))})},SSOService.prototype.generateStateKey=function(){return generateRandomString(30)},SSOService}()),StartSocialAuthFlow=function(e){var t=e.cookieDomain,r=e.socialOAuthConfig,n=e.onBeforeSocialRedirect,o=e.formKey,a=void 0===o?G.SignInInit:o,i=e.authSocialType,s=void 0===i?H.Social.Type.Google:i,l=a===G.NewAccount?"SIGNUP":"SIGNIN",c=useSocialOAuthRedirect({cookieDomain:t,formKey:a,oAuthConfig:r,authAction:l,onBeforeSocialRedirect:n}).getSocialOAuthRedirectUrl;return(0,em.useEffect)(function(){var e=c(s);window.location.assign(e)},[]),em.createElement(eb.k,{direction:"column",gap:2,align:"center"},em.createElement(ej.a,{accessibilityLabel:"Redirecting to Google"},em.createElement(ej.a.Branded,null)))},om=injectCaptchaEnterprise(function(e){function RootAuthContainer(t){var r=e.call(this,t)||this;r.handleSocialLoginHintFlow=function(e){r.model.onCallTrigger(createTrigger($.SignInSocialFlowStart,{provider:e,loginHint:r.props.loginHint}))},r.handleEmailSSOLoginHintFlow=function(e){r.props.defaultView===G.NewAccount?r.model.signUpViewModel.emailFlowModel.setEmail(e):(r.model.signInViewModel.emailFlowModel.setEmail(e),r.model.onCallTrigger(createTrigger($.SignInCheckEmailSubmit,{email:e})))},r.socialService=rG.get(t.config.cookieDomain);var n=getAuthFormCustomizations(t.customizationType).signin.signinEmailInputLabel;return r.model=new r7(t.api,t.captchaEnterprise,r.socialService,op,t.createMfaSupportTicket,t.tracker,{defaultView:t.defaultView,isGDPR:t.isGDPR,isExplicitToSAgreement:t.isExplicitToSAgreement,isIgnoreSignInSSO:t.isIgnoreSignInSSO,socialConfig:t.config.socialOAuth,disabledSocialProviders:t.disabledSocialProviders,initialEmail:t.initialEmail,initialInstitutionInviteKey:t.initialInstitutionInviteKey,initialError:t.initialError,signupEmailInputLabel:t.signupEmailInputLabel,signinEmailInputLabel:n,getAssignedCustomFields:t.getAssignedCustomFields,getCurrentUser:t.getCurrentUser,onAuthAttempt:t.onAuthAttempt,onAuthSuccess:t.onAuthSuccess,onAuthReject:t.onAuthReject,onBeforeSocialRedirect:t.onBeforeSocialRedirect,onAfterSocialRedirectReturn:t.onAfterSocialRedirectReturn,onFormRenderError:t.onFormRenderError,customEmailValidation:t.customEmailValidation,initialEmailDisabled:t.initialEmailDisabled,restrictedDomains:t.restrictedDomains,hasBusinessToSAgreement:t.hasBusinessToSAgreement,showLastName:t.showLastName,passwordlessSignup:t.passwordlessSignup,onAssignResetPasswordTreatment:t.onAssignResetPasswordTreatment,onAssignWelcomeBackSocialSigninTreatment:t.onAssignWelcomeBackSocialSigninTreatment,removeFbSignupOptionTreatment:t.removeFbSignupOptionTreatment,dedicatedSSOSigninTreatment:t.dedicatedSSOSigninTreatment,onAssignWelcomeBackSSOSigninTreatment:t.onAssignWelcomeBackSSOSigninTreatment,socialFirstSignupTreatment:t.socialFirstSignupTreatment,onAssignAccountNotExistTreatment:t.onAssignAccountNotExistTreatment,onCreateNewAccount:t.onCreateNewAccount}),r.socialAuthFlowProps={cookieDomain:t.config.cookieDomain,socialOAuthConfig:t.config.socialOAuth,formKey:t.defaultView===G.NewAccount?G.NewAccount:G.SignInInit,onBeforeSocialRedirect:t.onBeforeSocialRedirect},r}return __extends$1(RootAuthContainer,e),RootAuthContainer.prototype.componentDidMount=function(){var e=this.model.currentUser;if(op.isContinueFlow)this.model.onCallTrigger(createTrigger($.SSOFlowContinue,{action:op.getAuthActionType()}));else if(e&&op.isAutoStartFlow(e,this.props.defaultView))this.model.onCallTrigger(createTrigger($.SignInCheckEmailSubmit,{email:e.email}));else if(this.socialService.isContinueFlow)this.continueSocialFlow();else if(this.props.loginHint&&this.props.loginHintType){var t=this.props,r=t.loginHintType,n=t.loginHint,o=t.config;switch(r){case H.LoginType.email:case H.LoginType.sso:case H.LoginType.none:this.handleEmailSSOLoginHintFlow(n);break;case H.LoginType.apple:case H.LoginType.facebook:case H.LoginType.google:var a=function(e,t){switch(e){case H.LoginType.apple:return new rV(t.apple);case H.LoginType.facebook:return new rU(t.facebook);case H.LoginType.google:return new rN(t.google);default:throw Error("Unknown login type: ".concat(e))}}(r,o.socialOAuth);this.handleSocialLoginHintFlow(a);break;default:throw Error("Unknown loginHintType: ".concat(r))}}},RootAuthContainer.prototype.continueSocialFlow=function(){var e=__assign$2({},this.socialService.flowData);this.socialService.resetFlowData(),this.model.onCallTrigger(createTrigger($.SocialFlowContinue,e))},RootAuthContainer.prototype.render=function(){return this.props.acrValues===H.AcrValues.Google?em.createElement(StartSocialAuthFlow,__assign$2({},this.socialAuthFlowProps)):em.createElement(os,__assign$2({model:this.model},this.props))},RootAuthContainer}(em.PureComponent));em.memo(function(e){return em.createElement(om,__assign$2({},e,{enterpriseConfig:e.config.recaptcha.enterprise,defaultView:G.SecureSignIn}))}),em.memo(function(e){return em.createElement(om,__assign$2({},e,{enterpriseConfig:e.config.recaptcha.enterprise}))}),(A=el||(el={})).OAuthCodeVerifier="oauthCodeVerifier",A.userBusinessEmail="userBusinessEmail";var oh=function(){function WebStorage(e){this.storage=e}return Object.defineProperty(WebStorage.prototype,"isSupported",{get:function(){return!rf&&!!this.storage},enumerable:!1,configurable:!0}),WebStorage.prototype.setItem=function(e,t){var r;if(this.isSupported)try{null===(r=this.storage)||void 0===r||r.setItem(e,t)}catch(e){}},WebStorage.prototype.getItem=function(e,t){void 0===t&&(t=!1);var r,n=this.isSupported?null===(r=this.storage)||void 0===r?void 0:r.getItem(e):null;return t&&this.removeItem(e),n},WebStorage.prototype.removeItem=function(e){var t;if(this.isSupported)return null===(t=this.storage)||void 0===t?void 0:t.removeItem(e)},WebStorage}();function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ErrorIcon=({styles:e={},...t})=>em.createElement("svg",_extends({width:"210",height:"113",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),em.createElement("path",{d:"M143.422 14.778a10.958 10.958 0 003.146 5.538 4.937 4.937 0 011.067 5.815 11.646 11.646 0 00-.831 7.893c.718 3.025 2.495 5.505 4.807 7.089 1.629 1.114 2.447 3.22 1.81 5.09a9.958 9.958 0 00.402 7.14c1.615 3.56 5.304 5.864 9.223 5.735 6.37-.224 10.635-6.151 9.246-12.036-.312-1.374-.902-2.6-1.721-3.619-1.628-2.201-1.975-5.045-.925-7.546.927-2.236 1.163-4.779.584-7.308-.623-2.749-2.141-4.999-4.179-6.623-1.723-1.39-2.422-3.708-1.666-5.79.695-1.921.858-4.087.365-6.177-1.384-5.994-7.45-9.667-13.454-8.067-5.614 1.403-9.166 7.203-7.874 12.866z",fill:"#B1F0E8",stroke:"#1C1C1C",strokeWidth:"1.5",strokeMiterlimit:"10"}),em.createElement("path",{d:"M164.099 55.435l-1.111-4.947-9.124-39.099",fill:"#B1F0E8"}),em.createElement("path",{d:"M164.099 55.435l-1.111-4.947-9.124-39.099",stroke:"#1C1C1C",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round"}),em.createElement("path",{d:"M187.428 27.241a10.234 10.234 0 01-3.274 4.97 4.615 4.615 0 00-1.352 5.355 10.883 10.883 0 01.29 7.41c-.855 2.775-2.665 4.978-4.917 6.312-1.587.94-2.48 2.853-2 4.635a9.302 9.302 0 01-.815 6.631c-1.724 3.22-5.304 5.141-8.95 4.78-5.925-.6-9.537-6.388-7.88-11.79a8.296 8.296 0 011.827-3.267 7.153 7.153 0 001.327-6.979c-.728-2.141-.792-4.526-.096-6.848.75-2.524 2.303-4.529 4.303-5.917 1.692-1.19 2.486-3.309 1.909-5.296a10.188 10.188 0 01.04-5.781c1.658-5.502 7.539-8.554 13.038-6.693 5.147 1.653 8.102 7.278 6.55 12.478z",fill:"#B1F0E8",stroke:"#1C1C1C",strokeWidth:"1.5",strokeMiterlimit:"10"}),em.createElement("path",{d:"M165.653 63.873l1.339-4.544 10.91-35.89",fill:"#B1F0E8"}),em.createElement("path",{d:"M165.653 63.873l1.339-4.544 10.91-35.89",stroke:"#1C1C1C",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round"}),em.createElement("path",{d:"M178.504 82.966c-1.114-1.114-1.3-2.91-.557-4.333 1.114-1.918 1.733-4.208 1.733-6.684 0-3.095-1.052-5.942-2.785-8.232-1.114-1.485-.805-3.528.557-4.766.99-.804 1.795-1.733 2.537-2.723.681-.928.062-2.228-1.114-2.228H153.19c-1.114 0-1.795 1.3-1.114 2.228.742.99 1.671 1.919 2.537 2.723 1.362 1.176 1.671 3.343.557 4.766-1.733 2.29-2.785 5.137-2.785 8.232 0 2.414.619 4.704 1.733 6.684.743 1.362.619 3.095-.557 4.333-3.466 3.404-5.446 8.231-5.199 13.554.557 9.037 8.046 16.278 17.021 16.587a17.574 17.574 0 0018.072-17.639c.248-4.951-1.671-9.284-4.951-12.502z",fill:"#FFEBB8",stroke:"#1C1C1C",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round"}),em.createElement("path",{d:"M156.265 107.766H53.799V46.873a5.687 5.687 0 015.675-5.675h91.052a5.687 5.687 0 015.675 5.675v60.893h.064z",fill:"#ADBFF9",stroke:"#1C1C1C",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("path",{d:"M151 46H58v58h93V46z",fill:"#fff",stroke:"#1C1C1C",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("path",{d:"M160.624 113.947H49.44a6.422 6.422 0 01-6.44-6.44V104h124v3.507c0 3.571-2.869 6.44-6.376 6.44z",fill:"#7D99F0",stroke:"#1C1C1C",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),em.createElement("path",{d:"M110.113 56.368a7.23 7.23 0 00-10.226 0L86.368 69.887a7.231 7.231 0 000 10.226l13.519 13.519a7.23 7.23 0 0010.226 0l13.519-13.519a7.231 7.231 0 000-10.226l-13.519-13.519z",fill:"#FFA8A8",stroke:"#1C1C1C",strokeWidth:"1.5"}),em.createElement("path",{d:"M105 62.847a2.43 2.43 0 012.43 2.431V76.62a2.43 2.43 0 11-4.861 0V65.278a2.431 2.431 0 012.431-2.43zm0 24.495a2.43 2.43 0 100-4.86 2.43 2.43 0 000 4.86z",fill:"#fff"}),em.createElement("path",{d:"M105 62.847a2.43 2.43 0 012.43 2.431V76.62a2.43 2.43 0 11-4.861 0V65.278a2.431 2.431 0 012.431-2.43zm0 24.495a2.43 2.43 0 100-4.86 2.43 2.43 0 000 4.86zM0 114h210",stroke:"#1C1C1C",strokeWidth:"1.5"})),og=injectCaptchaEnterprise(function(e){var t,r,n=e.captchaEnterprise,o=e.api,a=e.getCurrentUser,i=e.onAuthSuccess,s=e.tracker,l=e.config,c=e.logger,u=__read$2((0,em.useState)(null),2),d=u[0],p=u[1],m=__read$2((0,em.useState)(!1),2),h=m[0],g=m[1],f=__read$2((0,em.useState)(""),2),v=f[0],y=f[1],_=__read$2((0,em.useState)(void 0),2),S=_[0],E=_[1],b=__read$2((0,em.useState)(""),2),w=b[0],C=b[1];(0,em.useEffect)(function(){var e=window.sessionStorage.getItem(el.userBusinessEmail);y(e||""),processPasswordlessSignupRequest(e)},[]);var processPasswordlessSignupRequest=function(e){return __awaiter(void 0,void 0,void 0,function(){var t,r;return __generator(this,function(n){switch(n.label){case 0:return g(!0),[4,safeCaptchaExecute()];case 1:return t=n.sent(),[4,submitSignUpRequest({groups:["newfunnel"],email_passwordless_signup:{email:e,name:a&&(null===(r=a())||void 0===r?void 0:r.name)||"",captchaTokenV3:t,emailVerification:!0}})];case 2:return n.sent(),[2]}})})},safeCaptchaExecute=function(){return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n.execute(rC)];case 1:return[2,e.sent()]}})})},submitSignUpRequest=function(e,t){return __awaiter(void 0,void 0,void 0,function(){var r,n,a,l,c,u,d,m,h;return __generator(this,function(f){switch(f.label){case 0:null===(d=s.trackAttempt)||void 0===d||d.call(s,{action:"SIGNUP",email:v},G.SignUpEmailVerification),f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,o.signup(__assign$2({},e))];case 2:return n=(r=f.sent()).action,(a=r.user)&&(null===(m=s.trackSuccess)||void 0===m||m.call(s,{action:n,email:v},G.SignUpEmailVerification),i({action:n,email:v},a)),[3,5];case 3:return l=f.sent(),null===(h=s.trackFail)||void 0===h||h.call(s,l,{email:v,action:"SIGNUP"},G.SignUpEmailVerification),c=H.Error.AuthCommonError.create(l),H.Error.matchErrCode(c.errCode,((u={})[H.Error.ApiErrorCode.EmailVerificationCode]=function(){E(G.SignUpEmailVerification)},u[H.Error.ApiErrorCode.SignUpEmailVerification]=function(){E(G.SignUpEmailVerification)},u[H.Error.ApiErrorCode.UseEmail]=function(){E(G.SignInWithPassword)},u[H.Error.ApiErrorCode.UseSso]=function(){var e,t=null===(e=c.nestedError.context)||void 0===e?void 0:e.redirectTo;t&&redirectToSSOProvider(t)},u[H.Error.ApiErrorCode.ShowCaptcha]=function(){E(G.Captcha)},u.default=function(){"handleVerificationCodeSubmit"===t?p(t):p("genericError")},u)),[3,5];case 4:return g(!1),[7];case 5:return[2]}})})};return h?em.createElement(eb.k,{direction:"column",width:"100%",height:"100%",paddingLeft:4,paddingRight:4},em.createElement(e$.g,{accessibilityLabel:"Loading"},em.createElement(eb.k,{direction:"column",gap:4,width:"100%",height:"100%",padding:4},em.createElement(e$.g.Text,{variant:"text-small",width:"20%"}),em.createElement(e$.g.Heading,{variant:"heading-medium",width:"80%"}),em.createElement(eb.k,{gap:2,direction:"column"},em.createElement(e$.g.Text,{variant:"text-small",width:"100%"}),em.createElement(e$.g.Text,{variant:"text-small",width:"40%"})),em.createElement(eb.k,{gap:2},em.createElement(e$.g.Rectangle,{width:50,height:50}),em.createElement(e$.g.Rectangle,{width:50,height:50}),em.createElement(e$.g.Rectangle,{width:50,height:50}),em.createElement(e$.g.Rectangle,{width:50,height:50}),em.createElement(e$.g.Rectangle,{width:50,height:50}),em.createElement(e$.g.Rectangle,{width:50,height:50})),em.createElement(eb.k,{gap:2,direction:"column"},em.createElement(e$.g.Text,{variant:"text-xsmall",width:"100%"}),em.createElement(e$.g.Text,{variant:"text-xsmall",width:"60%"})),em.createElement(e$.g.Button,{width:"100%"}),em.createElement(eb.k,{gap:2,direction:"column"},em.createElement(e$.g.Text,{variant:"text-xsmall",width:"100%"}),em.createElement(e$.g.Text,{variant:"text-xsmall",width:"50%"})),em.createElement(eb.k,{gap:2,direction:"column"},em.createElement(e$.g.Text,{variant:"text-xsmall",width:"100%"}),em.createElement(e$.g.Text,{variant:"text-xsmall",width:"70%"}))))):S===G.SignInWithPassword?em.createElement(om,__assign$2({},e,{enterpriseConfig:l.recaptcha.enterprise})):S===G.Captcha?em.createElement(nV,{supportNewRequestUrl:l.supportNewRequestUrl,action:"SIGNUP",siteKey:l.recaptcha.visibleEnterprise.siteKey,srcUrl:l.recaptcha.visible.url,trackFormShow:s.trackFormShow,logger:c,onSuccess:function(e){return __awaiter(void 0,void 0,void 0,function(){var t,r;return __generator(this,function(n){switch(n.label){case 0:return g(!0),[4,safeCaptchaExecute()];case 1:return t=n.sent(),[4,submitSignUpRequest({groups:["newfunnel"],email_passwordless_signup:{email:v,name:a&&(null===(r=a())||void 0===r?void 0:r.name)||"",visibleCaptchaToken:e,captchaTokenV3:t,emailVerification:!0,emailVerificationCode:w}})];case 2:return n.sent(),[2]}})})}}):S===G.SignUpEmailVerification||"handleVerificationCodeSubmit"===d?em.createElement(eb.k,{direction:"column",width:"100%",height:"100%",paddingLeft:4,paddingRight:4},em.createElement(e_.r,{href:(null===(t=null==l?void 0:l.funnel)||void 0===t?void 0:t.checkBusinessEmail)||"https://www.grammarly.com/check-business-email",style:{textDecoration:"none"}},em.createElement(eb.k,{gap:1,align:"center",paddingTop:"5.5px",paddingRight:8,paddingBottom:"5.5px","justify-content":"center","align-items":"center"},em.createElement(ew.J,{icon:eV.n,size:"small",accessibilityLabel:"back button",variant:"inherit"}),em.createElement(eg.x,{as:"span",variant:"text-small",weight:"bold"},"Back"))),em.createElement(eF.X,{as:"h1",variant:"heading-medium",marginTop:5},"Verify your email address"),em.createElement(eg.x,{as:"p",variant:"text-small",marginTop:3},"Enter the code sent to ".concat(v," using numbers 0-9.")),em.createElement(eb.k,{paddingTop:3,paddingBottom:3},em.createElement(eN.B,{size:"large",legend:"email verification code",onChange:function(e){return C(e)},isDisabled:h})),em.createElement(GrammarlyTermsOfServiceSignupTextXSmall,null),em.createElement(eb.k,{direction:"column",paddingTop:5,paddingBottom:5},em.createElement(eP.z,{width:"full",text:"Agree and sign up",isDisabled:h,onClick:function(){return __awaiter(void 0,void 0,void 0,function(){var e,t,r;return __generator(this,function(n){switch(n.label){case 0:return null===(t=s.trackSubmitButtonClick)||void 0===t||t.call(s,{action:"SIGNUP",email:v},G.SignUpEmailVerification),g(!0),[4,safeCaptchaExecute()];case 1:return e=n.sent(),[4,submitSignUpRequest({groups:["newfunnel"],email_passwordless_signup:{email:v,name:a&&(null===(r=a())||void 0===r?void 0:r.name)||"",captchaTokenV3:e,emailVerification:!0,emailVerificationCode:w}},"handleVerificationCodeSubmit")];case 2:return n.sent(),[2]}})})}})),em.createElement(TermsOfServiceFooter,{isGDPR:!1}),"handleVerificationCodeSubmit"===d&&em.createElement("div",{style:{position:"fixed",bottom:"1rem",right:"1rem",zIndex:"1000"}},em.createElement(eM.F,{text:"Something went wrong. Please try again later.",variant:"critical",onClose:function(){p(null)}}))):em.createElement("div",null,em.createElement(eb.k,{direction:"column",align:"center"},em.createElement(ErrorIcon,null),em.createElement(eF.X,{as:"h1",variant:"heading-large",marginTop:8},"Something went wrong"),em.createElement(eg.x,{as:"p",variant:"text-medium",marginTop:3,marginBottom:8},"Please reload the page and try again. If that doesn't fix the problem, contact Support for assistance."),em.createElement(eb.k,null,em.createElement(eP.z,{text:"Contact support",onClick:function(){window.open(l.supportNewRequestUrl,"_blank")}})),em.createElement(eg.x,{as:"span",variant:"text-small",weight:"bold",marginTop:5},em.createElement(e_.r,{href:(null===(r=null==l?void 0:l.funnel)||void 0===r?void 0:r.checkBusinessEmail)||"https://www.grammarly.com/check-business-email",style:{textDecoration:"none"}},"Reload the page"))))});em.memo(function(e){return em.createElement("div",null,e.passwordlessSignup?em.createElement(og,__assign$2({},e,{enterpriseConfig:e.config.recaptcha.enterprise})):em.createElement(om,__assign$2({},e,{enterpriseConfig:e.config.recaptcha.enterprise,defaultView:G.NewAccount})))});var of=G.NewAccountMask,SignUpFormMask=function(e){var t=e.api,r=e.emailInputLabel,n=e.hideTitle,o=e.hideTitleLink,a=e.onFormSubmitSuccess,i=e.onTitleLinkClick,s=e.subtitle,l=e.title,c=void 0===l?"Sign up":l,u=e.titleHeadingHtmlTag,d=e.titleLinkHref,p=e.tracker,m=__read$2((0,em.useState)(""),2),h=m[0],g=m[1],f=__read$2((0,em.useState)(rm.valid),2),v=f[0],y=f[1],_=__read$2((0,em.useState)(!1),2),S=_[0],E=_[1];return(0,em.useEffect)(function(){var e;null===(e=p.trackFormShow)||void 0===e||e.call(p,of)},[]),em.createElement(Form,{onSubmit:function(){return __awaiter(void 0,void 0,void 0,function(){var e,r,n,o,i,s,l;return __generator(this,function(c){switch(c.label){case 0:if(y(e=h?rm.valid:rm.required),null===(s=p.trackSubmitButtonClick)||void 0===s||s.call(p,{action:"SIGNUP",email:"true"},of,extractErrors({email:e.status})),e!==rm.valid)return[3,5];E(!0),r={accountExists:!1,loginType:H.LoginType.none},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,t.getAuthInfo(h)];case 2:return r={accountExists:(n=c.sent()).accountExists,loginType:o=n.loginType},i=o===H.LoginType.google||o===H.LoginType.facebook||o===H.LoginType.apple,null===(l=p.trackAuthInfoRequestSuccess)||void 0===l||l.call(p,of,o,i),[3,4];case 3:return c.sent(),[3,4];case 4:a(__assign$2(__assign$2({},r),{email:h})),E(!1),c.label=5;case 5:return[2]}})})},"aria-labelledby":"signUpFormTitle"},!n&&em.createElement(BaseTitle,{hideLink:o,linkHref:d,linkText:"I have an account",onLinkClick:i,headingHtmlTag:u,subtitle:s},em.createElement("span",{id:"signUpFormTitle"},c)),em.createElement("div",{className:cn(nC.textFieldsContainer,tc)},em.createElement(ru,{required:!0,autoComplete:"email",spellCheck:!1,name:"email",label:void 0===r?"Email":r,type:"email",validity:v,value:h,onChange:function(e){g(e)}})),em.createElement(GrammarlySignupMaskPrivacyPolicyText,{trackPrivacyPolicyLink:function(){var e;return null===(e=p.trackToSLinkFollow)||void 0===e?void 0:e.call(p,H.Tracking.ToSLinkType.PrivacyPolicy)},trackPrivacyPolicyCALink:function(){var e;return null===(e=p.trackToSLinkFollow)||void 0===e?void 0:e.call(p,H.Tracking.ToSLinkType.CAPrivacyPolicy)}}),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(SubmitAuthButton,{text:"Continue",status:S?L.Loading:L.Active}))},ov=function(){function ResetPasswordFlowModel(e,t,r,n,o){this.api=e,this.track=t,this.onNavToSignIn=r,this.initialEmail=n,this.initialError=o,this.currentView=G.ResetPassword}return Object.defineProperty(ResetPasswordFlowModel.prototype,"resetPasswordViewModel",{get:function(){return!this._resetPasswordViewModel&&(this._resetPasswordViewModel=new rw(this.api,this.initialEmail),this.initialError&&this._resetPasswordViewModel.setPayload(new rb.Error(H.Error.AuthCommonError.create(Error(this.initialError))))),this._resetPasswordViewModel},enumerable:!1,configurable:!0}),ResetPasswordFlowModel.prototype.onCallTrigger=function(e){e===q.ToForgotEmail?this.currentView=G.ForgotEmail:e===q.ToResetPassword?this.currentView=G.ResetPassword:e===q.ToSignIn?this.onNavToSignIn():e.key===$.ResetPasswordSubmit&&this.processResetRequest(e.data.email)},ResetPasswordFlowModel.prototype.processResetRequest=function(e){var t,r,n,o,a,i;return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),null===(r=(t=this.track).trackAttempt)||void 0===r||r.call(t),this.resetPasswordViewModel.setPayload(new rb.Loading),[4,this.api.resetPassword(e).catch(function(e){if(!D.isAuthLegacyApiError(e))throw e})];case 1:return l.sent(),this.currentView=G.ResetPasswordEmailSent,this.resetPasswordViewModel.setPayload(new rb.Value(void 0)),null===(o=(n=this.track).trackSuccess)||void 0===o||o.call(n),[3,3];case 2:return s=l.sent(),this.resetPasswordViewModel.setPayload(new rb.Error(s)),null===(i=(a=this.track).trackFail)||void 0===i||i.call(a,s),[3,3];case 3:return[2]}})})},__decorate([observable,__metadata("design:type",String)],ResetPasswordFlowModel.prototype,"currentView",void 0),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],ResetPasswordFlowModel.prototype,"onCallTrigger",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],ResetPasswordFlowModel.prototype,"processResetRequest",null),ResetPasswordFlowModel}();!function(e){function ResetPassword(t){var r=e.call(this,t)||this;return r.model=new ov(t.api,t.tracker,t.onNavToSignIn,t.initialEmail,t.initialError),r}__extends$1(ResetPassword,e),ResetPassword.prototype.render=function(){return this.renderCurrentStep()},ResetPassword.prototype.renderCurrentStep=function(){switch(this.model.currentView){case G.ResetPassword:return this.renderResetPasswordForm();case G.ResetPasswordEmailSent:return this.renderResetPasswordEmailSentForm();case G.ForgotEmail:return this.renderForgotEmailForm()}},ResetPassword.prototype.renderResetPasswordForm=function(){return em.createElement(nx,{model:this.model.resetPasswordViewModel,onCallTrigger:this.model.onCallTrigger})},ResetPassword.prototype.renderResetPasswordEmailSentForm=function(){return em.createElement(ResetPasswordEmailSentForm,{onCallTrigger:this.model.onCallTrigger})},ResetPassword.prototype.renderForgotEmailForm=function(){return em.createElement(ForgotEmailForm,{supportNewRequestUrl:this.props.config.supportNewRequestUrl,onCallTrigger:this.model.onCallTrigger})},ResetPassword=__decorate([observer,__metadata("design:paramtypes",[Object])],ResetPassword)}(em.PureComponent);var oy=function(){function SetPasswordModel(e){this.api=e,this.payload=new rb.Empty,this.passwordModel=new rP(this.api,Y.StrictPlusLeaked)}return SetPasswordModel.prototype.getData=function(){return{newPassword:this.passwordModel.value}},SetPasswordModel.prototype.validate=function(){var e;return[(e=__read$2(this.passwordModel.validate(),2))[0],{password:e[1]}]},SetPasswordModel.prototype.setPayload=function(e){this.payload=e},__decorate([observable.ref,__metadata("design:type",Object)],SetPasswordModel.prototype,"payload",void 0),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Array)],SetPasswordModel.prototype,"validate",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SetPasswordModel.prototype,"setPayload",null),SetPasswordModel}(),o_=function(){function SetPasswordFlowModel(e,t,r,n){this.api=e,this.tracker=t,this.onNavToSignIn=r,this.onNavToResetForm=n,this.currentView=G.VerifyResetKey}return Object.defineProperty(SetPasswordFlowModel.prototype,"setPasswordViewModel",{get:function(){return this._setPasswordViewModel||(this._setPasswordViewModel=new oy(this.api)),this._setPasswordViewModel},enumerable:!1,configurable:!0}),SetPasswordFlowModel.prototype.onCallTrigger=function(e){e===q.ToSignIn?this.onNavToSignIn():e===q.ToResetPassword?this.onNavToResetForm():e.key===$.VerifyPasswordResetKeySubmit?this.processVerificationRequest(e.data.resetKey):e.key===$.SetNewPasswordSubmit&&this.processSetRequest(e.data.newPassword,this.resetKey)},SetPasswordFlowModel.prototype.processSetRequest=function(e,t){var r,n,o,a;return __awaiter(this,void 0,void 0,function(){var i,s;return __generator(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),this.setPasswordViewModel.setPayload(new rb.Loading),[4,this.api.setPassword(e,t)];case 1:return l.sent(),null===(n=(r=this.tracker).trackSuccess)||void 0===n||n.call(r),this.currentView=G.SetNewPasswordUpdated,this.setPasswordViewModel.setPayload(new rb.Value(void 0)),[3,3];case 2:if(i=l.sent(),null===(a=(o=this.tracker).trackFail)||void 0===a||a.call(o,i),D.isHTTPError(i)&&(s=D.tryGetErrorFromHTTPError(i))){if(D.isChangePasswordHTTPError(s))return this.setPasswordViewModel.setPayload(new rb.Empty),this.setPasswordViewModel.passwordModel.setValidityFromError(s),[2];if(D.errCodeEqualsTo(s.error,D.ApiErrorCode.InternalRuntimeError))return this.onNavToResetForm(i.message),[2]}return this.setPasswordViewModel.setPayload(new rb.Error(i)),[3,3];case 3:return[2]}})})},SetPasswordFlowModel.prototype.processVerificationRequest=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.resetKey=e,[4,this.api.validatePasswordResetKey(e)];case 1:return r.sent(),this.currentView=G.SetNewPassword,[3,3];case 2:return t=r.sent(),this.onNavToResetForm(t),[3,3];case 3:return[2]}})})},__decorate([observable,__metadata("design:type",String)],SetPasswordFlowModel.prototype,"currentView",void 0),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],SetPasswordFlowModel.prototype,"onCallTrigger",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[String,String]),__metadata("design:returntype",Promise)],SetPasswordFlowModel.prototype,"processSetRequest",null),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],SetPasswordFlowModel.prototype,"processVerificationRequest",null),SetPasswordFlowModel}(),oS=observer(function(e){var t=e.model,r=e.supportNewRequestUrl,n=e.onCallTrigger,o=e.hideTitle,a=e.hideTitleLink,i=e.titleHeadingHtmlTag,s=(0,em.useCallback)(function(){__read$2(t.validate(),1)[0]&&n(createTrigger($.SetNewPasswordSubmit,t.getData()))},[t,n]);return em.createElement(Form,{onSubmit:s},!o&&em.createElement(BaseTitle,{hideLink:a,linkText:"Back to sign-in",onLinkClick:function(){return n(q.ToSignIn)},headingHtmlTag:i},"Set new password"),em.createElement(MediumText,{color:"neutral60"},"Create a new password for your account. If you have a problem resetting your password, please"," ",em.createElement(Link,{to:r,variant:"primary",openInNewWindow:!0},"contact Support"),"."),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement(rF,{qa:"txtPassword",model:t.passwordModel,readOnly:t.payload.isLoading(),label:"New password"}),em.createElement(VerticalSpacer,{multiplier:2}),t.payload.isError()&&t.payload.getErrorMessage()&&em.createElement(em.Fragment,null,em.createElement(ErrorAlert,null,"Unable to set a new password. Please wait a moment and try again."),em.createElement(VerticalSpacer,{multiplier:1})),em.createElement(SubmitAuthButton,{qa:"btnSetNewPassword",status:t.payload.isLoading()?L.Loading:L.Active,text:"Reset password"}))}),SetPasswordUpdatedForm=function(e){var t=e.supportNewRequestUrl,r=e.onCallTrigger,n=e.hideTitle,o=e.hideTitleLink,a=e.titleHeadingHtmlTag,i=(0,em.useCallback)(function(){r(q.ToSignIn)},[r]);return(0,em.useEffect)(function(){var e=window.setTimeout(i,1e3);return function(){e&&window.clearTimeout(e)}},[]),em.createElement(BaseContainer,null,!n&&em.createElement(BaseTitle,{hideLink:o,linkText:"Back to sign in",onLinkClick:i,headingHtmlTag:a},"Set new password"),em.createElement(MediumText,{color:"neutral60"},"Create a new password for your account. If you have a problem resetting your password, please"," ",em.createElement(Link,{to:t,variant:"primary",openInNewWindow:!0},"contact Support"),"."),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement(SuccessAlert,null,em.createElement(SmallText,null,"Your password has been reset.",em.createElement("br",null),"We are redirecting you...")),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(ButtonBase,{text:"Back to Sign in",status:L.Loading,onClick:i}))},noop=function(){},VerifyResetKeyForm=function(e){var t=e.supportNewRequestUrl,r=e.onCallTrigger,n=e.resetKey,o=e.hideTitle,a=e.hideTitleLink,i=e.titleHeadingHtmlTag,s=(0,em.useCallback)(function(){r(q.ToSignIn)},[r]);return(0,em.useEffect)(function(){r(createTrigger($.VerifyPasswordResetKeySubmit,{resetKey:n||""}))},[n,r]),em.createElement(BaseContainer,null,!o&&em.createElement(BaseTitle,{hideLink:a,linkText:"Back to sign-in",onLinkClick:s,headingHtmlTag:i},"Set new password"),em.createElement(MediumText,{color:"neutral60"},"Verifying the reset password key. If you have a problem resetting your password, please"," ",em.createElement(Link,{to:t,variant:"primary",openInNewWindow:!0},"contact Support"),"."),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement(ButtonBase,{text:"Verifying",status:L.Loading,onClick:noop}))};!function(e){function SetPassword(t){var r=e.call(this,t)||this;return r.model=new o_(t.api,t.tracker,t.onNavToSignIn,t.onNavToResetForm),r}__extends$1(SetPassword,e),SetPassword.prototype.render=function(){return this.renderCurrentStep()},SetPassword.prototype.renderCurrentStep=function(){switch(this.model.currentView){case G.VerifyResetKey:return this.renderVerifyResetKeyForm();case G.SetNewPassword:return this.renderSetNewPasswordForm();case G.SetNewPasswordUpdated:return this.renderSetNewPasswordUpdatedForm()}},SetPassword.prototype.renderVerifyResetKeyForm=function(){return em.createElement(VerifyResetKeyForm,__assign$2({},this.props,{supportNewRequestUrl:this.props.config.supportNewRequestUrl,onCallTrigger:this.model.onCallTrigger}))},SetPassword.prototype.renderSetNewPasswordForm=function(){return em.createElement(oS,__assign$2({},this.props,{model:this.model.setPasswordViewModel,supportNewRequestUrl:this.props.config.supportNewRequestUrl,onCallTrigger:this.model.onCallTrigger}))},SetPassword.prototype.renderSetNewPasswordUpdatedForm=function(){return em.createElement(SetPasswordUpdatedForm,__assign$2({},this.props,{supportNewRequestUrl:this.props.config.supportNewRequestUrl,onCallTrigger:this.model.onCallTrigger}))},SetPassword=__decorate([observer,__metadata("design:paramtypes",[Object])],SetPassword)}(em.PureComponent);var oE=new Set(Object.keys(H.OAuth.ClientId).map(function(e){return H.OAuth.ClientId[e]})),isPreApprovedClientId=function(e){return oE.has(e)};(M=ec||(ec={})).Grammarly="Grammarly",M.Safari="Safari Extension",M.IOSKeyboard="Grammarly Keyboard for iOS",M.AndroidKeyboard="Grammarly Keyboard for Android",M.OfficeAddin="Grammarly for Microsoft Office",M.GrammarlyEditor="Grammarly Editor";var getOAuthClientName=function(e){switch(e){case H.OAuth.ClientId.MobileIOS:return ec.IOSKeyboard;case H.OAuth.ClientId.MobileAndroid:return ec.AndroidKeyboard;case H.OAuth.ClientId.SafariExtension:return ec.Safari;case H.OAuth.ClientId.OfficeAddin:return ec.OfficeAddin;case H.OAuth.ClientId.DesktopEditor:return ec.GrammarlyEditor}if(e&&isPreApprovedClientId(e))return ec.Grammarly;throw Error("Unregistered oAuth Client")},ob=new Map([[H.OAuth.ClientId.AndroidSDK,"grammarly.sdk://oauth/autologin"],[H.OAuth.ClientId.MobileIOS,"grammarly://oauth/autologin"]]),buildRedirectUrl=function(e,t){var r,n=e.clientId,o=e.redirectForwardState,a=e.externalState;return"".concat(ob.get(n),"?").concat(buildQueryString(((r={}).state=o,r.state_key=a,r.code_challenge=t,r.client_id=H.OAuth.ClientId.Funnel,r)))},ow=function(){function OAuthAutoSignInModel(e,t,r,n,o){this.api=e,this.getCurrentUser=t,this.onSuccess=r,this.onRedirect=n,this.onError=o,this.payload=new rb.Empty,this.storage=new oh("undefined"!=typeof window?window.localStorage:void 0)}return OAuthAutoSignInModel.prototype.tryStep=function(e){var t;return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(n){switch(n.label){case 0:if(!(e.clientId&&e.externalState&&ob.has(e.clientId)))return[3,2];return[4,this.checkCurrentUser(e)];case 1:if(n.sent())return[2,this.completeFlow()];return[2,this.initStep(e)];case 2:if(e.code&&e.codeChallenge)return[2,this.verifyStep(e)];n.label=3;case 3:return r=new rb.Error(D.AuthCommonError.createFromError(D.UiErrorCode.Unknown,Error("Invalid step params were provided"))),this.setPayload(r),null===(t=this.onError)||void 0===t||t.call(this,r.error,r.nonce),[2]}})})},OAuthAutoSignInModel.prototype.setPayload=function(e){this.payload=e},OAuthAutoSignInModel.prototype.initStep=function(e){var t;return __awaiter(this,void 0,void 0,function(){var r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.setPayload(new rb.Loading),[4,digestMessage(r=generateRandomString(128))];case 1:return n=i.sent(),this.storage.setItem(el.OAuthCodeVerifier,r),this.setPayload(new rb.Value(void 0)),this.onRedirect(buildRedirectUrl(e,n),ob.get(e.clientId)),[3,3];case 2:return o=i.sent(),a=new rb.Error(o),this.setPayload(a),null===(t=this.onError)||void 0===t||t.call(this,a.error,a.nonce),[3,3];case 3:return[2]}})})},OAuthAutoSignInModel.prototype.verifyStep=function(e){var t;return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:if(a.trys.push([0,3,,4]),this.setPayload(new rb.Loading),!(r=this.storage.getItem(el.OAuthCodeVerifier,!0)))throw Error("Cannot find the flow to continue");return[4,digestMessage(r)];case 1:if(a.sent()!==e.codeChallenge)throw Error("Params mismatch");return[4,this.api.oAuthCodeExchangeRequest(H.OAuth.ClientId.Funnel,e.code,r)];case 2:return a.sent(),this.completeFlow(),this.setPayload(new rb.Value(void 0)),[3,4];case 3:return n=a.sent(),o=new rb.Error(n),this.setPayload(o),null===(t=this.onError)||void 0===t||t.call(this,o.error,o.nonce),[3,4];case 4:return[2]}})})},OAuthAutoSignInModel.prototype.checkCurrentUser=function(e){var t,r;return __awaiter(this,void 0,void 0,function(){var n,o;return __generator(this,function(a){switch(a.label){case 0:if(!e.sessionToken)return[3,5];a.label=1;case 1:if(a.trys.push([1,4,,5]),!((n=null===(t=this.getCurrentUser)||void 0===t?void 0:t.call(this))&&!n.anonymous))return[3,3];return[4,digestMessage("".concat(n.id).concat(e.externalState))];case 2:if(a.sent()===e.sessionToken)return[2,!0];a.label=3;case 3:return[3,5];case 4:return o=a.sent(),null===(r=this.onError)||void 0===r||r.call(this,o),[3,5];case 5:return[2,!1]}})})},OAuthAutoSignInModel.prototype.completeFlow=function(){return this.onSuccess()},__decorate([observable.ref,__metadata("design:type",Object)],OAuthAutoSignInModel.prototype,"payload",void 0),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],OAuthAutoSignInModel.prototype,"tryStep",null),OAuthAutoSignInModel}(),ErrorBlock=function(e){var t=e.title,r=e.message,n=e.nonce;return em.createElement("div",{className:"index-module_alertContainer__VGXA-"},em.createElement(H3,{textAlign:"center"},t),em.createElement(VerticalSpacer,{multiplier:3}),em.createElement(ErrorAlert,null,em.createElement(SmallText,null,r),n&&em.createElement(em.Fragment,null,em.createElement(VerticalSpacer,{multiplier:4}),em.createElement(SmallText,null,"Error: ",n))))};!function(e){function OAuthAutoSignIn(t){var r=e.call(this,t)||this;return r.model=new ow(t.api,t.getCurrentUser,t.onSuccess,t.onRedirect,t.onError),r}__extends$1(OAuthAutoSignIn,e),OAuthAutoSignIn.prototype.componentDidMount=function(){this.model.tryStep(this.props.params)},OAuthAutoSignIn.prototype.render=function(){var e=this.props.supportNewRequestUrl,t=this.model.payload;return em.createElement("div",{className:"index-module_container__Cimek"},t.isError()?em.createElement(em.Fragment,null,em.createElement(ErrorBlock,{title:"Authorisation Error",message:"Unable to sign in due to an error. Please return to the application and try again.",nonce:t.nonce}),em.createElement(TroubleshootLink,{to:e,openInNewWindow:!0},"Contact Support")):em.createElement(Loader$1,{color:"neutral40",stylesOverrides:{width:100,height:100}}))},OAuthAutoSignIn=__decorate([observer,__metadata("design:paramtypes",[Object])],OAuthAutoSignIn)}(em.PureComponent);var GoogleSocialStartFlowButton=function(e){return em.createElement(SocialAuthButton,{className:e.className,authSocialType:H.Social.Type.Google,text:e.text,onClick:e.onClick,showArrow:e.showArrow,isPrimaryColor:e.isPrimaryColor})},oC=function(){function GoogleOneTapFlowModel(e,t,r,n,o,a){var i=this;this.api=e,this.ssoService=t,this.grammarlyAuthTracker=r,this.googleAuthTracker=n,this.rootLogger=o,this.options=a,this.formKey=G.GoogleOneTapSignUp,this.showExplicitTermsOfService=!1,this.onTrackToSLinkFollow=function(e){var t,r;try{null===(r=(t=i.grammarlyAuthTracker).trackToSLinkFollow)||void 0===r||r.call(t,e)}catch(e){}},this.onCloseTermsModal=function(){i.showExplicitTermsOfService=!1,i.googleAuthToken=void 0},this.onAgreeAndSignUp=function(){i.googleAuthToken&&i.signupGrammarly(i.googleAuthToken)},this.initSSOContinueFlow=function(e){var t={action:i.ssoService.getAuthActionType(),email:"sso_dummy",isSSO:!0};i.onAuthSuccess(t,e)},this.tryToInitGoogleOneTap=function(e){void 0===e&&(e="init"),i.initGoogleOneTap()?i.logger.info("Successfully initialized Google One Tap",{callContext:e}):(i.logger.error("Failed to initialize Google One Tap",{callContext:e}),"onLoad"!==e&&window.addEventListener("load",function(){i.tryToInitGoogleOneTap("onLoad")}))},this.initGoogleOneTap=function(){var e,t;return null!==(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)&&void 0!==t&&!!t.id&&(window.google.accounts.id.initialize({client_id:i.options.googleClientId,callback:i.onOneTapAuth,context:"signup"}),window.google.accounts.id.prompt(i.onOneTapPopupChange),!0)},this.onOneTapAuth=function(e){return __awaiter(i,void 0,void 0,function(){var t,r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:if(s.trys.push([0,4,,5]),!(t=e.credential))return[3,2];return null===(o=(n=this.googleAuthTracker).trackGoogleAuthSuccess)||void 0===o||o.call(n),[4,this.signinGrammarly(t)];case 1:return s.sent(),[3,3];case 2:throw null===(i=(a=this.googleAuthTracker).trackGoogleAuthFail)||void 0===i||i.call(a),Error("Google One Tap auth response does not include credential Google ID token");case 3:return[3,5];case 4:return r=s.sent(),this.logger.error("Failed to authenticate user via Google One Tap",{error:r}),[3,5];case 5:return[2]}})})},this.onOneTapPopupChange=function(e){var t,r,n,o;e.isSkippedMoment()&&(null===(r=(t=i.googleAuthTracker).trackOneTapPopupChange)||void 0===r||r.call(t,"SKIPPED")),e.isDismissedMoment()&&(null===(o=(n=i.googleAuthTracker).trackOneTapPopupChange)||void 0===o||o.call(n,"DISMISSED",e.getDismissedReason()))},this.signupGrammarly=function(e){return __awaiter(i,void 0,void 0,function(){var t,r,n,o,a,i,s,l;return __generator(this,function(c){switch(c.label){case 0:t={action:"SIGNUP",socialType:H.Social.Type.Google},r=this.termsModel.getData(),c.label=1;case 1:return c.trys.push([1,4,,5]),this.onAuthAttempt(t,r),[4,this.api.signup({google_signup:{access_token:e},custom_fields:removeEmptyKeys(__assign$2(__assign$2({},null===(l=(s=this.options).getAssignedCustomFields)||void 0===l?void 0:l.call(s,t.action)),{disableMarketingEmails:null===r.isMarketingEmailsAllowed?void 0:!r.isMarketingEmailsAllowed}))})];case 2:return n=(i=c.sent()).action,o=i.user,t=__assign$2(__assign$2({},t),{action:n}),[4,this.onAuthSuccess(t,o,r)];case 3:return c.sent(),[3,5];case 4:return a=c.sent(),this.onAuthFail(t,H.Error.AuthCommonError.create(a),r),[3,5];case 5:return[2]}})})},this.signinGrammarly=function(e){return __awaiter(i,void 0,void 0,function(){var t,r,n,o,a,i,s,l,c,u=this;return __generator(this,function(d){switch(d.label){case 0:t={action:"SIGNIN",socialType:H.Social.Type.Google},d.label=1;case 1:return d.trys.push([1,4,,5]),this.onAuthAttempt(t),[4,this.api.loginGeneric({google_login:{access_token:e},custom_fields:removeEmptyKeys(__assign$2(__assign$2({},null===(c=(l=this.options).getAssignedCustomFields)||void 0===c?void 0:c.call(l,t.action)),{implicitSignupAllowed:!1}))})];case 2:return r=(i=d.sent()).action,n=i.user,t=__assign$2(__assign$2({},t),{action:r}),[4,this.onAuthSuccess(t,n)];case 3:return d.sent(),[3,5];case 4:return o=d.sent(),a=H.Error.AuthCommonError.create(o),H.Error.matchErrCode(a.errCode,((s={})[H.Error.ApiErrorCode.ExplicitSignUpRequired]=function(){u.trackAuthFail(t,a),u.showExplicitTermsOfService=!0,u.googleAuthToken=e},s[H.Error.ApiErrorCode.UseSso]=function(){var e,r=null===(e=a.nestedError.context)||void 0===e?void 0:e.redirectTo;r?(u.trackAuthFail(t,a),u.processSSOStartRequest({action:t.action,email:"sso_dummy",isSSO:!0},r)):u.onAuthFail(t,a)},s.default=function(){u.onAuthFail(t,a)},s)),[3,5];case 5:return[2]}})})},this.onAuthAttempt=function(e,t){var r,n,o,a;try{null===(n=(r=i.grammarlyAuthTracker).trackAttempt)||void 0===n||n.call(r,e,i.formKey,t),null===(a=(o=i.options).onAuthAttempt)||void 0===a||a.call(o,e)}catch(e){}},this.onAuthSuccess=function(e,t,r){return __awaiter(i,void 0,void 0,function(){var n,o;return __generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),null===(o=(n=this.grammarlyAuthTracker).trackSuccess)||void 0===o||o.call(n,e,this.formKey,r),[4,this.options.onAuthSuccess(e,t)];case 1:case 2:return a.sent(),[3,3];case 3:return[2]}})})},this.onAuthFail=function(e,t,r){var n,o;try{i.trackAuthFail(e,t,r),null===(o=(n=i.options).onAuthReject)||void 0===o||o.call(n,e,t)}catch(e){}},this.trackAuthFail=function(e,t,r){var n,o;try{null===(o=(n=i.grammarlyAuthTracker).trackFail)||void 0===o||o.call(n,t,e,i.formKey,r)}catch(e){}},this.termsModel=new rA(a.isGDPR),this.logger=this.rootLogger.getLogger("googleOneTap")}return GoogleOneTapFlowModel.prototype.init=function(){var e,t;return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:if(o.trys.push([0,3,,4]),n=null===(t=(e=this.options).getCurrentUser)||void 0===t?void 0:t.call(e))return[3,2];return[4,this.api.orAnonymous()];case 1:n=o.sent(),o.label=2;case 2:return r=n,[3,4];case 3:return o.sent(),[3,4];case 4:if(!r||r.anonymous)return[2,this.tryToInitGoogleOneTap("init")];if(r&&!r.anonymous&&this.ssoService.isContinueFlow)return[2,this.initSSOContinueFlow(r)];return[2]}})})},GoogleOneTapFlowModel.prototype.processSSOStartRequest=function(e,t){var r=this.ssoService.generateStateKey();document.location.href=this.ssoService.getRedirectLink(t,r)},__decorate([observable,__metadata("design:type",Object)],GoogleOneTapFlowModel.prototype,"showExplicitTermsOfService",void 0),__decorate([action,__metadata("design:type",Object)],GoogleOneTapFlowModel.prototype,"onCloseTermsModal",void 0),__decorate([action,__metadata("design:type",Object)],GoogleOneTapFlowModel.prototype,"onOneTapAuth",void 0),__decorate([action,__metadata("design:type",Object)],GoogleOneTapFlowModel.prototype,"signinGrammarly",void 0),__decorate([action,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,String]),__metadata("design:returntype",void 0)],GoogleOneTapFlowModel.prototype,"processSSOStartRequest",null),GoogleOneTapFlowModel}(),ok={googleOneTapContainer:"google_one_tap-module_googleOneTapContainer__ZP3Op",termsModal:"google_one_tap-module_termsModal__r5jjR",termsModalHeader:"google_one_tap-module_termsModalHeader__YZrrt",termsModalBody:"google_one_tap-module_termsModalBody__yoZK6",closeButton:"google_one_tap-module_closeButton__Z50QG"},ExplicitTermsOfServiceOneTap=function(e){var t=e.googleOneTapModel;return em.createElement("div",{className:ok.termsModal},em.createElement("div",{className:ok.termsModalHeader},em.createElement(GrammarlyHeaderLogo,null),em.createElement("button",{className:ok.closeButton,onClick:t.onCloseTermsModal},em.createElement(GoogleOneTapCloseIcon,null))),em.createElement("div",{className:ok.termsModalBody},em.createElement(ny,{model:t.termsModel,trackToSLinkFollow:t.onTrackToSLinkFollow}),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(PrimaryButton,{compact:!0,text:"Agree and Sign up",color:V.Green,onClick:t.onAgreeAndSignUp})))},GrammarlyHeaderLogo=function(){return em.createElement("svg",{width:"158",height:"34",fill:"none"},em.createElement("path",{fill:"#1C1C1C",d:"M78.088 11.867v1.23a5.3 5.3 0 0 0-3.725-1.514c-3.27 0-5.779 2.672-5.779 5.983 0 3.31 2.507 5.936 5.78 5.936a5.3 5.3 0 0 0 3.724-1.513v1.23h2.34V11.868h-2.34v-.001Zm-.533 7.511c-1.118 1.763-3.23 2.293-4.909 1.248-1.678-1.043-2.127-3.137-1.01-4.9 1.118-1.762 3.242-2.312 4.921-1.268 1.678 1.043 2.114 3.158.998 4.92ZM128.21 11.867v1.23a5.304 5.304 0 0 0-3.726-1.514c-3.271 0-5.779 2.672-5.779 5.983 0 3.31 2.507 5.936 5.779 5.936a5.304 5.304 0 0 0 3.726-1.513v1.23h2.34V11.868h-2.34v-.001Zm-.533 7.511c-1.118 1.763-3.231 2.293-4.909 1.248-1.678-1.043-2.127-3.137-1.01-4.9 1.118-1.762 3.243-2.312 4.921-1.268 1.678 1.043 2.114 3.158.998 4.92ZM89.693 16.449c0-1.064-.238-1.585-.597-1.963-.358-.379-.907-.592-1.504-.592s-1.146.213-1.505.592c-.358.378-.597.898-.597 1.963v6.762h-2.435v-11.35h2.291v.803c.645-.662 1.576-1.088 2.65-1.088 1.314 0 2.485.615 3.225 1.56.788-.945 2.005-1.56 3.414-1.56 1.41 0 2.508.615 3.271 1.608.526.71.86 1.608.86 3.051v6.976H96.33V16.45c0-1.064-.238-1.585-.597-1.963-.358-.379-.907-.592-1.504-.592s-1.146.213-1.505.592c-.358.378-.597.898-.597 1.963v6.762h-2.435V16.45h.001ZM107.904 16.449c0-1.064-.238-1.585-.597-1.963-.358-.379-.907-.592-1.504-.592s-1.146.213-1.505.592c-.358.378-.597.898-.597 1.963v6.762h-2.435v-11.35h2.291v.803c.645-.662 1.576-1.088 2.651-1.088a4.09 4.09 0 0 1 3.224 1.56c.788-.945 2.005-1.56 3.414-1.56 1.409 0 2.508.615 3.271 1.608.526.71.86 1.608.86 3.051v6.976h-2.436V16.45c0-1.064-.238-1.585-.597-1.963-.358-.379-.907-.592-1.504-.592s-1.146.213-1.505.592c-.358.378-.597.898-.597 1.963v6.762h-2.435V16.45h.001ZM142.115 4.818h2.436v18.398h-2.436V4.818ZM55.33 11.867v1.23a5.3 5.3 0 0 0-3.724-1.514c-3.272 0-5.78 2.625-5.78 5.936 0 3.312 2.508 5.983 5.78 5.983a5.246 5.246 0 0 0 3.676-1.466v1.182c0 1.94-1.22 3.404-3.04 3.642-1.42.187-2.983-.216-3.979-1.026a3.506 3.506 0 0 1-.332-.312l-1.279 2.062.093.079c1.263 1.028 3.034 1.61 4.799 1.61.339 0 .677-.022 1.012-.066 3.013-.394 5.113-2.858 5.113-5.989V11.867h-2.34.002Zm-3.485 9.317c-1.983 0-3.486-1.585-3.486-3.665s1.504-3.619 3.486-3.619c1.981 0 3.486 1.56 3.486 3.643 0 2.082-1.505 3.641-3.486 3.641ZM155.526 11.826l-3.609 8.108-3.328-8.108h-2.443l4.5 10.964-2.839 6.378h2.474l1.552-3.488 1.271-2.855L158 11.826h-2.474ZM67.747 12.142c-.845-.37-1.775-.523-2.685-.338a4.25 4.25 0 0 0-2.136 1.143c-.12.118-.239.236-.335.378V11.86h-2.292V23.21h2.435v-5.652c0-1.324.335-2.081.883-2.625.574-.568 1.361-.899 2.27-.899.281 0 1.008.079 1.796.584l1.158-1.867a6.73 6.73 0 0 0-1.094-.61ZM137.941 11.785a4.25 4.25 0 0 0-2.136 1.142c-.12.12-.239.237-.335.378V11.84h-2.292V23.19h2.436v-5.652c0-1.324.334-2.081.883-2.625.573-.568 1.36-.899 2.269-.899.282 0 .952.007 1.79.329v-2.245c-.826-.348-1.728-.495-2.615-.315v.002Z"}),em.createElement("path",{fill:"#027E6F",d:"M0 17C0 7.68 7.626.129 17.035.129c9.41 0 17.034 7.552 17.034 16.87 0 8.153-5.836 14.953-13.598 16.528a17.234 17.234 0 0 1-3.43.341H0v-16.87V17Z"}),em.createElement("path",{fill:"#fff",d:"M28.823 15.402h-7.677l-1.808 3.101h6.33c-.992 5.393-7.048 9.065-13.1 5.96a7.093 7.093 0 0 1-3.047-2.988c-3.482-6.565 1.275-13.17 7.552-13.17a8.751 8.751 0 0 1 6.52 2.902l1.621-2.783a11.865 11.865 0 0 0-8.978-3.185c-5.922.404-10.723 5.265-11.01 11.134-.33 6.74 5.11 12.323 11.843 12.323 6.732 0 11.86-5.27 11.86-11.746 0-.527-.04-1.043-.107-1.548Z"}))},GoogleOneTapCloseIcon=function(){return em.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#5f6368"},em.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),em.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}))},oA=observer(function(e){function GoogleOneTapClass(t){var r=e.call(this,t)||this;return r.model=new oC(t.api,op,t.tracker,t.googleOneTapTracker,t.logger,{googleClientId:t.config.socialOAuth.google.clientId,isGDPR:t.isGDPR,getAssignedCustomFields:t.getAssignedCustomFields,getCurrentUser:t.getCurrentUser,onAuthAttempt:t.onAuthAttempt,onAuthSuccess:t.onAuthSuccess,onAuthReject:t.onAuthReject}),r}return __extends$1(GoogleOneTapClass,e),GoogleOneTapClass.prototype.componentDidMount=function(){this.model.init()},GoogleOneTapClass.prototype.render=function(){return this.model.showExplicitTermsOfService?em.createElement("div",{className:ok.googleOneTapContainer},em.createElement(ExplicitTermsOfServiceOneTap,{googleOneTapModel:this.model})):null},GoogleOneTapClass}(em.PureComponent)),oM=em.memo(function(e){var t=e.children;return em.createElement("div",{className:"with_border-module_container__l-mTn"},t)}),oF=function(){function OAuthConsentModelBase(e,t,r,n){var o=this;this.tokensApi=e,this.appsApi=t,this.getCurrentUser=r,this.oAuthParams=n,this.onAuthorizeConsentSuccessWebMessage=function(e){var t=o.getValidatedParams(),r=t.redirectUri,n=t.state;if(!window.opener)throw new D.AuthCommonError(D.UiErrorCode.PostMessageOpenerDNE);window.opener.postMessage({type:"authorization_response",response:{code:e,state:n}},r)},this.onAuthorizeConsentSuccessRedirect=function(e,t){var r=o.getValidatedParams(),n=r.redirectUri,a=r.state;if(void 0===a)throw new D.AuthCommonError(D.UiErrorCode.StateMismatch);var i=composeUrl(n,{code:e,state:a});t&&(t.location.href=i)},this.onCancelFlow=function(e){var t=o.getValidatedParams(),r=t.redirectUri,n=t.responseMode,a=t.state,i=t.close;if("web_message"===n){if(!window.opener)throw new D.AuthCommonError(D.UiErrorCode.PostMessageOpenerDNE);window.opener.postMessage({type:"authorization_cancel",response:{reason:e,state:a}},r)}(i||"redirect_json"===n)&&window.close()}}return Object.defineProperty(OAuthConsentModelBase.prototype,"currentUser",{get:function(){return this.getCurrentUser()},enumerable:!1,configurable:!0}),OAuthConsentModelBase.prototype.loadClientAppInfo=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:return t=(e=this.getValidatedParams()).clientId,e.redirectUri,[4,this.callWithTimeout(this.appsApi.getClientInfo(t),"appsApi.getClientInfo")];case 1:return o=void 0===(n=(r=i.sent()).displayName)?t:n,a=r.logoUrl,[2,{name:o,privacyPolicyUrl:r.privacyPolicyUrl,homepageUrl:r.homepageUrl,logoImgUrl:a,developerDisplayName:r.developerDisplayName}]}})})},OAuthConsentModelBase.prototype.loadOAuthState=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i,s;return __generator(this,function(l){switch(l.label){case 0:return t=(e=this.getValidatedParams()).clientId,r=e.redirectUri,n=e.scopes,[4,this.callWithTimeout(this.tokensApi.getState(t),"tokensApi.getState")];case 1:return o=l.sent(),i=null!=(a=eu.parse(o.scopes||[]))?a:[],s=n.filter(function(e){return!i.includes(e)}),[2,{redirectUri:r,requestedScopes:n,approvedScopes:i,notYetApprovedScopes:s,neverApprovedScopes:["Access your personal information like your name or email","Access your documents stored in your Grammarly account","See your activity with Grammarly on other sites or applications"]}]}})})},OAuthConsentModelBase.prototype.checkAlreadyConsentedAndNoNewScopes=function(e){return e.approvedScopes.length>0&&e.notYetApprovedScopes.length<1},OAuthConsentModelBase.prototype.getParams=function(){return this.oAuthParams},Object.defineProperty(OAuthConsentModelBase.prototype,"ctaAcceptLabel",{get:function(){switch(this.getValidatedParams().responseMode){case"redirect_json":return"Continue";case"web_message":return"Connect"}},enumerable:!1,configurable:!0}),OAuthConsentModelBase.prototype.getValidatedParams=function(){var e=this.getParams(),t=e.clientId,r=e.state,n=e.redirectUri,o=e.responseMode,a=e.codeChallenge,i=e.scopes,s=e.close;if(!t)throw new D.AuthCommonError(D.UiErrorCode.MissingClientId);if(!n)throw new D.AuthCommonError(D.UiErrorCode.MissingRedirectUri);if(!a)throw new D.AuthCommonError(D.UiErrorCode.MissingCodeChallenge);if(!i)throw new D.AuthCommonError(D.UiErrorCode.MissingScopes);var l=eu.parse(i);if(0===l.length)throw new D.AuthCommonError(D.UiErrorCode.InvalidScopes);return{state:r,clientId:t,redirectUri:n,responseMode:function(e){switch(void 0===e&&(e=""),e){case"web_message":default:return"web_message";case"redirect_json":return"redirect_json"}}(o),codeChallenge:a,scopes:l,close:s}},OAuthConsentModelBase.prototype.callWithTimeout=function(e,t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,D.resolveOrTimeout(e,t,15e3)];case 1:return[2,n.sent()];case 2:throw(r=n.sent())instanceof D.RequestError&&(r.details="".concat(r.details," for event=").concat(t)),r;case 3:return[2]}})})},OAuthConsentModelBase.prototype.loadAuthorizeConsent=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i,s,l,c,u,d;return __generator(this,function(p){switch(p.label){case 0:t=(e=this.getValidatedParams()).clientId,r=e.redirectUri,n=e.responseMode,o=e.codeChallenge,a=e.scopes,i=generateRandomString(30),s=null,"redirect_json"===n&&(s=window.open("","_blank")),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.callWithTimeout(this.tokensApi.authorizeNewScopes({client_id:t,code_challenge:o,redirect_uri:r,state:i,response_mode:n,scopes:a}),"tokensApi.authorize")];case 2:if(c=(l=p.sent()).state,u=l.code,c===i)"web_message"===n?this.onAuthorizeConsentSuccessWebMessage(u):"redirect_json"===n&&this.onAuthorizeConsentSuccessRedirect(u,s);else throw null==s||s.close(),new D.AuthCommonError(D.UiErrorCode.StateMismatch);return[3,4];case 3:throw d=p.sent(),null==s||s.close(),D.AuthCommonError.create(d);case 4:return[2]}})})},OAuthConsentModelBase}(),oT=function(){function OAuthPreApprovedAppConsentModelImpl(e,t,r){var n=this;this.oAuthParams=e,this.getCurrentUser=t,this.redirectAfterConsent=r,this.clientAppConsentFlowType="preApproved",this.init=function(){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},this.authorizeConsent=function(){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(e){return this.redirectAfterConsent(),[2]})})}}return Object.defineProperty(OAuthPreApprovedAppConsentModelImpl.prototype,"clientId",{get:function(){return this.oAuthParams.clientId},enumerable:!1,configurable:!0}),Object.defineProperty(OAuthPreApprovedAppConsentModelImpl.prototype,"currentUser",{get:function(){return this.getCurrentUser()},enumerable:!1,configurable:!0}),OAuthPreApprovedAppConsentModelImpl}(),oP=function(e){function OAuthPartnerAppConsentModelImpl(t,r,n,o,a,i,s){var l=e.call(this,r,n,o,t)||this;return l.oAuthAppTracking=a,l.rootLogger=i,l.onError=s,l.clientAppConsentFlowType="partner",l.partnerAppConsentStatePayload=new rb.Empty,l.authorizeConsentPayload=new rb.Empty,l.isApprovedByInstitutionAdmin=!1,l.log=function(e,t,r){void 0===r&&(r={}),l.logger.info(e,__assign$2(__assign$2(__assign$2({},r),{method:e,type:t}),l.getParams()))},l.onHomepageLinkClick=function(){var e,t;null===(t=(e=l.oAuthAppTracking).trackOAuthAppConsentLinkClick)||void 0===t||t.call(e,"developerHomepage",l.clientId)},l.onPrivacyLinkClick=function(){var e,t;null===(t=(e=l.oAuthAppTracking).trackOAuthAppConsentLinkClick)||void 0===t||t.call(e,"privacyPolicy",l.clientId)},l.authorizeConsent=function(){return __awaiter(l,void 0,void 0,function(){var e,t,r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:if(!this.partnerAppConsentStatePayload.isValue())return[2];null===(o=(n=this.oAuthAppTracking).trackOAuthAppConsentButtonClick)||void 0===o||o.call(n,"continue",this.clientId),this.log("authorizeConsent","start"),this.setAuthorizeConsentPayload(new rb.Loading),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.loadAuthorizeConsent()];case 2:return i.sent(),this.log("authorizeConsent","end"),[3,4];case 3:return e=i.sent(),t=H.Error.AuthCommonError.create(e),r=new rb.Error(t),this.setAuthorizeConsentPayload(r),null===(a=this.onError)||void 0===a||a.call(this,t,r.nonce),this.logger.error("authorizeConsent",t,{nonce:r.nonce}),[3,4];case 4:return[2]}})})},l.cancelFlow=function(){var e,t,r;if(l.partnerAppConsentStatePayload.isValue()){null===(t=(e=l.oAuthAppTracking).trackOAuthAppConsentButtonClick)||void 0===t||t.call(e,"cancel",l.clientId),l.log("cancelFlow","start"),l.setAuthorizeConsentPayload(new rb.Loading);try{l.onCancelFlow("USER_CANCELLATION"),l.log("cancelFlow","end")}catch(e){var n=H.Error.AuthCommonError.create(e),o=new rb.Error(n);l.setAuthorizeConsentPayload(o),null===(r=l.onError)||void 0===r||r.call(l,n,o.nonce),l.logger.error("cancelFlow",n,{nonce:o.nonce})}}},l.logger=l.rootLogger.getLogger("oauthConsentPartnerApp"),l}return __extends$1(OAuthPartnerAppConsentModelImpl,e),Object.defineProperty(OAuthPartnerAppConsentModelImpl.prototype,"userConsentFlowType",{get:function(){return"basic"},enumerable:!1,configurable:!0}),OAuthPartnerAppConsentModelImpl.prototype.init=function(){var e;return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:this.log("init","start"),this.setPartnerAppConsentStatePayload(new rb.Loading),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.all([this.loadClientAppInfo(),this.loadOAuthState()])];case 2:return t=(i=__read$2.apply(void 0,[s.sent(),2]))[0],r=i[1],this.setPartnerAppConsentStatePayload(new rb.Value({clientAppInfo:t,oAuthState:r})),this.log("init","end"),[3,4];case 3:return n=s.sent(),o=H.Error.AuthCommonError.create(n),a=new rb.Error(o),this.setPartnerAppConsentStatePayload(a),null===(e=this.onError)||void 0===e||e.call(this,o,a.nonce),this.logger.error("init",o,{nonce:a.nonce}),[3,4];case 4:return[2]}})})},Object.defineProperty(OAuthPartnerAppConsentModelImpl.prototype,"clientId",{get:function(){return this.getValidatedParams().clientId},enumerable:!1,configurable:!0}),OAuthPartnerAppConsentModelImpl.prototype.setPartnerAppConsentStatePayload=function(e){this.partnerAppConsentStatePayload=e},OAuthPartnerAppConsentModelImpl.prototype.setAuthorizeConsentPayload=function(e){this.authorizeConsentPayload=e},__decorate([observable.ref,__metadata("design:type",Object)],OAuthPartnerAppConsentModelImpl.prototype,"partnerAppConsentStatePayload",void 0),__decorate([observable.ref,__metadata("design:type",Object)],OAuthPartnerAppConsentModelImpl.prototype,"authorizeConsentPayload",void 0),__decorate([action.bound,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],OAuthPartnerAppConsentModelImpl.prototype,"init",null),OAuthPartnerAppConsentModelImpl}(oF);(P=(F=eu||(eu={})).Code||(F.Code={})).GRAMMARLY_CAPI_ALL="grammarly.capi.all",F.Labels=((T={})[P.GRAMMARLY_CAPI_ALL]=["Give you writing suggestions from your personal Grammarly account and keep your session when you’re offline"],T),O=new Set(Object.values(P)),F.parse=function(e){return e.filter(function(e){return O.has(e)})};var oO={emailLabel:"oauth_consent-module_emailLabel__f8Tty"},getMessage=function(e){var t=getOAuthClientName(e);return t&&t!==ec.Grammarly?"You are about to sign in to ".concat(t," using your Grammarly account."):"You’re about to sign in to your Grammarly account."},OAuthConsentForm=function(e){var t=e.oAuthClientId,r=e.currentUser,n=e.onSubmit;return em.createElement(Form,{onSubmit:n},em.createElement(BaseTitle,null,"Sign in"),(null==r?void 0:r.email)&&em.createElement(em.Fragment,null,em.createElement(LargeText,{color:"neutral60",textAlign:"center"},em.createElement("span",{className:oO.emailLabel,title:r.email},"as ",em.createElement(SpanCustomText,{bold:!0},null==r?void 0:r.email))),em.createElement(VerticalSpacer,{multiplier:4})),em.createElement(MediumText,{color:"neutral60",textAlign:"center"},getMessage(t)),em.createElement(VerticalSpacer,{multiplier:3}),em.createElement(SubmitAuthButton,{text:"Continue to Grammarly",qa:"btnOAuthConsent"}))},OAuthPreApprovedAppConsent=function(e){var t=e.model;return em.createElement(oM,null,em.createElement(OAuthConsentForm,{oAuthClientId:t.clientId,currentUser:t.currentUser,onSubmit:t.authorizeConsent}))},PartnerConsentFooter=function(){return em.createElement("div",{className:"index-module_container__b-7A6"},em.createElement(XSmallText,null,"Grammarly is committed to protecting your privacy."),em.createElement(VerticalSpacer,{multiplier:1}),em.createElement(XSmallText,null,em.createElement(Link,{to:"/trust",openInNewWindow:!0},"User Trust Guidelines"),em.createElement(HorizontalSpacer,{multiplier:2}),em.createElement(Link,{to:"/privacy-policy",openInNewWindow:!0},"Privacy Policy"),em.createElement(HorizontalSpacer,{multiplier:2}),em.createElement(Link,{to:"/security",openInNewWindow:!0},"Security")))},GrammarlyGLogo=function(e){return em.createElement("svg",{style:e.stylesOverrides,width:"160",height:"160",viewBox:"0 0 160 160"},em.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},em.createElement("g",{transform:"translate(-54.000000, -28.000000)"},em.createElement("g",{transform:"translate(54.000000, 28.000000)"},em.createElement("path",{d:"M160,80 C160,124.18087 124.184348,160 80,160 C35.8191304,160 0,124.18087 0,80 C0,35.8156522 35.8191304,0 80,0 C124.184348,0 160,35.8156522 160,80",fill:"#15C39A"}),em.createElement("path",{d:"M90.3892154,97.2730435 C90.8617978,99.8921739 93.3220063,101.686957 95.9802825,101.686957 L104.354721,101.686957 L109.209115,101.005217 C101.442779,112.410435 87.9568059,117.65913 73.2129293,115.342609 C61.2107257,113.457391 50.9007842,105.328696 46.550246,93.9756522 C36.6746633,68.2052174 55.477189,43.6 79.9785027,43.6 C92.7486527,43.6 103.950231,51.0776226 110.366247,60.1182609 C112.216457,62.7253421 115.453458,63.4782609 117.913667,61.7704348 C120.24878,60.1495652 120.929854,57.0713043 119.526007,54.6504348 C110.644237,40.7721739 94.6841557,31.8921739 76.7364482,33.0956522 C53.3679424,34.6643478 34.4576958,53.8052174 33.1129208,77.2104348 C31.5527039,104.445217 53.1351261,126.681739 79.9785027,126.681739 C94.0795282,126.681739 106.703734,120.535652 115.304039,110.591304 L114.285902,116.295652 L114.285902,121.450435 C114.285902,124.107826 116.07546,126.573913 118.692038,127.046957 C122.128685,127.666087 125.117074,125.04 125.117074,121.714783 L125.117074,90.8417391 L95.7127174,90.8417391 C92.390741,90.8417391 89.7672136,93.8365217 90.3892154,97.2730435 Z",fill:"#FFFFFF"})))))},SwapArrows=function(){return em.createElement("svg",{width:"26",height:"40",viewBox:"0 0 26 40",fill:"none"},em.createElement("path",{d:"M25.7071 8.70711C26.0976 8.31658 26.0976 7.68342 25.7071 7.29289L19.3431 0.928932C18.9526 0.538408 18.3195 0.538408 17.9289 0.928932C17.5384 1.31946 17.5384 1.95262 17.9289 2.34315L23.5858 8L17.9289 13.6569C17.5384 14.0474 17.5384 14.6805 17.9289 15.0711C18.3195 15.4616 18.9526 15.4616 19.3431 15.0711L25.7071 8.70711ZM1 9H25V7H1V9Z",fill:"#C6CBDE"}),em.createElement("path",{d:"M0.292894 31.2929C-0.0976315 31.6834 -0.0976315 32.3166 0.292894 32.7071L6.65685 39.0711C7.04738 39.4616 7.68054 39.4616 8.07107 39.0711C8.46159 38.6805 8.46159 38.0474 8.07107 37.6569L2.41421 32L8.07107 26.3431C8.46159 25.9526 8.46159 25.3195 8.07107 24.9289C7.68054 24.5384 7.04738 24.5384 6.65685 24.9289L0.292894 31.2929ZM25 31L1 31V33H25V31Z",fill:"#C6CBDE"}))},oI={container:"index-module_container__MW1ou",logosContainer:"index-module_logosContainer__Nkxfi",partnerPlaceholderIcon:"index-module_partnerPlaceholderIcon__L9Yu2",partnerLogoIconImg:"index-module_partnerLogoIconImg__504b4"},PartnerConsentHeader=function(e){return em.createElement("div",{className:oI.container},em.createElement("div",{className:oI.logosContainer},e.partnerLogoImgUrl?em.createElement("img",{width:56,height:56,className:oI.partnerLogoIconImg,src:e.partnerLogoImgUrl}):em.createElement("div",{className:oI.partnerPlaceholderIcon},e.partnerName[0]),em.createElement(HorizontalSpacer,{multiplier:2}),em.createElement(SwapArrows,null),em.createElement(HorizontalSpacer,{multiplier:2}),em.createElement(GrammarlyGLogo,{stylesOverrides:{width:56,height:56}})),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement(H2,{textAlign:"center"},"Connect ",e.partnerName," to your Grammarly account"))},PositiveCheckList=function(e){return em.createElement("ul",{className:"positive-module_container__4V3cv"},e.items.map(function(e,t){return em.createElement("li",{key:t,className:"positive-module_item__eBPj3"},e)}))},NegativeCheckList=function(e){return em.createElement("ul",{className:"negative-module_container__Uja5y"},e.items.map(function(e,t){return em.createElement("li",{key:t,className:"negative-module_item__VvLw6"},e)}))},Scopes=function(e){var t=e.clientAppName,r=e.approvedScopes,n=e.notYetApprovedScopes,o=e.neverApprovedScopes;return em.createElement(em.Fragment,null,n.length>0&&em.createElement(em.Fragment,null,em.createElement(H5,null,"This will allow ",t," to:"),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(PositiveCheckList,{items:n.map(function(e){return eu.Labels[e]}).reduce(function(e,t){return __spreadArray(__spreadArray([],__read$2(e),!1),__read$2(t),!1)},[])}),em.createElement(VerticalSpacer,{multiplier:4})),r.length>0&&em.createElement(em.Fragment,null,em.createElement(H5,null,t," is already allowed to:"),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(PositiveCheckList,{items:[r.map(function(e){return eu.Labels[e]}).reduce(function(e,t){return __spreadArray(__spreadArray([],__read$2(e),!1),__read$2(t),!1)},[]).join(" ")]}),em.createElement(VerticalSpacer,{multiplier:4})),o.length>0&&em.createElement(em.Fragment,null,em.createElement(H5,null,t," will ",em.createElement("i",null,"not")," be able to:"),em.createElement(VerticalSpacer,{multiplier:2}),em.createElement(NegativeCheckList,{items:o})))},ox={scopes:"index-module_scopes__-LIdW",ctaContainer:"index-module_ctaContainer__PgRG-"},InstitutionGrantApprovalCTASection=function(){return em.createElement(em.Fragment,null,em.createElement(InfoAlert,null,"To make this application available to your organization, you first need to approve it in the Admin Panel."),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement("div",{className:ox.ctaContainer},em.createElement(PrimaryButton,{text:"Go to the Admin Panel",color:V.AccessibleGreen,onClick:function(){}})))},InstitutionRequestApprovalCTASection=function(e){var t=e.clientAppInfo;return em.createElement(em.Fragment,null,em.createElement(InfoAlert,null,"A ",t.name," admin needs to approve this app before you can connect your account. Click ",em.createElement("b",null,"Request approval")," below to notify an admin."),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement("div",{className:ox.ctaContainer},em.createElement(PrimaryButton,{text:"Request approval",color:V.AccessibleGreen,onClick:function(){}})))};I=ed||(ed={}),(x={})[D.UiErrorCode.MissingClientId]="Missing client ID",x[D.UiErrorCode.MissingCodeChallenge]="Missing code challenge",x[D.UiErrorCode.MissingRedirectUri]="Missing redirect URI",x[D.UiErrorCode.MissingScopes]="Missing scopes",x[D.UiErrorCode.NotImplemented]="Not implemented",x[D.UiErrorCode.PostMessageOpenerDNE]="Post message opener DNE. Tab closed?",x[D.UiErrorCode.StateMismatch]="State mismatch",x[D.UiErrorCode.InvalidRedirectUri]="Invalid redirect URI",x[D.UiErrorCode.InvalidScopes]="Invalid scopes",x[D.ApiErrorCode.InvalidClient]="Invalid client",x[D.ApiErrorCode.CannotUpdateDatabase]="Cannot update database",x[D.ApiErrorCode.InvalidClientType]="Invalid client type",x[D.ApiErrorCode.InvalidOrigin]="Invalid origin",x[D.ApiErrorCode.InvalidRedirectUri]="Invalid redirect URI",x[D.ApiErrorCode.InvalidScope]="Invalid scope",x[D.ApiErrorCode.NotImplemented]="Not implemented",x[D.ApiErrorCode.OAuthNotEnabled]="OAuth not enabled",x[D.ApiErrorCode.ValidationError]="Field validation error",x[D.ApiErrorCode.FailedTokenGeneration]="Token generation failed",x[D.ApiErrorCode.UserNotAuthorized]="User not authorized",x[D.ApiErrorCode.InvalidGrantType]="Invalid grant type",x[D.ApiErrorCode.MissingParameter]="Missing parameter",I.getMessageFromErrCode=function(e){return D.isAuthCommonError(e)&&x[e.errCode]||"Unable to continue due to an error. Please return to the application and try again."};var ExternalLink=function(){return em.createElement("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},em.createElement("path",{d:"M4 0.5H2.5C1.39543 0.5 0.5 1.39543 0.5 2.5V8.5C0.5 9.60457 1.39543 10.5 2.5 10.5H8.5C9.60457 10.5 10.5 9.60457 10.5 8.5V7M5.5 5.5L10.5 0.5M10.5 0.5H6.5M10.5 0.5V4.5",stroke:"#4A6EE0","stroke-linecap":"round"}))},oR={appVerification:"app_verification-module_appVerification__jxMWr",appLink:"app_verification-module_appLink__ABvDT"},AppVerification=function(e){var t=e.redirectUri,r=e.displayName,n=e.homepageUrl,o=e.privacyPolicyUrl,a=e.developerDisplayName,i=e.onPrivacyLinkClick,s=e.onHomepageLinkClick;return em.createElement("div",{className:oR.appVerification},em.createElement(SmallText,null,"Make sure you trust this app before connecting."),em.createElement(SmallText,null,a&&"By ".concat(a," \xb7 "),em.createElement(Link,{onClick:function(){return s()},to:n,openInNewWindow:!0,className:oR.appLink},function(e){try{return new URL(e).host.replace(/^(www\.)/,"")}catch(e){return null}}(n)," ",em.createElement(ExternalLink,null))," ","\xb7"," ",em.createElement(Link,{onClick:function(){return i()},to:o,openInNewWindow:!0,className:oR.appLink},r,"'s privacy policy")," ",em.createElement(ExternalLink,null)),em.createElement(XSmallText,null,"You will be connecting to ",t,"."))},BasicCTASection=function(e){var t=e.clientAppInfo,r=e.oAuthState,n=e.ctaAcceptLabel,o=e.authorizeConsentPayload,a=e.onCancel,i=e.onAuthorizeConsent,s=e.onHomepageLinkClick,l=e.onPrivacyLinkClick;return em.createElement(em.Fragment,null,em.createElement(AppVerification,{displayName:t.name,developerDisplayName:t.developerDisplayName,privacyPolicyUrl:t.privacyPolicyUrl,homepageUrl:t.homepageUrl,redirectUri:r.redirectUri,onHomepageLinkClick:s,onPrivacyLinkClick:l}),em.createElement(VerticalSpacer,{multiplier:4}),o.isError()&&em.createElement(em.Fragment,null,em.createElement(ErrorAlert,null,ed.getMessageFromErrCode(o.error),em.createElement(VerticalSpacer,{multiplier:2}),"Error: ",o.nonce),em.createElement(VerticalSpacer,{multiplier:4})),em.createElement("div",{className:ox.ctaContainer},em.createElement(SecondaryButton,{text:"Cancel",onClick:a}),em.createElement(HorizontalSpacer,{multiplier:2}),em.createElement(PrimaryButton,{text:n,color:V.AccessibleGreen,onClick:i,status:o.isLoading()?L.Loading:L.Active})))},CTASection=function(e){var t=e.userConsentFlowType,r=e.clientAppInfo,n=e.ctaAcceptLabel,o=e.oAuthState,a=e.authorizeConsentPayload,i=e.onAuthorizeConsent,s=e.onCancel,l=e.onHomepageLinkClick,c=e.onPrivacyLinkClick;switch(__rest(e,["userConsentFlowType","clientAppInfo","ctaAcceptLabel","oAuthState","authorizeConsentPayload","onAuthorizeConsent","onCancel","onHomepageLinkClick","onPrivacyLinkClick"]),t){case"institutionAdminGrantApproval":return em.createElement(InstitutionGrantApprovalCTASection,null);case"institutionRequestApproval":return em.createElement(InstitutionRequestApprovalCTASection,{clientAppInfo:r});default:return em.createElement(BasicCTASection,{clientAppInfo:r,oAuthState:o,ctaAcceptLabel:n,authorizeConsentPayload:a,onAuthorizeConsent:i,onCancel:s,onHomepageLinkClick:l,onPrivacyLinkClick:c})}},PartnerConsentLoadedView=function(e){var t=__rest(e,[]);return em.createElement(em.Fragment,null,em.createElement(PartnerConsentHeader,{partnerName:t.clientAppInfo.name,partnerLogoImgUrl:t.clientAppInfo.logoImgUrl}),em.createElement(VerticalSpacer,{multiplier:4}),em.createElement("div",{className:ox.scopes},em.createElement(Scopes,{clientAppName:t.clientAppInfo.name,approvedScopes:t.oAuthState.approvedScopes,notYetApprovedScopes:t.oAuthState.notYetApprovedScopes,neverApprovedScopes:t.oAuthState.neverApprovedScopes}),em.createElement(VerticalSpacer,{multiplier:5}),em.createElement(CTASection,__assign$2({},t)),em.createElement(VerticalSpacer,{multiplier:4})))},oL=observer(function(e){var t=e.model,r=e.supportNewRequestUrl,n=t.partnerAppConsentStatePayload;return em.createElement(em.Fragment,null,em.createElement("div",{className:"index-module_container__6MxPI"},n.isLoading()&&em.createElement(Loader$1,{color:"neutral40",stylesOverrides:{width:100,height:100}}),n.isError()&&em.createElement(em.Fragment,null,em.createElement(ErrorBlock,{title:"Error",message:ed.getMessageFromErrCode(n.error),nonce:n.nonce}),em.createElement(TroubleshootLink,{to:r,openInNewWindow:!0},"Contact Support")),n.isValue()&&em.createElement(PartnerConsentLoadedView,{userConsentFlowType:t.userConsentFlowType,clientAppInfo:n.value.clientAppInfo,ctaAcceptLabel:t.ctaAcceptLabel,oAuthState:n.value.oAuthState,authorizeConsentPayload:t.authorizeConsentPayload,onAuthorizeConsent:t.authorizeConsent,onCancel:t.cancelFlow,onHomepageLinkClick:t.onHomepageLinkClick,onPrivacyLinkClick:t.onPrivacyLinkClick})),em.createElement("div",{className:"index-module_footer__t4DnA"},em.createElement(PartnerConsentFooter,null)))});!function(e){function OAuthConsent(t){var r,n,o=e.call(this,t)||this;return(r=t.params).clientId&&r.codeChallenge&&isPreApprovedClientId(r.clientId)?o.model=new oT(t.params,t.getCurrentUser,t.onRedirectAfterConsent):(n=t.params).clientId&&n.codeChallenge&&n.redirectUri&&(o.model=new oP(t.params,t.tokensApi,t.partnerAppsApi,t.getCurrentUser,t.oAuthAppTracking,t.logger,t.onError)),o}__extends$1(OAuthConsent,e),OAuthConsent.prototype.componentDidMount=function(){var e;null===(e=this.model)||void 0===e||e.init()},OAuthConsent.prototype.render=function(){if(this.model){if("preApproved"===this.model.clientAppConsentFlowType)return em.createElement(OAuthPreApprovedAppConsent,{model:this.model});if("partner"===this.model.clientAppConsentFlowType)return em.createElement(oL,{model:this.model,supportNewRequestUrl:this.props.supportNewRequestUrl})}return em.createElement(em.Fragment,null,em.createElement(ErrorBlock,{title:"Error",message:"Unable to continue due to an error. Please return to the application and try again."}),em.createElement(TroubleshootLink,{to:this.props.supportNewRequestUrl,openInNewWindow:!0},"Contact Support"))}}(em.PureComponent),(R=ep||(ep={}))[R.Empty=0]="Empty",R[R.Success=1]="Success",R[R.Fail=2]="Fail";var oV="nav:query",oN="nav:pathname"}}]);